(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-DetailPage-vue"],{"615b":function(t,e,a){},"99d9":function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return r}));var i=a("b0af"),n=a("80d2"),o=Object(n["j"])("v-card__actions"),s=Object(n["j"])("v-card__subtitle"),l=Object(n["j"])("v-card__text"),r=Object(n["j"])("v-card__title");i["a"]},b0af:function(t,e,a){"use strict";var i=a("5530"),n=(a("a9e3"),a("0481"),a("4069"),a("615b"),a("10d2")),o=a("297c"),s=a("1c87"),l=a("58df");e["a"]=Object(l["a"])(o["a"],s["a"],n["a"]).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes:function(){return Object(i["a"])(Object(i["a"])({"v-card":!0},s["a"].options.computed.classes.call(this)),{},{"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised},n["a"].options.computed.classes.call(this))},styles:function(){var t=Object(i["a"])({},n["a"].options.computed.styles.call(this));return this.img&&(t.background='url("'.concat(this.img,'") center center / cover no-repeat')),t}},methods:{genProgress:function(){var t=o["a"].options.methods.genProgress.call(this);return t?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[t]):null}},render:function(t){var e=this.generateRouteLink(),a=e.tag,i=e.data;return i.style=this.styles,this.isClickable&&(i.attrs=i.attrs||{},i.attrs.tabindex=0),t(a,this.setBackgroundColor(this.color,i),[this.genProgress(),this.$slots.default])}})},ce1b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",[a("a",{on:{click:t.windowClose}},[t._v("詳細画面を閉じる")]),t.level>=1?a("v-btn",{on:{click:t.windowPrint}},[t._v("印刷")]):t._e(),t.level>=1?a("v-btn",{on:{click:t.windowSubWindow}},[t._v("サブウインドウを開く")]):t._e()],1),a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("詳細情報")]),a("v-spacer"),t.level>=1?a("v-btn",{on:{click:function(e){t.isEditing=!t.isEditing}}},[t.isEditing?a("v-icon",[t._v(" mdi-close ")]):a("v-icon",[t._v(" mdi-pencil ")]),t._v(" "+t._s("編集"))],1):t._e(),t.level>=1?a("v-btn",[a("v-icon",[t._v(" mdi-delete ")]),t._v(" "+t._s("削除"))],1):t._e()],1),a("v-divider"),a("v-card-text",[a("v-container",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"700px"}},t._l(t.items,(function(e,i){return a("v-row",{key:i,attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"4"}},[a("v-subheader",[t._v(t._s(e.text))])],1),a("v-col",[a("v-text-field",{attrs:{placeholder:"値を入力",outlined:"",clearable:"",dense:"",disabled:!t.isEditing},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}})],1)],1)})),1)],1),a("v-divider"),t.level>=1?a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{outlined:"",color:"blue darken-1",text:"",disabled:!t.isEditing}},[t._v(" 更新 ")]),a("v-btn",{attrs:{outlined:"",color:"blue darken-1",text:""}},[t._v(" 閉じる ")])],1):t._e()],1)},n=[],o=(a("d3b7"),a("99af"),a("caad"),a("b64b"),a("fb6a"),a("a15b"),{name:"DetailPage",data:function(){return{title:"台帳システム",detailData:{columns:[],rows:[]},items:{},user:null,loading:!1,level:-1,hasSaved:!1,isEditing:null,window:this.$root}},computed:{loginData:function(){return this.$store.getters["auth/login"]}},methods:{windowClose:function(){window.open("about:blank","_self"),window.close(),window.closed||alert("閉じるのに失敗しました")},windowPrint:function(){window.print()},windowSubWindow:function(){var t;t=window.open("_self","sample1","top=0,left=0,height=400,width=520,resizable=yes, scrollbars=yes"),window.focus(),t.focus()},cman_winSubPrint1:function(){var t;!t||t.closed?alert("サブウインドウが見つかりません"):(t.print(),t.focus())},getUserData:function(t){var e=this,a="http://harima-isk:50001/system/user",i={},n={headers:{"Content-Type":"application/json"}};this.loading=!0,this.axios.get(a,i,n).then((function(a){console.log(a.data),e.detailData.columns=a.data.columns,e.detailData.rows=a.data.rows;var i=a.data.rows;for(var n in i)if(t==i[n]["user_name"]){e.user=i[n]["user_name"],e.level=i[n]["level"];break}})).catch((function(t){console.log(t)})).finally((function(){e.loading=!1}))},getLayerData:function(t,e){var a=this,i="http://harima-isk:50001/db/".concat(t,"?").concat(e),n={},o={headers:{"Content-Type":"application/json"}};this.loading=!0,this.axios.get(i,n,o).then((function(t){var e=t.data;if(e.length>0){var i=e[0],n=[];for(var o in i)if(!["gid","geometry"].includes(o)){var s={text:o,value:i[o]};n.push(s)}a.items=n}})).catch((function(t){console.log(t)})).finally((function(){a.loading=!1}))}},mounted:function(){var t=this.$route.query;if(Object.keys(t).length>0&&(console.log(t),"layer"in t)){var e,a,i=null===(e=t.layer)||void 0===e?void 0:e.slice(),n=null===(a=t.user)||void 0===a?void 0:a.slice();delete t.layer,delete t.user;var o=[];for(var s in t)o.push("".concat(s,"=").concat(t[s]));var l=o.join("&");this.getLayerData(i,l),console.log("ユーザ確認",n),this.getUserData(n)}}}),s=o,l=a("2877"),r=a("6544"),c=a.n(r),d=a("8336"),u=a("b0af"),v=a("99d9"),h=a("62ad"),f=a("a523"),b=a("ce7e"),g=a("132d"),p=a("0fd9"),w=a("2fa4"),_=a("e0c7"),m=a("8654"),y=a("71d9"),k=Object(l["a"])(s,i,n,!1,null,null,null);e["default"]=k.exports;c()(k,{VBtn:d["a"],VCard:u["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VCol:h["a"],VContainer:f["a"],VDivider:b["a"],VIcon:g["a"],VRow:p["a"],VSpacer:w["a"],VSubheader:_["a"],VTextField:m["a"],VToolbar:y["a"]})}}]);
//# sourceMappingURL=view-DetailPage-vue.5529213d.js.map