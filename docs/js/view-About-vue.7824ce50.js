(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-About-vue"],{"25a5":function(t,e,i){!function(e,i){t.exports=i()}(0,(function(){"use strict";function t(t,n,s,a,r){!function t(i,n,s,a,r){for(;a>s;){if(a-s>600){var o=a-s+1,h=n-s+1,l=Math.log(o),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(o-c)/o)*(h-o/2<0?-1:1),p=Math.max(s,Math.floor(n-h*c/o+u)),f=Math.min(a,Math.floor(n+(o-h)*c/o+u));t(i,n,p,f,r)}var d=i[n],_=s,g=a;for(e(i,s,n),r(i[a],d)>0&&e(i,s,a);_<g;){for(e(i,_,g),_++,g--;r(i[_],d)<0;)_++;for(;r(i[g],d)>0;)g--}0===r(i[s],d)?e(i,s,g):e(i,++g,a),g<=n&&(s=g+1),n<=g&&(a=g-1)}}(t,n,s||0,a||t.length-1,r||i)}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function a(t,e){r(t,0,t.children.length,e,t)}function r(t,e,i,n,s){s||(s=d(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var a=e;a<i;a++){var r=t.children[a];o(s,t.leaf?n(r):r)}return s}function o(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(e,i,n,s,a){for(var r=[i,n];r.length;)if(!((n=r.pop())-(i=r.pop())<=s)){var o=i+Math.ceil((n-i)/s/2)*s;t(e,o,i,n,a),r.push(i,o,o,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,i=[];if(!f(t,e))return i;for(var n=this.toBBox,s=[];e;){for(var a=0;a<e.children.length;a++){var r=e.children[a],o=e.leaf?n(r):r;f(t,o)&&(e.leaf?i.push(r):p(t,o)?this._all(r,i):s.push(r))}e=s.pop()}return i},n.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var s=e.children[n],a=e.leaf?this.toBBox(s):s;if(f(t,a)){if(e.leaf||p(t,a))return!0;i.push(s)}}e=i.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=d([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var i,n,a,r=this.data,o=this.toBBox(t),h=[],l=[];r||h.length;){if(r||(r=h.pop(),n=h[h.length-1],i=l.pop(),a=!0),r.leaf){var c=s(t,r.children,e);if(-1!==c)return r.children.splice(c,1),h.push(r),this._condense(h),this}a||r.leaf||!p(r,o)?n?(i++,r=n.children[i],a=!1):r=null:(h.push(r),l.push(i),i=0,n=r,r=r.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},n.prototype._build=function(t,e,i,n){var s,r=i-e+1,o=this._maxEntries;if(r<=o)return a(s=d(t.slice(e,i+1)),this.toBBox),s;n||(n=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,n-1))),(s=d([])).leaf=!1,s.height=n;var h=Math.ceil(r/o),l=h*Math.ceil(Math.sqrt(o));_(t,e,i,l,this.compareMinX);for(var c=e;c<=i;c+=l){var u=Math.min(c+l-1,i);_(t,c,u,h,this.compareMinY);for(var p=c;p<=u;p+=h){var f=Math.min(p+h-1,u);s.children.push(this._build(t,p,f,n-1))}}return a(s,this.toBBox),s},n.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var s=1/0,a=1/0,r=void 0,o=0;o<e.children.length;o++){var h=e.children[o],l=c(h),u=(p=t,f=h,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-l);u<a?(a=u,s=l<s?l:s,r=h):u===a&&l<s&&(s=l,r=h)}e=r||e.children[0]}var p,f;return e},n.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),s=[],a=this._chooseSubtree(n,this.data,e,s);for(a.children.push(t),o(a,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},n.prototype._split=function(t,e){var i=t[e],n=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,n);var r=this._chooseSplitIndex(i,s,n),o=d(i.children.splice(r,i.children.length-r));o.height=i.height,o.leaf=i.leaf,a(i,this.toBBox),a(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},n.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,i){for(var n,s,a,o,h,l,u,p=1/0,f=1/0,d=e;d<=i-e;d++){var _=r(t,0,d,this.toBBox),g=r(t,d,i,this.toBBox),m=(s=_,a=g,o=void 0,h=void 0,l=void 0,u=void 0,o=Math.max(s.minX,a.minX),h=Math.max(s.minY,a.minY),l=Math.min(s.maxX,a.maxX),u=Math.min(s.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-h)),y=c(_)+c(g);m<p?(p=m,n=d,f=y<f?y:f):m===p&&y<f&&(f=y,n=d)}return n||i-e},n.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:h,s=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,s)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var s=this.toBBox,a=r(t,0,e,s),h=r(t,i-e,i,s),l=u(a)+u(h),c=e;c<i-e;c++){var p=t.children[c];o(a,t.leaf?s(p):p),l+=u(a)}for(var f=i-e-1;f>=e;f--){var d=t.children[f];o(h,t.leaf?s(d):d),l+=u(h)}return l},n.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)o(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():a(t[e],this.toBBox)},n}))},"5bc0":function(t,e,i){},"777e":function(t,e,i){},9661:function(t,e,i){},"9d47":function(t,e,i){"use strict";var n=i("3900"),s=i("fced"),a=i("cd7e"),r=i("256f"),o=i("92fa"),h=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),l="units",c={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"},u=[1,2,5],p=25.4/.28,f=function(t){function e(e){var i=this,n=e||{},s=void 0!==n.className?n.className:n.bar?"ol-scale-bar":"ol-scale-line";return i=t.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this,i.on,i.once,i.un,i.innerElement_=document.createElement("div"),i.innerElement_.className=s+"-inner",i.element.className=s+" "+a["e"],i.element.appendChild(i.innerElement_),i.viewState_=null,i.minWidth_=void 0!==n.minWidth?n.minWidth:64,i.renderedVisible_=!1,i.renderedWidth_=void 0,i.renderedHTML_="",i.addChangeListener(l,i.handleUnitsChanged_),i.setUnits(n.units||c.METRIC),i.scaleBar_=n.bar||!1,i.scaleBarSteps_=n.steps||4,i.scaleBarText_=n.text||!1,i.dpi_=n.dpi||void 0,i}return h(e,t),e.prototype.getUnits=function(){return this.get(l)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(l,t)},e.prototype.setDpi=function(t){this.dpi_=t},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,i=t.projection,n=this.getUnits(),a=n==c.DEGREES?s["b"].DEGREES:s["b"].METERS,h=Object(r["m"])(i,t.resolution,e,a),l=this.minWidth_*(this.dpi_||p)/p,f=l*h,d="";if(n==c.DEGREES){var _=r["a"][s["b"].DEGREES];f*=_,f<_/60?(d="″",h*=3600):f<_?(d="′",h*=60):d="°"}else n==c.IMPERIAL?f<.9144?(d="in",h/=.0254):f<1609.344?(d="ft",h/=.3048):(d="mi",h/=1609.344):n==c.NAUTICAL?(h/=1852,d="nm"):n==c.METRIC?f<.001?(d="μm",h*=1e6):f<1?(d="mm",h*=1e3):f<1e3?d="m":(d="km",h/=1e3):n==c.US?f<.9144?(d="in",h*=39.37):f<1609.344?(d="ft",h/=.30480061):(d="mi",h/=1609.3472):Object(o["a"])(!1,33);var g,m,y,v,x=3*Math.floor(Math.log(l*h)/Math.log(10));while(1){y=Math.floor(x/3);var M=Math.pow(10,y);if(g=u[(x%3+3)%3]*M,m=Math.round(g/h),isNaN(m))return this.element.style.display="none",void(this.renderedVisible_=!1);if(m>=l)break;++x}v=this.scaleBar_?this.createScaleBar(m,g,d):g.toFixed(y<0?-y:0)+" "+d,this.renderedHTML_!=v&&(this.innerElement_.innerHTML=v,this.renderedHTML_=v),this.renderedWidth_!=m&&(this.innerElement_.style.width=m+"px",this.renderedWidth_=m),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.createScaleBar=function(t,e,i){for(var n,s="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),a=[],r=t/this.scaleBarSteps_,o="#ffffff",h=0;h<this.scaleBarSteps_;h++)0===h&&a.push(this.createMarker("absolute",h)),a.push('<div><div class="ol-scale-singlebar" style="width: '+r+"px;background-color: "+o+';"></div>'+this.createMarker("relative",h)+(h%2===0||2===this.scaleBarSteps_?this.createStepText(h,t,!1,e,i):"")+"</div>"),h===this.scaleBarSteps_-1&&a.push(this.createStepText(h+1,t,!0,e,i)),o="#ffffff"===o?"#000000":"#ffffff";n=this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+s+"</div>":"";var l='<div style="display: flex;">'+n+a.join("")+"</div>";return l},e.prototype.createMarker=function(t,e){var i="absolute"===t?3:-10;return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+i+'px;"></div>'},e.prototype.createStepText=function(t,e,i,n,s){var a=0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100,r=a+(0===t?"":" "+s),o=0===t?-3:e/this.scaleBarSteps_*-1,h=0===t?0:e/this.scaleBarSteps_*2;return'<div class="ol-scale-step-text" style="margin-left: '+o+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+h+"px;left: "+(i?e+"px":"unset")+';">'+r+"</div>"},e.prototype.getScaleForResolution=function(){var t=Object(r["m"])(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center),e=this.dpi_||p,i=this.viewState_.projection.getMetersPerUnit(),n=1e3/25.4;return parseFloat(t.toString())*i*n*e},e.prototype.render=function(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()},e}(n["default"]);e["a"]=f},b2da:function(t,e,i){(function(e,n){t.exports=n(i("3900"),i("35a7"),i("9c78"))})(0,(function(t,e,i){"use strict";t="default"in t?t["default"]:t,i="default"in i?i["default"]:i;var n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function t(e,i,n){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in s)return s.value;var r=s.get;return void 0!==r?r.call(n):void 0},r=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e},h="layer-switcher-",l=function(t){function l(t){n(this,l);var e=Object.assign({},t),i=e.tipLabel?e.tipLabel:"Legend",s=e.collapseTipLabel?e.collapseTipLabel:"Collapse legend",a=document.createElement("div"),r=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,{element:a,target:e.target}));r.activationMode=e.activationMode||"mouseover",r.startActive=!0===e.startActive;var c=void 0!==e.label?e.label:"",u=void 0!==e.collapseLabel?e.collapseLabel:"»";r.groupSelectStyle=l.getGroupSelectStyle(e.groupSelectStyle),r.reverse=!1!==e.reverse,r.mapListeners=[],r.hiddenClassName="ol-unselectable ol-control layer-switcher",l.isTouchDevice_()&&(r.hiddenClassName+=" touch"),r.shownClassName="shown",a.className=r.hiddenClassName;var p=document.createElement("button");return p.setAttribute("title",i),p.setAttribute("aria-label",i),a.appendChild(p),r.panel=document.createElement("div"),r.panel.className="panel",a.appendChild(r.panel),l.enableTouchScroll_(r.panel),p.textContent=c,a.classList.add(h+"group-select-style-"+r.groupSelectStyle),a.classList.add(h+"activation-mode-"+r.activationMode),"click"===r.activationMode?(a.classList.add("activationModeClick"),r.startActive&&(p.textContent=u,p.setAttribute("title",s),p.setAttribute("aria-label",s)),p.onclick=function(t){var e=t||window.event;r.element.classList.contains(r.shownClassName)?(r.hidePanel(),p.textContent=c,p.setAttribute("title",i),p.setAttribute("aria-label",i)):(r.showPanel(),p.textContent=u,p.setAttribute("title",s),p.setAttribute("aria-label",s)),e.preventDefault()}):(p.onmouseover=function(){r.showPanel()},p.onclick=function(t){var e=t||window.event;r.showPanel(),e.preventDefault()},r.panel.onmouseout=function(t){r.panel.contains(t.relatedTarget)||r.hidePanel()}),r}return r(l,t),s(l,[{key:"setMap",value:function(t){for(var i=this,n=0;n<this.mapListeners.length;n++)e.unByKey(this.mapListeners[n]);this.mapListeners.length=0,a(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"setMap",this).call(this,t),t&&(this.startActive?this.showPanel():this.renderPanel(),"click"!==this.activationMode&&this.mapListeners.push(t.on("pointerdown",(function(){i.hidePanel()}))))}},{key:"showPanel",value:function(){this.element.classList.contains(this.shownClassName)||(this.element.classList.add(this.shownClassName),this.renderPanel())}},{key:"hidePanel",value:function(){this.element.classList.contains(this.shownClassName)&&this.element.classList.remove(this.shownClassName)}},{key:"renderPanel",value:function(){this.dispatchEvent("render"),l.renderPanel(this.getMap(),this.panel,{groupSelectStyle:this.groupSelectStyle,reverse:this.reverse}),this.dispatchEvent("rendercomplete")}}],[{key:"renderPanel",value:function(t,e,i){var n=new Event("render");e.dispatchEvent(n),i=i||{},i.groupSelectStyle=l.getGroupSelectStyle(i.groupSelectStyle),l.ensureTopVisibleBaseLayerShown(t,i.groupSelectStyle);while(e.firstChild)e.removeChild(e.firstChild);l.forEachRecursive(t,(function(t,e,i){t.set("indeterminate",!1)})),"children"===i.groupSelectStyle||"none"===i.groupSelectStyle?l.setGroupVisibility(t):"group"===i.groupSelectStyle&&l.setChildVisibility(t);var s=document.createElement("ul");e.appendChild(s),l.renderLayers_(t,t,s,i,(function(n){l.renderPanel(t,e,i)}));var a=new Event("rendercomplete");e.dispatchEvent(a)}},{key:"isBaseGroup",value:function(t){if(t instanceof i){var e=t.getLayers().getArray();return e.length&&"base"===e[0].get("type")}return!1}},{key:"setGroupVisibility",value:function(t){var e=l.getGroupsAndLayers(t,(function(t){return t instanceof i&&!t.get("combine")&&!l.isBaseGroup(t)})).reverse();e.forEach((function(t){var e=t.getLayersArray().map((function(t){var e=t.getVisible();return e}));e.every((function(t){return!0===t}))?(t.setVisible(!0),t.set("indeterminate",!1)):e.every((function(t){return!1===t}))?(t.setVisible(!1),t.set("indeterminate",!1)):(t.setVisible(!0),t.set("indeterminate",!0))}))}},{key:"setChildVisibility",value:function(t){var e=l.getGroupsAndLayers(t,(function(t){return t instanceof i&&!t.get("combine")&&!l.isBaseGroup(t)}));e.forEach((function(t){var e=t,i=e.getVisible(),n=e.get("indeterminate");e.getLayers().getArray().forEach((function(t){t.set("indeterminate",!1),i&&!n||!t.getVisible()||t.set("indeterminate",!0)}))}))}},{key:"ensureTopVisibleBaseLayerShown",value:function(t,e){var i=void 0;l.forEachRecursive(t,(function(t,e,n){"base"===t.get("type")&&t.getVisible()&&(i=t)})),i&&l.setVisible_(t,i,!0,e)}},{key:"getGroupsAndLayers",value:function(t,e){var i=[];return e=e||function(t,e,i){return!0},l.forEachRecursive(t,(function(t,n,s){t.get("title")&&e(t,n,s)&&i.push(t)})),i}},{key:"setVisible_",value:function(t,e,n,s){e.setVisible(n),n&&"base"===e.get("type")&&l.forEachRecursive(t,(function(t,i,n){t!=e&&"base"===t.get("type")&&t.setVisible(!1)})),e instanceof i&&!e.get("combine")&&"children"===s&&e.getLayers().forEach((function(i){l.setVisible_(t,i,e.getVisible(),s)}))}},{key:"renderLayer_",value:function(t,e,n,s,a){var r=document.createElement("li"),o=e.get("title"),c=l.uuid(),u=document.createElement("label");if(e instanceof i&&!e.get("combine")){var p=l.isBaseGroup(e);if(r.classList.add("group"),p&&r.classList.add(h+"base-group"),e.get("fold")){r.classList.add(h+"fold"),r.classList.add(h+e.get("fold"));var f=document.createElement("button");f.onclick=function(t){var i=t||window.event;l.toggleFold_(e,r),i.preventDefault()},r.appendChild(f)}if(!p&&"none"!=s.groupSelectStyle){var d=document.createElement("input");d.type="checkbox",d.id=c,d.checked=e.getVisible(),d.indeterminate=e.get("indeterminate"),d.onchange=function(i){var n=i.target;l.setVisible_(t,e,n.checked,s.groupSelectStyle),a(e)},r.appendChild(d),u.htmlFor=c}u.innerHTML=o,r.appendChild(u);var _=document.createElement("ul");r.appendChild(_),l.renderLayers_(t,e,_,s,a)}else{r.className="layer";var g=document.createElement("input");"base"===e.get("type")?(g.type="radio",g.name="base"):g.type="checkbox",g.id=c,g.checked=e.get("visible"),g.indeterminate=e.get("indeterminate"),g.onchange=function(i){var n=i.target;l.setVisible_(t,e,n.checked,s.groupSelectStyle),a(e)},r.appendChild(g),u.htmlFor=c,u.innerHTML=o;var m=t.getView().getResolution();(m>e.getMaxResolution()||m<e.getMinResolution())&&(u.className+=" disabled"),r.appendChild(u)}return r}},{key:"renderLayers_",value:function(t,e,i,n,s){var a=e.getLayers().getArray().slice();n.reverse&&(a=a.reverse());for(var r,o=0;o<a.length;o++)r=a[o],r.get("title")&&i.appendChild(l.renderLayer_(t,r,o,n,s))}},{key:"forEachRecursive",value:function(t,e){t.getLayers().forEach((function(t,n,s){e(t,n,s),t instanceof i&&l.forEachRecursive(t,e)}))}},{key:"uuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,i="x"==t?e:3&e|8;return i.toString(16)}))}},{key:"enableTouchScroll_",value:function(t){if(l.isTouchDevice_()){var e=0;t.addEventListener("touchstart",(function(t){e=this.scrollTop+t.touches[0].pageY}),!1),t.addEventListener("touchmove",(function(t){this.scrollTop=e-t.touches[0].pageY}),!1)}}},{key:"isTouchDevice_",value:function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}},{key:"toggleFold_",value:function(t,e){e.classList.remove(h+t.get("fold")),t.set("fold","open"===t.get("fold")?"close":"open"),e.classList.add(h+t.get("fold"))}},{key:"getGroupSelectStyle",value:function(t){return["none","children","group"].indexOf(t)>=0?t:"children"}}]),l}(t);return window["ol"]&&window["ol"]["control"]&&(window["ol"]["control"]["LayerSwitcher"]=l),l}))},e50d:function(t,e,i){"use strict";var n=i("1856"),s=i("3900"),a=i("01d4"),r=i("592d"),o=i("e637"),h=i("7b4f"),l=i("e269"),c={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},u=i("cd7e"),p=i("0af5"),f=i("1e8d"),d=i("0999"),_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),g={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},m=function(t){function e(e){var i=t.call(this)||this;i.on,i.once,i.un,i.options=e,i.id=e.id,i.insertFirst=void 0===e.insertFirst||e.insertFirst,i.stopEvent=void 0===e.stopEvent||e.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==e.className?e.className:"ol-overlay-container "+u["d"],i.element.style.position="absolute",i.element.style.pointerEvents="auto";var n=e.autoPan;return n&&"object"!==typeof n&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),i.autoPan=n||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(g.ELEMENT,i.handleElementChanged),i.addChangeListener(g.MAP,i.handleMapChanged),i.addChangeListener(g.OFFSET,i.handleOffsetChanged),i.addChangeListener(g.POSITION,i.handlePositionChanged),i.addChangeListener(g.POSITIONING,i.handlePositioningChanged),void 0!==e.element&&i.setElement(e.element),i.setOffset(void 0!==e.offset?e.offset:[0,0]),i.setPositioning(void 0!==e.positioning?e.positioning:c.TOP_LEFT),void 0!==e.position&&i.setPosition(e.position),i}return _(e,t),e.prototype.getElement=function(){return this.get(g.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(g.MAP)},e.prototype.getOffset=function(){return this.get(g.OFFSET)},e.prototype.getPosition=function(){return this.get(g.POSITION)},e.prototype.getPositioning=function(){return this.get(g.POSITIONING)},e.prototype.handleElementChanged=function(){Object(d["d"])(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(d["e"])(this.element),Object(f["c"])(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(f["a"])(t,r["a"].POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(g.ELEMENT,t)},e.prototype.setMap=function(t){this.set(g.MAP,t)},e.prototype.setOffset=function(t){this.set(g.OFFSET,t)},e.prototype.setPosition=function(t){this.set(g.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(g.POSITION)){var i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),s=this.getRect(n,[Object(d["c"])(n),Object(d["b"])(n)]),a=t||{},r=void 0===a.margin?20:a.margin;if(!Object(p["h"])(i,s)){var o=s[0]-i[0],h=i[2]-s[2],l=s[1]-i[1],c=i[3]-s[3],u=[0,0];if(o<0?u[0]=o-r:h<0&&(u[0]=Math.abs(h)+r),l<0?u[1]=l-r:c<0&&(u[1]=Math.abs(c)+r),0!==u[0]||0!==u[1]){var f=e.getView().getCenterInternal(),_=e.getPixelFromCoordinateInternal(f);if(!_)return;var m=[_[0]+u[0],_[1]+u[1]],y=a.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(m),duration:y.duration,easing:y.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[n,s,n+e[0],s+e[1]]},e.prototype.setPositioning=function(t){this.set(g.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),s=this.getPositioning();this.setVisible(!0);var a=Math.round(t[0]+n[0])+"px",r=Math.round(t[1]+n[1])+"px",o="0%",h="0%";s==c.BOTTOM_RIGHT||s==c.CENTER_RIGHT||s==c.TOP_RIGHT?o="-100%":s!=c.BOTTOM_CENTER&&s!=c.CENTER_CENTER&&s!=c.TOP_CENTER||(o="-50%"),s==c.BOTTOM_LEFT||s==c.BOTTOM_CENTER||s==c.BOTTOM_RIGHT?h="-100%":s!=c.CENTER_LEFT&&s!=c.CENTER_CENTER&&s!=c.CENTER_RIGHT||(h="-50%");var l="translate("+o+", "+h+") translate("+a+", "+r+")";this.rendered.transform_!=l&&(this.rendered.transform_=l,i.transform=l,i.msTransform=l)},e.prototype.getOptions=function(){return this.options},e}(l["a"]),y=m,v=i("fe37"),x=i("a2c7"),M=i("4384"),b=i("5bc3"),S=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),O=.75,w=.1,E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S(e,t),e.prototype.createRenderer=function(){return new n["a"](this)},e}(v["a"]),C=function(t){function e(e){var i=this,n=e||{};i=t.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this,i.boundHandleRotationChanged_=i.handleRotationChanged_.bind(i),i.collapsed_=void 0===n.collapsed||n.collapsed,i.collapsible_=void 0===n.collapsible||n.collapsible,i.collapsible_||(i.collapsed_=!1),i.rotateWithView_=void 0!==n.rotateWithView&&n.rotateWithView,i.viewExtent_=void 0;var s=void 0!==n.className?n.className:"ol-overviewmap",r=void 0!==n.tipLabel?n.tipLabel:"Overview map",o=void 0!==n.collapseLabel?n.collapseLabel:"‹";"string"===typeof o?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=o):i.collapseLabel_=o;var h=void 0!==n.label?n.label:"›";"string"===typeof h?(i.label_=document.createElement("span"),i.label_.textContent=h):i.label_=h;var l=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_,p=document.createElement("button");p.setAttribute("type","button"),p.title=r,p.appendChild(l),p.addEventListener(a["a"].CLICK,i.handleClick_.bind(i),!1),i.ovmapDiv_=document.createElement("div"),i.ovmapDiv_.className="ol-overviewmap-map",i.view_=n.view,i.ovmap_=new E({view:n.view});var f=i.ovmap_;n.layers&&n.layers.forEach((function(t){f.addLayer(t)}));var d=document.createElement("div");d.className="ol-overviewmap-box",d.style.boxSizing="border-box",i.boxOverlay_=new y({position:[0,0],positioning:c.CENTER_CENTER,element:d}),i.ovmap_.addOverlay(i.boxOverlay_);var _=s+" "+u["e"]+" "+u["b"]+(i.collapsed_&&i.collapsible_?" "+u["a"]:"")+(i.collapsible_?"":" ol-uncollapsible"),g=i.element;g.className=_,g.appendChild(i.ovmapDiv_),g.appendChild(p);var m=i,v=i.boxOverlay_,x=i.boxOverlay_.getElement(),M=function(t){return{clientX:t.clientX,clientY:t.clientY}},b=function(t){var e=M(t),i=f.getEventCoordinateInternal(e);v.setPosition(i)},S=function(t){var e=f.getEventCoordinateInternal(t);m.getMap().getView().setCenterInternal(e),window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",S)};return x.addEventListener("mousedown",(function(){window.addEventListener("mousemove",b),window.addEventListener("mouseup",S)})),i}return S(e,t),e.prototype.setMap=function(e){var i=this.getMap();if(e!==i){if(i){var n=i.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Object(f["a"])(e,h["a"].PROPERTYCHANGE,this.handleMapPropertyChange_,this));var s=e.getView();s&&(this.bindView_(s),s.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===o["a"].VIEW){var e=t.oldValue;e&&this.unbindView_(e);var i=this.getMap().getView();this.bindView_(i)}else this.ovmap_.isRendered()||t.key!==o["a"].TARGET&&t.key!==o["a"].SIZE||this.ovmap_.updateSize()},e.prototype.bindView_=function(t){if(!this.view_){var e=new x["a"]({projection:t.getProjection()});this.ovmap_.setView(e)}t.addChangeListener(M["a"].ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()},e.prototype.unbindView_=function(t){t.removeChangeListener(M["a"].ROTATION,this.boundHandleRotationChanged_)},e.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),n=t.getView(),s=n.calculateExtentInternal(i);if(!this.viewExtent_||!Object(p["p"])(s,this.viewExtent_)){this.viewExtent_=s;var a=e.getSize(),r=e.getView(),o=r.calculateExtentInternal(a),h=e.getPixelFromCoordinateInternal(Object(p["C"])(s)),l=e.getPixelFromCoordinateInternal(Object(p["w"])(s)),c=Math.abs(h[0]-l[0]),u=Math.abs(h[1]-l[1]),f=a[0],d=a[1];c<f*w||u<d*w||c>f*O||u>d*O?this.resetExtent_():Object(p["h"])(o,s)||this.recenter_()}}},e.prototype.resetExtent_=function(){if(0!==O&&0!==w){var t=this.getMap(),e=this.ovmap_,i=t.getSize(),n=t.getView(),s=n.calculateExtentInternal(i),a=e.getView(),r=Math.log(O/w)/Math.LN2,o=1/(Math.pow(2,r/2)*w);Object(p["J"])(s,o),a.fitInternal(Object(b["b"])(s))}},e.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,i=t.getView(),n=e.getView();n.setCenterInternal(i.getCenterInternal())},e.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),n=t.getView(),s=e.getView(),a=this.rotateWithView_?0:-n.getRotation(),r=this.boxOverlay_,o=this.boxOverlay_.getElement(),h=n.getCenterInternal(),l=n.getResolution(),c=s.getResolution(),u=i[0]*l/c,p=i[1]*l/c;if(r.setPosition(h),o){o.style.width=u+"px",o.style.height=p+"px";var f="rotate("+a+"rad)";o.style.transform=f}}},e.prototype.updateBoxAfterOvmapIsRendered_=function(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=Object(f["b"])(this.ovmap_,r["a"].POSTRENDER,(function(t){delete this.ovmapPostrenderKey_,this.updateBox_()}),this))},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(u["a"]),this.collapsed_?Object(d["g"])(this.collapseLabel_,this.label_):Object(d["g"])(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.setRotateWithView=function(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},e.prototype.getOverviewMap=function(){return this.ovmap_},e.prototype.render=function(t){this.validateExtent_(),this.updateBox_()},e}(s["default"]);e["a"]=C},ecb7:function(t,e,i){"use strict";i("9661")},f820:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"about"},[i("MapPane")],1)},s=[],a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mapPane"},[i("div",{attrs:{id:"map"}})])}],o=(i("d81d"),i("b0c0"),i("777e"),i("5bc0"),i("e300")),h=i("070d"),l=i("e269"),c=i("01d4"),u=i("92fa"),p=i("1e8d"),f=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(t){function e(e){var i=t.call(this)||this;if(i.on,i.once,i.un,i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addChangeListener(i.geometryName_,i.handleGeometryChanged_),e)if("function"===typeof e.getSimplifiedGeometry){var n=e;i.setGeometry(n)}else{var s=e;i.setProperties(s)}return i}return f(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(p["c"])(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(p["a"])(t,c["a"].CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?_(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(l["a"]);function _(t){if("function"===typeof t)return t;var e;if(Array.isArray(t))e=t;else{Object(u["a"])("function"===typeof t.getZIndex,41);var i=t;e=[i]}return function(){return e}}var g=d,m=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),y=m,v=i("521b"),x=i("f623"),M=i("9abc"),b=i("9769"),S=i("0af5"),O=i("abb7"),w=i("1c48"),E=i("9f5e"),C=i("fd4d"),L=i("bb6c"),T=i("7fc9");function I(t,e,i,n,s,a,r){var o,h,l=(i-e)/n;if(1===l)o=e;else if(2===l)o=e,h=s;else if(0!==l){for(var c=t[e],u=t[e+1],p=0,f=[0],d=e+n;d<i;d+=n){var _=t[d],g=t[d+1];p+=Math.sqrt((_-c)*(_-c)+(g-u)*(g-u)),f.push(p),c=_,u=g}var m=s*p,y=Object(E["a"])(f,m);y<0?(h=(m-f[-y-2])/(f[-y-1]-f[-y-2]),o=e+(-y-2)*n):o=e+y*n}var v=r>1?r:2,x=a||new Array(v);for(d=0;d<v;++d)x[d]=void 0===o?NaN:void 0===h?t[o+d]:Object(T["c"])(t[o+d],t[o+n+d],h);return x}function R(t,e,i,n,s,a){if(i==e)return null;var r;if(s<t[e+n-1])return a?(r=t.slice(e,e+n),r[n-1]=s,r):null;if(t[i-1]<s)return a?(r=t.slice(i-n,i),r[n-1]=s,r):null;if(s==t[e+n-1])return t.slice(e,e+n);var o=e/n,h=i/n;while(o<h){var l=o+h>>1;s<t[(l+1)*n-1]?h=l:o=l+1}var c=t[o*n-1];if(s==c)return t.slice((o-1)*n,(o-1)*n+n);var u=t[(o+1)*n-1],p=(s-c)/(u-c);r=[];for(var f=0;f<n-1;++f)r.push(Object(T["c"])(t[(o-1)*n+f],t[o*n+f],p));return r.push(s),r}var P=i("c560");function k(t,e,i,n){for(var s=t[e],a=t[e+1],r=0,o=e+n;o<i;o+=n){var h=t[o],l=t[o+1];r+=Math.sqrt((h-s)*(h-s)+(l-a)*(l-a)),s=h,a=l}return r}var j=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),A=function(t){function e(e,i){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return j(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(E["c"])(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(S["f"])(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(b["d"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(b["c"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.forEachSegment=function(t){return Object(C["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=v["a"].XYM&&this.layout!=v["a"].XYZM)return null;var i=void 0!==e&&e;return R(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Object(L["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return I(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return k(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Object(w["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,v["a"].XY)},e.prototype.getType=function(){return x["a"].LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(P["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(O["b"])(this.flatCoordinates,0,t,this.stride),this.changed()},e}(M["a"]),N=A,F=i("f403"),D=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}(),G=D,B=i("869f"),W=i("1300"),q=i("345d"),z=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Object(q["c"])(t.scale),this.displacement_=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return Object(W["b"])()},t.prototype.getImage=function(t){return Object(W["b"])()},t.prototype.getHitDetectionImage=function(){return Object(W["b"])()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return Object(W["b"])()},t.prototype.getImageSize=function(){return Object(W["b"])()},t.prototype.getOrigin=function(){return Object(W["b"])()},t.prototype.getSize=function(){return Object(W["b"])()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=Object(q["c"])(t)},t.prototype.listenImageChange=function(t){Object(W["b"])()},t.prototype.load=function(){Object(W["b"])()},t.prototype.unlistenImageChange=function(t){Object(W["b"])()},t}(),X=z,Y=i("5c38");function V(t){return Array.isArray(t)?Object(Y["c"])(t):t}var U=i("0999"),H=i("ddea"),J=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),K=function(t){function e(e){var i=this,n=void 0!==e.rotateWithView&&e.rotateWithView;return i=t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this,i.canvas_=void 0,i.hitDetectionCanvas_=null,i.fill_=void 0!==e.fill?e.fill:null,i.origin_=[0,0],i.points_=e.points,i.radius_=void 0!==e.radius?e.radius:e.radius1,i.radius2_=e.radius2,i.angle_=void 0!==e.angle?e.angle:0,i.stroke_=void 0!==e.stroke?e.stroke:null,i.anchor_=null,i.size_=null,i.renderOptions_=null,i.render(),i}return J(e,t),e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(t){var e=this.canvas_[t];if(!e){var i=this.renderOptions_,n=Object(U["a"])(i.size*t,i.size*t);this.draw_(i,n,t),e=n.canvas,this.canvas_[t]=e}return e},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return B["a"].LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.calculateLineJoinSize_=function(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var n=this.radius_,s=void 0===this.radius2_?n:this.radius2_;if(n<s){var a=n;n=s,s=a}var r=void 0===this.radius2_?this.points_:2*this.points_,o=2*Math.PI/r,h=s*Math.sin(o),l=Math.sqrt(s*s-h*h),c=n-l,u=Math.sqrt(h*h+c*c),p=u/h;if("miter"===t&&p<=i)return p*e;var f=e/2/p,d=e/2*(c/u),_=Math.sqrt((n+f)*(n+f)+d*d),g=_-n;if(void 0===this.radius2_||"bevel"===t)return 2*g;var m=n*Math.sin(o),y=Math.sqrt(n*n-m*m),v=s-y,x=Math.sqrt(m*m+v*v),M=x/m;if(M<=i){var b=M*e/2-s-n;return 2*Math.max(g,b)}return 2*g},e.prototype.createRenderOptions=function(){var t,e=H["g"],i=0,n=null,s=0,a=0;this.stroke_&&(t=this.stroke_.getColor(),null===t&&(t=H["k"]),t=V(t),a=this.stroke_.getWidth(),void 0===a&&(a=H["h"]),n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=H["g"]),i=this.stroke_.getMiterLimit(),void 0===i&&(i=H["i"]));var r=this.calculateLineJoinSize_(e,a,i),o=Math.max(this.radius_,this.radius2_||0),h=Math.ceil(2*o+r);return{strokeStyle:t,strokeWidth:a,size:h,lineDash:n,lineDashOffset:s,lineJoin:e,miterLimit:i}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size,e=this.getDisplacement();this.canvas_={},this.anchor_=[t/2-e[0],t/2+e[1]],this.size_=[t,t]},e.prototype.draw_=function(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var n=this.fill_.getColor();null===n&&(n=H["b"]),e.fillStyle=V(n),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var e=this.fill_.getColor(),i=0;if("string"===typeof e&&(e=Object(Y["a"])(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){var n=Object(U["a"])(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(t){var e=this.points_,i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{var n=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var s=this.angle_-Math.PI/2,a=2*Math.PI/e,r=0;r<e;r++){var o=s+r*a,h=r%2===0?i:n;t.lineTo(h*Math.cos(o),h*Math.sin(o))}t.closePath()}},e.prototype.drawHitDetectionCanvas_=function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=H["b"],e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e}(X),Z=K,Q=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$=function(t){function e(e){var i=this,n=e||{};return i=t.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:void 0!==n.scale?n.scale:1,rotation:void 0!==n.rotation?n.rotation:0,rotateWithView:void 0!==n.rotateWithView&&n.rotateWithView,displacement:void 0!==n.displacement?n.displacement:[0,0]})||this,i}return Q(e,t),e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(Z),tt=$,et=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=at,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"===typeof e&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.setHitDetectionRenderer=function(t){this.hitDetectionRenderer_=t},t.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"===typeof t?this.geometryFunction_=t:"string"===typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=at,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();function it(t){var e;if("function"===typeof t)e=t;else{var i;if(Array.isArray(t))i=t;else{Object(u["a"])("function"===typeof t.getZIndex,41);var n=t;i=[n]}e=function(){return i}}return e}var nt=null;function st(t,e){if(!nt){var i=new y({color:"rgba(255,255,255,0.4)"}),n=new G({color:"#3399CC",width:1.25});nt=[new et({image:new tt({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return nt}function at(t){return t.getGeometry()}var rt=et,ot={POINT:"point",LINE:"line"},ht="#333",lt=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Object(q["c"])(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new y({color:ht}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:ot.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=Object(q["c"])(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}(),ct=lt,ut=i("1af9"),pt=i("25a5"),ft=i.n(pt),dt=i("38f3"),_t=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gt={RENDER_ORDER:"renderOrder"},mt=function(t){function e(e){var i=this,n=e||{},s=Object(dt["a"])({},n);return delete s.style,delete s.renderBuffer,delete s.updateWhileAnimating,delete s.updateWhileInteracting,i=t.call(this,s)||this,i.declutter_=void 0!==n.declutter&&n.declutter,i.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(n.style),i.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,i.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,i}return _t(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(gt.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new ft.a(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(gt.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:st,this.styleFunction_=null===t?void 0:it(this.style_),this.changed()},e}(ut["a"]),yt=mt,vt={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},xt=[vt.FILL],Mt=[vt.STROKE],bt=[vt.BEGIN_PATH],St=[vt.CLOSE_PATH],Ot=vt,wt=i("045d"),Et=function(){function t(){}return t.prototype.drawCustom=function(t,e,i,n){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),Ct=Et,Lt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tt=function(t){function e(e,i,n,s){var a=t.call(this)||this;return a.tolerance=e,a.maxExtent=i,a.pixelRatio=s,a.maxLineWidth=0,a.resolution=n,a.beginGeometryInstruction1_=null,a.beginGeometryInstruction2_=null,a.bufferedMaxExtent_=null,a.instructions=[],a.coordinates=[],a.tmpCoordinate_=[],a.hitDetectionInstructions=[],a.state={},a}return Lt(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatPointCoordinates=function(t,e){for(var i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,s=this.coordinates,a=s.length,r=0,o=t.length;r<o;r+=e)n[0]=t[r],n[1]=t[r+1],Object(S["g"])(i,n)&&(s[a++]=n[0],s[a++]=n[1]);return a},e.prototype.appendFlatLineCoordinates=function(t,e,i,n,s,a){var r=this.coordinates,o=r.length,h=this.getBufferedMaxExtent();a&&(e+=n);var l,c,u,p=t[e],f=t[e+1],d=this.tmpCoordinate_,_=!0;for(l=e+n;l<i;l+=n)d[0]=t[l],d[1]=t[l+1],u=Object(S["j"])(h,d),u!==c?(_&&(r[o++]=p,r[o++]=f,_=!1),r[o++]=d[0],r[o++]=d[1]):u===wt["a"].INTERSECTING?(r[o++]=d[0],r[o++]=d[1],_=!1):_=!0,p=d[0],f=d[1],c=u;return(s&&_||l===e+n)&&(r[o++]=p,r[o++]=f),o},e.prototype.drawCustomCoordinates_=function(t,e,i,n,s){for(var a=0,r=i.length;a<r;++a){var o=i[a],h=this.appendFlatLineCoordinates(t,e,o,n,!1,!1);s.push(h),e=o}return e},e.prototype.drawCustom=function(t,e,i,n){this.beginGeometry(t,e);var s,a,r,o,h,l=t.getType(),c=t.getStride(),u=this.coordinates.length;switch(l){case x["a"].MULTI_POLYGON:s=t.getOrientedFlatCoordinates(),o=[];var p=t.getEndss();h=0;for(var f=0,d=p.length;f<d;++f){var _=[];h=this.drawCustomCoordinates_(s,h,p[f],c,_),o.push(_)}this.instructions.push([Ot.CUSTOM,u,o,t,i,L["c"]]),this.hitDetectionInstructions.push([Ot.CUSTOM,u,o,t,n||i,L["c"]]);break;case x["a"].POLYGON:case x["a"].MULTI_LINE_STRING:r=[],s=l==x["a"].POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(s,0,t.getEnds(),c,r),this.instructions.push([Ot.CUSTOM,u,r,t,i,L["b"]]),this.hitDetectionInstructions.push([Ot.CUSTOM,u,r,t,n||i,L["b"]]);break;case x["a"].LINE_STRING:case x["a"].CIRCLE:s=t.getFlatCoordinates(),a=this.appendFlatLineCoordinates(s,0,s.length,c,!1,!1),this.instructions.push([Ot.CUSTOM,u,a,t,i,L["a"]]),this.hitDetectionInstructions.push([Ot.CUSTOM,u,a,t,n||i,L["a"]]);break;case x["a"].MULTI_POINT:s=t.getFlatCoordinates(),a=this.appendFlatPointCoordinates(s,c),a>u&&(this.instructions.push([Ot.CUSTOM,u,a,t,i,L["a"]]),this.hitDetectionInstructions.push([Ot.CUSTOM,u,a,t,n||i,L["a"]]));break;case x["a"].POINT:s=t.getFlatCoordinates(),this.coordinates.push(s[0],s[1]),a=this.coordinates.length,this.instructions.push([Ot.CUSTOM,u,a,t,i]),this.hitDetectionInstructions.push([Ot.CUSTOM,u,a,t,n||i]);break;default:}this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[Ot.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Ot.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,n,s=e.length,a=-1;for(t=0;t<s;++t)i=e[t],n=i[0],n==Ot.END_GEOMETRY?a=t:n==Ot.BEGIN_GEOMETRY&&(i[2]=t,Object(E["j"])(this.hitDetectionInstructions,a,t),a=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=V(n||H["b"])}else i.fillStyle=void 0;if(e){var s=e.getColor();i.strokeStyle=V(s||H["k"]);var a=e.getLineCap();i.lineCap=void 0!==a?a:H["d"];var r=e.getLineDash();i.lineDash=r?r.slice():H["e"];var o=e.getLineDashOffset();i.lineDashOffset=o||H["f"];var h=e.getLineJoin();i.lineJoin=void 0!==h?h:H["g"];var l=e.getWidth();i.lineWidth=void 0!==l?l:H["h"];var c=e.getMiterLimit();i.miterLimit=void 0!==c?c:H["i"],i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[Ot.SET_FILL_STYLE,e];return"string"!==typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[Ot.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"===typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,s=t.lineDash,a=t.lineDashOffset,r=t.lineJoin,o=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||s!=t.currentLineDash&&!Object(E["b"])(t.currentLineDash,s)||t.currentLineDashOffset!=a||t.currentLineJoin!=r||t.currentLineWidth!=o||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=s,t.currentLineDashOffset=a,t.currentLineJoin=r,t.currentLineWidth=o,t.currentMiterLimit=h)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[Ot.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(S["e"])(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Object(S["d"])(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(Ct),It=Tt,Rt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pt=function(t){function e(e,i,n,s){var a=t.call(this,e,i,n,s)||this;return a.hitDetectionImage_=null,a.image_=null,a.imagePixelRatio_=void 0,a.anchorX_=void 0,a.anchorY_=void 0,a.height_=void 0,a.opacity_=void 0,a.originX_=void 0,a.originY_=void 0,a.rotateWithView_=void 0,a.rotation_=void 0,a.scale_=void 0,a.width_=void 0,a.declutterImageWithText_=void 0,a}return Rt(e,t),e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(i,n);this.instructions.push([Ot.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ot.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(i,n);this.instructions.push([Ot.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ot.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),s=t.getHitDetectionImage(),a=t.getImage(this.pixelRatio),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=s,this.image_=a,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=r[0]*this.imagePixelRatio_,this.originY_=r[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterImageWithText_=e},e}(It),kt=Pt,jt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),At=function(t){function e(e,i,n,s){return t.call(this,e,i,n,s)||this}return jt(e,t),e.prototype.drawFlatCoordinates_=function(t,e,i,n){var s=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),r=[Ot.MOVE_TO_LINE_TO,s,a];return this.instructions.push(r),this.hitDetectionInstructions.push(r),i},e.prototype.drawLineString=function(t,e){var i=this.state,n=i.strokeStyle,s=i.lineWidth;if(void 0!==n&&void 0!==s){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,H["e"],H["f"]],bt);var a=t.getFlatCoordinates(),r=t.getStride();this.drawFlatCoordinates_(a,0,a.length,r),this.hitDetectionInstructions.push(Mt),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,n=i.strokeStyle,s=i.lineWidth;if(void 0!==n&&void 0!==s){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],bt);for(var a=t.getEnds(),r=t.getFlatCoordinates(),o=t.getStride(),h=0,l=0,c=a.length;l<c;++l)h=this.drawFlatCoordinates_(r,h,a[l],o);this.hitDetectionInstructions.push(Mt),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Mt),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Mt),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(bt)},e}(It),Nt=At,Ft=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dt=function(t){function e(e,i,n,s){return t.call(this,e,i,n,s)||this}return Ft(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,i,n){var s=this.state,a=void 0!==s.fillStyle,r=void 0!==s.strokeStyle,o=i.length;this.instructions.push(bt),this.hitDetectionInstructions.push(bt);for(var h=0;h<o;++h){var l=i[h],c=this.coordinates.length,u=this.appendFlatLineCoordinates(t,e,l,n,!0,!r),p=[Ot.MOVE_TO_LINE_TO,c,u];this.instructions.push(p),this.hitDetectionInstructions.push(p),r&&(this.instructions.push(St),this.hitDetectionInstructions.push(St)),e=l}return a&&(this.instructions.push(xt),this.hitDetectionInstructions.push(xt)),r&&(this.instructions.push(Mt),this.hitDetectionInstructions.push(Mt)),e},e.prototype.drawCircle=function(t,e){var i=this.state,n=i.fillStyle,s=i.strokeStyle;if(void 0!==n||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Ot.SET_FILL_STYLE,H["b"]]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var a=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,r,!1,!1);var h=[Ot.CIRCLE,o];this.instructions.push(bt,h),this.hitDetectionInstructions.push(bt,h),void 0!==i.fillStyle&&(this.instructions.push(xt),this.hitDetectionInstructions.push(xt)),void 0!==i.strokeStyle&&(this.instructions.push(Mt),this.hitDetectionInstructions.push(Mt)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,n=i.fillStyle,s=i.strokeStyle;if(void 0!==n||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Ot.SET_FILL_STYLE,H["b"]]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var a=t.getEnds(),r=t.getOrientedFlatCoordinates(),o=t.getStride();this.drawFlatCoordinatess_(r,0,a,o),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,n=i.fillStyle,s=i.strokeStyle;if(void 0!==n||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Ot.SET_FILL_STYLE,H["b"]]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var a=t.getEndss(),r=t.getOrientedFlatCoordinates(),o=t.getStride(),h=0,l=0,c=a.length;l<c;++l)h=this.drawFlatCoordinatess_(r,h,a[l],o);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,n=0,s=i.length;n<s;++n)i[n]=Object(w["c"])(i[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state,e=t.fillStyle;void 0!==e&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(It),Gt=Dt;function Bt(t,e,i,n,s){var a,r,o,h,l,c,u,p,f,d,_=i,g=i,m=0,y=0,v=i;for(r=i;r<n;r+=s){var x=e[r],M=e[r+1];void 0!==l&&(f=x-l,d=M-c,h=Math.sqrt(f*f+d*d),void 0!==u&&(y+=o,a=Math.acos((u*f+p*d)/(o*h)),a>t&&(y>m&&(m=y,_=v,g=r),y=0,v=r-s)),o=h,u=f,p=d),l=x,c=M}return y+=h,y>m?[v,r]:[_,g]}var Wt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qt={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},zt=function(t){function e(e,i,n,s){var a=t.call(this,e,i,n,s)||this;return a.labels_=null,a.text_="",a.textOffsetX_=0,a.textOffsetY_=0,a.textRotateWithView_=void 0,a.textRotation_=0,a.textFillState_=null,a.fillStates={},a.textStrokeState_=null,a.strokeStates={},a.textState_={},a.textStates={},a.textKey_="",a.fillKey_="",a.strokeKey_="",a.declutterImageWithText_=void 0,a}return Wt(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,n=this.textStrokeState_,s=this.textState_;if(""!==this.text_&&s&&(i||n)){var a=this.coordinates,r=a.length,o=t.getType(),h=null,l=t.getStride();if(s.placement!==ot.LINE||o!=x["a"].LINE_STRING&&o!=x["a"].MULTI_LINE_STRING&&o!=x["a"].POLYGON&&o!=x["a"].MULTI_POLYGON){var c=s.overflow?null:[];switch(o){case x["a"].POINT:case x["a"].MULTI_POINT:h=t.getFlatCoordinates();break;case x["a"].LINE_STRING:h=t.getFlatMidpoint();break;case x["a"].CIRCLE:h=t.getCenter();break;case x["a"].MULTI_LINE_STRING:h=t.getFlatMidpoints(),l=2;break;case x["a"].POLYGON:h=t.getFlatInteriorPoint(),s.overflow||c.push(h[2]/this.resolution),l=3;break;case x["a"].MULTI_POLYGON:var u=t.getFlatInteriorPoints();h=[];for(O=0,w=u.length;O<w;O+=3)s.overflow||c.push(u[O+2]/this.resolution),h.push(u[O],u[O+1]);if(0===h.length)return;l=2;break;default:}P=this.appendFlatPointCoordinates(h,l);if(P===r)return;if(c&&(P-r)/2!==h.length/l){var p=r/2;c=c.filter((function(t,e){var i=a[2*(p+e)]===h[e*l]&&a[2*(p+e)+1]===h[e*l+1];return i||--p,i}))}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var f=s.padding;if(f!=H["j"]&&(s.scale[0]<0||s.scale[1]<0)){var d=s.padding[0],_=s.padding[1],g=s.padding[2],m=s.padding[3];s.scale[0]<0&&(_=-_,m=-m),s.scale[1]<0&&(d=-d,g=-g),f=[d,_,g,m]}var y=this.pixelRatio;this.instructions.push([Ot.DRAW_IMAGE,r,P,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,f==H["j"]?H["j"]:f.map((function(t){return t*y})),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]);var v=1/y;this.hitDetectionInstructions.push([Ot.DRAW_IMAGE,r,P,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[v,v],NaN,this.declutterImageWithText_,f,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]),this.endGeometry(e)}else{if(!Object(S["F"])(this.getBufferedMaxExtent(),t.getExtent()))return;var M=void 0;if(h=t.getFlatCoordinates(),o==x["a"].LINE_STRING)M=[h.length];else if(o==x["a"].MULTI_LINE_STRING)M=t.getEnds();else if(o==x["a"].POLYGON)M=t.getEnds().slice(0,1);else if(o==x["a"].MULTI_POLYGON){var b=t.getEndss();M=[];for(var O=0,w=b.length;O<w;++O)M.push(b[O][0])}this.beginGeometry(t,e);for(var E=s.textAlign,C=0,L=void 0,T=0,I=M.length;T<I;++T){if(void 0==E){var R=Bt(s.maxAngle,h,C,M[T],l);C=R[0],L=R[1]}else L=M[T];for(var O=C;O<L;O+=l)a.push(h[O],h[O+1]);var P=a.length;C=M[T],this.drawChars_(r,P),r=P}this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||H["l"],textBaseline:e.textBaseline||H["m"],scale:e.scale});var a=this.fillKey_;i&&(a in this.fillStates||(this.fillStates[a]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e){var i=this.textStrokeState_,n=this.textState_,s=this.strokeKey_,a=this.textKey_,r=this.fillKey_;this.saveTextStates_();var o=this.pixelRatio,h=qt[n.textBaseline],l=this.textOffsetY_*o,c=this.text_,u=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([Ot.DRAW_CHARS,t,e,h,n.overflow,r,n.maxAngle,o,l,s,u*o,c,a,1]),this.hitDetectionInstructions.push([Ot.DRAW_CHARS,t,e,h,n.overflow,r,n.maxAngle,1,l,s,u,c,a,1/o])},e.prototype.setTextStyle=function(t,e){var i,n,s;if(t){var a=t.getFill();a?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=V(a.getColor()||H["b"])):(n=null,this.textFillState_=n);var r=t.getStroke();if(r){s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);var o=r.getLineDash(),h=r.getLineDashOffset(),l=r.getWidth(),c=r.getMiterLimit();s.lineCap=r.getLineCap()||H["d"],s.lineDash=o?o.slice():H["e"],s.lineDashOffset=void 0===h?H["f"]:h,s.lineJoin=r.getLineJoin()||H["g"],s.lineWidth=void 0===l?H["h"]:l,s.miterLimit=void 0===c?H["i"]:c,s.strokeStyle=V(r.getColor()||H["k"])}else s=null,this.textStrokeState_=s;i=this.textState_;var u=t.getFont()||H["c"];Object(H["r"])(u);var p=t.getScaleArray();i.overflow=t.getOverflow(),i.font=u,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||H["m"],i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||H["j"],i.scale=void 0===p?[1,1]:p;var f=t.getOffsetX(),d=t.getOffsetY(),_=t.getRotateWithView(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==_&&_,this.textRotation_=void 0===g?0:g,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:Object(W["c"])(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+Object(W["c"])(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=e},e}(It),Xt=zt,Yt={Circle:Gt,Default:It,Image:kt,LineString:Nt,Polygon:Gt,Text:Xt},Vt=function(){function t(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var i=this.buildersByZIndex_[e];for(var n in i){var s=i[n].finish();t[e][n]=s}}return t},t.prototype.getBuilder=function(t,e){var i=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);var s=n[e];if(void 0===s){var a=Yt[e];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=s}return s},t}(),Ut=Vt,Ht=i("137e"),Jt={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"},Kt=i("617d"),Zt=i("a896"),Qt=i("bef8");function $t(t,e,i,n,s,a,r,o,h,l,c,u){var p=t[e],f=t[e+1],d=0,_=0,g=0,m=0;function y(){d=p,_=f,e+=n,p=t[e],f=t[e+1],m+=g,g=Math.sqrt((p-d)*(p-d)+(f-_)*(f-_))}do{y()}while(e<i-n&&m+g<a);var v=0===g?0:(a-m)/g,x=Object(T["c"])(d,p,v),M=Object(T["c"])(_,f,v),b=e-n,S=m,O=a+o*h(l,s,c);while(e<i-n&&m+g<O)y();v=0===g?0:(O-m)/g;var w,E=Object(T["c"])(d,p,v),C=Object(T["c"])(_,f,v);if(u){var L=[x,M,E,C];Object(Qt["a"])(L,0,4,2,u,L,L),w=L[0]>L[2]}else w=x>E;var I,R=Math.PI,P=[],k=b+n===e;if(e=b,g=0,m=S,p=t[e],f=t[e+1],k){y(),I=Math.atan2(f-_,p-d),w&&(I+=I>0?-R:R);var j=(E+x)/2,A=(C+M)/2;return P[0]=[j,A,(O-a)/2,I,s],P}for(var N=0,F=s.length;N<F;){y();var D=Math.atan2(f-_,p-d);if(w&&(D+=D>0?-R:R),void 0!==I){var G=D-I;if(G+=G>R?-2*R:G<-R?2*R:0,Math.abs(G)>r)return null}I=D;for(var B=N,W=0;N<F;++N){var q=w?F-N-1:N,z=o*h(l,s[q],c);if(e+n<i&&m+g<a+W+z/2)break;W+=z}if(N!==B){var X=w?s.substring(F-B,F-N):s.substring(B,N);v=0===g?0:(a+W/2-m)/g;j=Object(T["c"])(d,p,v),A=Object(T["c"])(_,f,v);P.push([j,A,W/2,D,X]),a+=W}}return P}var te=Object(S["k"])(),ee=[],ie=[],ne=[],se=[];function ae(t){return t[3].declutterBox}var re=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function oe(t,e){return"start"!==e&&"end"!==e||re.test(t)||(e="start"===e?"left":"right"),qt[e]}var he=function(){function t(t,e,i,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=Object(Zt["c"])(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,i,n){var s=t+e+i+n;if(this.labels_[s])return this.labels_[s];var a=n?this.strokeStates[n]:null,r=i?this.fillStates[i]:null,o=this.textStates[e],h=this.pixelRatio,l=[o.scale[0]*h,o.scale[1]*h],c=oe(t,o.textAlign||H["l"]),u=n&&a.lineWidth?a.lineWidth:0,p=t.split("\n"),f=p.length,d=[],_=Object(H["q"])(o.font,p,d),g=Object(H["p"])(o.font),m=g*f,y=_+u,v=[],x=(y+2)*l[0],M=(m+u)*l[1],b={width:x<0?Math.floor(x):Math.ceil(x),height:M<0?Math.floor(M):Math.ceil(M),contextInstructions:v};if(1==l[0]&&1==l[1]||v.push("scale",l),v.push("font",o.font),n){v.push("strokeStyle",a.strokeStyle),v.push("lineWidth",u),v.push("lineCap",a.lineCap),v.push("lineJoin",a.lineJoin),v.push("miterLimit",a.miterLimit);var S=Kt["g"]?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;S.prototype.setLineDash&&(v.push("setLineDash",[a.lineDash]),v.push("lineDashOffset",a.lineDashOffset))}i&&v.push("fillStyle",r.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");var O,w=.5-c,E=c*y+w*u;if(n)for(O=0;O<f;++O)v.push("strokeText",[p[O],E+w*d[O],.5*(u+g)+O*g]);if(i)for(O=0;O<f;++O)v.push("fillText",[p[O],E+w*d[O],.5*(u+g)+O*g]);return this.labels_[s]=b,b},t.prototype.replayTextBackground_=function(t,e,i,n,s,a,r){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,s),t.lineTo.apply(t,e),a&&(this.alignFill_=a[2],this.fill_(t)),r&&(this.setStrokeStyle_(t,r),t.stroke())},t.prototype.calculateImageOrLabelDimensions_=function(t,e,i,n,s,a,r,o,h,l,c,u,p,f,d,_){r*=u[0],o*=u[1];var g,m=i-r,y=n-o,v=s+h>t?t-h:s,x=a+l>e?e-l:a,M=f[3]+v*u[0]+f[1],b=f[0]+x*u[1]+f[2],O=m-f[3],w=y-f[0];return(d||0!==c)&&(ee[0]=O,se[0]=O,ee[1]=w,ie[1]=w,ie[0]=O+M,ne[0]=ie[0],ne[1]=w+b,se[1]=ne[1]),0!==c?(g=Object(Zt["b"])(Object(Zt["c"])(),i,n,1,1,c,-i,-n),Object(Zt["a"])(g,ee),Object(Zt["a"])(g,ie),Object(Zt["a"])(g,ne),Object(Zt["a"])(g,se),Object(S["l"])(Math.min(ee[0],ie[0],ne[0],se[0]),Math.min(ee[1],ie[1],ne[1],se[1]),Math.max(ee[0],ie[0],ne[0],se[0]),Math.max(ee[1],ie[1],ne[1],se[1]),te)):Object(S["l"])(Math.min(O,O+M),Math.min(w,w+b),Math.max(O,O+M),Math.max(w,w+b),te),p&&(m=Math.round(m),y=Math.round(y)),{drawImageX:m,drawImageY:y,drawImageW:v,drawImageH:x,originX:h,originY:l,declutterBox:{minX:te[0],minY:te[1],maxX:te[2],maxY:te[3],value:_},canvasTransform:g,scale:u}},t.prototype.replayImageOrLabel_=function(t,e,i,n,s,a,r){var o=!(!a&&!r),h=n.declutterBox,l=t.canvas,c=r?r[2]*n.scale[0]/2:0,u=h.minX-c<=l.width/e&&h.maxX+c>=0&&h.minY-c<=l.height/e&&h.maxY+c>=0;return u&&(o&&this.replayTextBackground_(t,ee,ie,ne,se,a,r),Object(H["n"])(t,n.canvasTransform,s,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=Object(Zt["a"])(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t["strokeStyle"]=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.drawLabelWithPointPlacement_=function(t,e,i,n){var s=this.textStates[e],a=this.createLabel(t,e,n,i),r=this.strokeStates[i],o=this.pixelRatio,h=oe(t,s.textAlign||H["l"]),l=qt[s.textBaseline||H["m"]],c=r&&r.lineWidth?r.lineWidth:0,u=a.width/o-2*s.scale[0],p=h*u+2*(.5-h)*c,f=l*a.height/o+2*(.5-l)*c;return{label:a,anchorX:p,anchorY:f}},t.prototype.execute_=function(t,e,i,n,s,a,r,o){var h;this.pixelCoordinates_&&Object(E["b"])(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Object(Qt["c"])(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),Object(Zt["h"])(this.renderedTransform_,i));var l,c,u,p,f,d,_,g,m,y,v,x,M,b,O,w,C=0,L=n.length,T=0,I=0,R=0,P=null,j=null,A=this.coordinateCache_,N=this.viewRotation_,F=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},G=this.instructions!=n||this.overlaps?0:200;while(C<L){var B=n[C],W=B[0];switch(W){case Ot.BEGIN_GEOMETRY:M=B[1],w=B[3],M.getGeometry()?void 0===r||Object(S["F"])(r,w.getExtent())?++C:C=B[2]+1:C=B[2];break;case Ot.BEGIN_PATH:I>G&&(this.fill_(t),I=0),R>G&&(t.stroke(),R=0),I||R||(t.beginPath(),p=NaN,f=NaN),++C;break;case Ot.CIRCLE:T=B[1];var q=h[T],z=h[T+1],X=h[T+2],Y=h[T+3],V=X-q,U=Y-z,J=Math.sqrt(V*V+U*U);t.moveTo(q+J,z),t.arc(q,z,J,0,2*Math.PI,!0),++C;break;case Ot.CLOSE_PATH:t.closePath(),++C;break;case Ot.CUSTOM:T=B[1],l=B[2];var K=B[3],Z=B[4],Q=6==B.length?B[5]:void 0;D.geometry=K,D.feature=M,C in A||(A[C]=[]);var $=A[C];Q?Q(h,T,l,2,$):($[0]=h[T],$[1]=h[T+1],$.length=2),Z($,D),++C;break;case Ot.DRAW_IMAGE:T=B[1],l=B[2],g=B[3],c=B[4],u=B[5];var tt=B[6],et=B[7],it=B[8],nt=B[9],st=B[10],at=B[11],rt=B[12],ot=B[13],ht=B[14];if(!g&&B.length>=19){m=B[18],y=B[19],v=B[20],x=B[21];var lt=this.drawLabelWithPointPlacement_(m,y,v,x);g=lt.label,B[3]=g;var ct=B[22];c=(lt.anchorX-ct)*this.pixelRatio,B[4]=c;var ut=B[23];u=(lt.anchorY-ut)*this.pixelRatio,B[5]=u,tt=g.height,B[6]=tt,ot=g.width,B[13]=ot}var pt=void 0;B.length>24&&(pt=B[24]);var ft=void 0,dt=void 0,_t=void 0;B.length>16?(ft=B[15],dt=B[16],_t=B[17]):(ft=H["j"],dt=!1,_t=!1),st&&F?at+=N:st||F||(at-=N);for(var gt=0;T<l;T+=2)if(!(pt&&pt[gt++]<ot/this.pixelRatio)){var mt=this.calculateImageOrLabelDimensions_(g.width,g.height,h[T],h[T+1],ot,tt,c,u,it,nt,at,rt,s,ft,dt||_t,M),yt=[t,e,g,mt,et,dt?P:null,_t?j:null],vt=void 0,xt=void 0;if(o&&ht){var Mt=l-T;if(!ht[Mt]){ht[Mt]=yt;continue}if(vt=ht[Mt],delete ht[Mt],xt=ae(vt),o.collides(xt))continue}o&&o.collides(mt.declutterBox)||(vt&&(o&&o.insert(xt),this.replayImageOrLabel_.apply(this,vt)),o&&o.insert(mt.declutterBox),this.replayImageOrLabel_.apply(this,yt))}++C;break;case Ot.DRAW_CHARS:var bt=B[1],St=B[2],wt=B[3],Et=B[4];x=B[5];var Ct=B[6],Lt=B[7],Tt=B[8];v=B[9];var It=B[10];m=B[11],y=B[12];var Rt=[B[13],B[13]],Pt=this.textStates[y],kt=Pt.font,jt=[Pt.scale[0]*Lt,Pt.scale[1]*Lt],At=void 0;kt in this.widths_?At=this.widths_[kt]:(At={},this.widths_[kt]=At);var Nt=k(h,bt,St,2),Ft=Math.abs(jt[0])*Object(H["o"])(kt,m,At);if(Et||Ft<=Nt){var Dt=this.textStates[y].textAlign,Gt=(Nt-Ft)*qt[Dt],Bt=$t(h,bt,St,2,m,Gt,Ct,Math.abs(jt[0]),H["o"],kt,At,F?0:this.viewRotation_);t:if(Bt){var Wt=[],zt=void 0,Xt=void 0,Yt=void 0,Vt=void 0,Ut=void 0;if(v)for(zt=0,Xt=Bt.length;zt<Xt;++zt){Ut=Bt[zt],Yt=Ut[4],Vt=this.createLabel(Yt,y,"",v),c=Ut[2]+(jt[0]<0?-It:It),u=wt*Vt.height+2*(.5-wt)*It*jt[1]/jt[0]-Tt;mt=this.calculateImageOrLabelDimensions_(Vt.width,Vt.height,Ut[0],Ut[1],Vt.width,Vt.height,c,u,0,0,Ut[3],Rt,!1,H["j"],!1,M);if(o&&o.collides(mt.declutterBox))break t;Wt.push([t,e,Vt,mt,1,null,null])}if(x)for(zt=0,Xt=Bt.length;zt<Xt;++zt){Ut=Bt[zt],Yt=Ut[4],Vt=this.createLabel(Yt,y,x,""),c=Ut[2],u=wt*Vt.height-Tt;mt=this.calculateImageOrLabelDimensions_(Vt.width,Vt.height,Ut[0],Ut[1],Vt.width,Vt.height,c,u,0,0,Ut[3],Rt,!1,H["j"],!1,M);if(o&&o.collides(mt.declutterBox))break t;Wt.push([t,e,Vt,mt,1,null,null])}o&&o.load(Wt.map(ae));for(var Ht=0,Jt=Wt.length;Ht<Jt;++Ht)this.replayImageOrLabel_.apply(this,Wt[Ht])}}++C;break;case Ot.END_GEOMETRY:if(void 0!==a){M=B[1];var Kt=a(M,w);if(Kt)return Kt}++C;break;case Ot.FILL:G?I++:this.fill_(t),++C;break;case Ot.MOVE_TO_LINE_TO:for(T=B[1],l=B[2],b=h[T],O=h[T+1],d=b+.5|0,_=O+.5|0,d===p&&_===f||(t.moveTo(b,O),p=d,f=_),T+=2;T<l;T+=2)b=h[T],O=h[T+1],d=b+.5|0,_=O+.5|0,T!=l-2&&d===p&&_===f||(t.lineTo(b,O),p=d,f=_);++C;break;case Ot.SET_FILL_STYLE:P=B,this.alignFill_=B[2],I&&(this.fill_(t),I=0,R&&(t.stroke(),R=0)),t.fillStyle=B[1],++C;break;case Ot.SET_STROKE_STYLE:j=B,R&&(t.stroke(),R=0),this.setStrokeStyle_(t,B),++C;break;case Ot.STROKE:G?R++:t.stroke(),++C;break;default:++C;break}}I&&this.fill_(t),R&&t.stroke()},t.prototype.execute=function(t,e,i,n,s,a){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,s,void 0,void 0,a)},t.prototype.executeHitDetection=function(t,e,i,n,s){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,s)},t}(),le=he,ce=[Jt.POLYGON,Jt.CIRCLE,Jt.LINE_STRING,Jt.IMAGE,Jt.TEXT,Jt.DEFAULT],ue=function(){function t(t,e,i,n,s,a){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Object(Zt["c"])(),this.createExecutors_(s)}return t.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);var n=t[e];for(var s in n){var a=n[s];i[s]=new le(this.resolution_,this.pixelRatio_,this.overlaps_,a)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[e],n=0,s=t.length;n<s;++n)if(t[n]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,s,a){n=Math.round(n);var r=2*n+1,o=Object(Zt["b"])(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=Object(U["a"])(r,r));var l,c=this.hitDetectionContext_;c.canvas.width!==r||c.canvas.height!==r?(c.canvas.width=r,c.canvas.height=r):h||c.clearRect(0,0,r,r),void 0!==this.renderBuffer_&&(l=Object(S["k"])(),Object(S["r"])(l,t),Object(S["d"])(l,e*(this.renderBuffer_+n),l));var u,p=fe(n);function f(t,e){for(var i=c.getImageData(0,0,r,r).data,o=0,h=p.length;o<h;o++)if(i[p[o]]>0){if(!a||u!==Jt.IMAGE&&u!==Jt.TEXT||-1!==a.indexOf(t)){var l=(p[o]-3)/4,f=n-l%r,d=n-(l/r|0),_=s(t,e,f*f+d*d);if(_)return _}c.clearRect(0,0,r,r);break}}var d,_,g,m,y,v=Object.keys(this.executorsByZIndex_).map(Number);for(v.sort(E["i"]),d=v.length-1;d>=0;--d){var x=v[d].toString();for(g=this.executorsByZIndex_[x],_=ce.length-1;_>=0;--_)if(u=ce[_],m=g[u],void 0!==m&&(y=m.executeHitDetection(c,o,i,f,l),y))return y}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var i=e[0],n=e[1],s=e[2],a=e[3],r=[i,n,i,a,s,a,s,n];return Object(Qt["c"])(r,0,8,2,t,r),r},t.prototype.isEmpty=function(){return Object(dt["d"])(this.executorsByZIndex_)},t.prototype.execute=function(t,e,i,n,s,a,r){var o=Object.keys(this.executorsByZIndex_).map(Number);o.sort(E["i"]),this.maxExtent_&&(t.save(),this.clip(t,i));var h,l,c,u,p,f,d=a||ce;for(r&&o.reverse(),h=0,l=o.length;h<l;++h){var _=o[h].toString();for(p=this.executorsByZIndex_[_],c=0,u=d.length;c<u;++c){var g=d[c];f=p[g],void 0!==f&&f.execute(t,e,i,n,s,r)}}this.maxExtent_&&t.restore()},t}(),pe={};function fe(t){if(void 0!==pe[t])return pe[t];for(var e=2*t+1,i=t*t,n=new Array(i+1),s=0;s<=t;++s)for(var a=0;a<=t;++a){var r=s*s+a*a;if(r>i)break;var o=n[r];o||(o=[],n[r]=o),o.push(4*((t+s)*e+(t+a))+3),s>0&&o.push(4*((t-s)*e+(t+a))+3),a>0&&(o.push(4*((t+s)*e+(t-a))+3),s>0&&o.push(4*((t-s)*e+(t-a))+3))}for(var h=[],l=(s=0,n.length);s<l;++s)n[s]&&h.push.apply(h,n[s]);return pe[t]=h,h}var de=ue,_e=i("496f"),ge=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),me=function(t){function e(e,i,n,s,a,r,o){var h=t.call(this)||this;return h.context_=e,h.pixelRatio_=i,h.extent_=n,h.transform_=s,h.viewRotation_=a,h.squaredTolerance_=r,h.userTransform_=o,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=Object(Zt["c"])(),h}return ge(e,t),e.prototype.drawImages_=function(t,e,i,n){if(this.image_){var s=Object(Qt["c"])(t,e,i,n,this.transform_,this.pixelCoordinates_),a=this.context_,r=this.tmpLocalTransform_,o=a.globalAlpha;1!=this.imageOpacity_&&(a.globalAlpha=o*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var l=0,c=s.length;l<c;l+=2){var u=s[l]-this.imageAnchorX_,p=s[l+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var f=u+this.imageAnchorX_,d=p+this.imageAnchorY_;Object(Zt["b"])(r,f,d,1,1,h,-f,-d),a.setTransform.apply(a,r),a.translate(f,d),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.setTransform(1,0,0,1,0,0)}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,u,p,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(a.globalAlpha=o)}},e.prototype.drawText_=function(t,e,i,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var s=Object(Qt["c"])(t,e,i,n,this.transform_,this.pixelCoordinates_),a=this.context_,r=this.textRotation_;for(this.textRotateWithView_&&(r+=this.viewRotation_);e<i;e+=n){var o=s[e]+this.textOffsetX_,h=s[e+1]+this.textOffsetY_;if(0!==r||1!=this.textScale_[0]||1!=this.textScale_[1]){var l=Object(Zt["b"])(this.tmpLocalTransform_,o,h,1,1,r,-o,-h);a.setTransform.apply(a,l),a.translate(o,h),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&a.strokeText(this.text_,o,h),this.textFillState_&&a.fillText(this.text_,o,h)}}},e.prototype.moveToLineTo_=function(t,e,i,n,s){var a=this.context_,r=Object(Qt["c"])(t,e,i,n,this.transform_,this.pixelCoordinates_);a.moveTo(r[0],r[1]);var o=r.length;s&&(o-=2);for(var h=2;h<o;h+=2)a.lineTo(r[h],r[h+1]);return s&&a.closePath(),i},e.prototype.drawRings_=function(t,e,i,n){for(var s=0,a=i.length;s<a;++s)e=this.moveToLineTo_(t,e,i[s],n,!0);return e},e.prototype.drawCircle=function(t){if(Object(S["F"])(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=Object(M["b"])(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],s=Math.sqrt(i*i+n*n),a=this.context_;a.beginPath(),a.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){var e=t.getType();switch(e){case x["a"].POINT:this.drawPoint(t);break;case x["a"].LINE_STRING:this.drawLineString(t);break;case x["a"].POLYGON:this.drawPolygon(t);break;case x["a"].MULTI_POINT:this.drawMultiPoint(t);break;case x["a"].MULTI_LINE_STRING:this.drawMultiLineString(t);break;case x["a"].MULTI_POLYGON:this.drawMultiPolygon(t);break;case x["a"].GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case x["a"].CIRCLE:this.drawCircle(t);break;default:}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&Object(S["F"])(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(S["F"])(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Object(S["F"])(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates(),s=0,a=t.getEnds(),r=t.getStride();i.beginPath();for(var o=0,h=a.length;o<h;++o)s=this.moveToLineTo_(n,s,a[o],r,!1);i.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(S["F"])(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(S["F"])(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),n=0,s=t.getEndss(),a=t.getStride();e.beginPath();for(var r=0,o=s.length;r<o;++r){var h=s[r];n=this.drawRings_(i,n,h,a)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(Object(E["b"])(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:H["l"];i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){var i=this;if(t){var n=t.getColor();this.fillState_={fillStyle:V(n||H["b"])}}else this.fillState_=null;if(e){var s=e.getColor(),a=e.getLineCap(),r=e.getLineDash(),o=e.getLineDashOffset(),h=e.getLineJoin(),l=e.getWidth(),c=e.getMiterLimit(),u=r||H["e"];this.strokeState_={lineCap:void 0!==a?a:H["d"],lineDash:1===this.pixelRatio_?u:u.map((function(t){return t*i.pixelRatio_})),lineDashOffset:(o||H["f"])*this.pixelRatio_,lineJoin:void 0!==h?h:H["g"],lineWidth:(void 0!==l?l:H["h"])*this.pixelRatio_,miterLimit:void 0!==c?c:H["i"],strokeStyle:V(s||H["k"])}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){var e;if(t&&(e=t.getSize())){var i=t.getAnchor(),n=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*this.pixelRatio_,this.imageAnchorY_=i[1]*this.pixelRatio_,this.imageHeight_=e[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=e[0]*this.pixelRatio_}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:V(i||H["b"])}}else this.textFillState_=null;var n=t.getStroke();if(n){var s=n.getColor(),a=n.getLineCap(),r=n.getLineDash(),o=n.getLineDashOffset(),h=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==a?a:H["d"],lineDash:r||H["e"],lineDashOffset:o||H["f"],lineJoin:void 0!==h?h:H["g"],lineWidth:void 0!==l?l:H["h"],miterLimit:void 0!==c?c:H["i"],strokeStyle:V(s||H["k"])}}else this.textStrokeState_=null;var u=t.getFont(),p=t.getOffsetX(),f=t.getOffsetY(),d=t.getRotateWithView(),_=t.getRotation(),g=t.getScaleArray(),m=t.getText(),y=t.getTextAlign(),v=t.getTextBaseline();this.textState_={font:void 0!==u?u:H["c"],textAlign:void 0!==y?y:H["l"],textBaseline:void 0!==v?v:H["m"]},this.text_=void 0!==m?m:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==f?this.pixelRatio_*f:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==_?_:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}else this.text_=""},e}(Ct),ye=me,ve={FRACTION:"fraction",PIXELS:"pixels"},xe={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Me=i("0ec0"),be=i("3c22"),Se=i("6611"),Oe=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),we=null,Ee=function(t){function e(e,i,n,s,a,r){var o=t.call(this)||this;return o.hitDetectionImage_=null,o.image_=e||new Image,null!==s&&(o.image_.crossOrigin=s),o.canvas_={},o.color_=r,o.unlisten_=null,o.imageState_=a,o.size_=n,o.src_=i,o.tainted_,o}return Oe(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===B["a"].LOADED){we||(we=Object(U["a"])(1,1)),we.drawImage(this.image_,0,0);try{we.getImageData(0,0,1,1),this.tainted_=!1}catch(t){we=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(c["a"].CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=B["a"].ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=B["a"].LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=Object(U["a"])(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==B["a"].IDLE){this.imageState_=B["a"].LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Object(Se["a"])(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]&&this.imageState_===B["a"].LOADED){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var i=e.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.isTainted_())i.fillStyle=Object(Y["b"])(this.color_),i.fillRect(0,0,e.width/t,e.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this.image_,0,0);else{for(var n=i.getImageData(0,0,e.width,e.height),s=n.data,a=this.color_[0]/255,r=this.color_[1]/255,o=this.color_[2]/255,h=this.color_[3],l=0,c=s.length;l<c;l+=4)s[l]*=a,s[l+1]*=r,s[l+2]*=o,s[l+3]*=h;i.putImageData(n,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Me["a"]);function Ce(t,e,i,n,s,a){var r=be["a"].get(e,n,a);return r||(r=new Ee(t,e,i,n,s,a),be["a"].set(e,n,a,r)),r}var Le=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Te=function(t){function e(e){var i=this,n=e||{},s=void 0!==n.opacity?n.opacity:1,a=void 0!==n.rotation?n.rotation:0,r=void 0!==n.scale?n.scale:1,o=void 0!==n.rotateWithView&&n.rotateWithView;i=t.call(this,{opacity:s,rotation:a,scale:r,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:o})||this,i.anchor_=void 0!==n.anchor?n.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:xe.TOP_LEFT,i.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:ve.FRACTION,i.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:ve.FRACTION,i.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var h=void 0!==n.img?n.img:null,l=void 0!==n.imgSize?n.imgSize:null,c=n.src;Object(u["a"])(!(void 0!==c&&h),4),Object(u["a"])(!h||h&&l,5),void 0!==c&&0!==c.length||!h||(c=h.src||Object(W["c"])(h)),Object(u["a"])(void 0!==c&&c.length>0,6);var p=void 0!==n.src?B["a"].IDLE:B["a"].LOADED;return i.color_=void 0!==n.color?Object(Y["a"])(n.color):null,i.iconImage_=Ce(h,c,l,i.crossOrigin_,p,i.color_),i.offset_=void 0!==n.offset?n.offset:[0,0],i.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:xe.TOP_LEFT,i.origin_=null,i.size_=void 0!==n.size?n.size:null,i}return Le(e,t),e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==ve.FRACTION||this.anchorYUnits_==ve.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==ve.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==ve.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=xe.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=xe.TOP_RIGHT&&this.anchorOrigin_!=xe.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=xe.BOTTOM_LEFT&&this.anchorOrigin_!=xe.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}var i=this.getDisplacement();return t[0]-=i[0],t[1]+=i[1],this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=xe.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=xe.TOP_RIGHT&&this.offsetOrigin_!=xe.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=xe.BOTTOM_LEFT&&this.offsetOrigin_!=xe.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(c["a"].CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(c["a"].CHANGE,t)},e}(X),Ie=Te,Re=.5;function Pe(t,e,i,n,s,a,r){var o=t[0]*Re,h=t[1]*Re,l=Object(U["a"])(o,h);l.imageSmoothingEnabled=!1;for(var c=l.canvas,u=new ye(l,Re,s,null,r),p=i.length,f=Math.floor(16777215/p),d={},_=1;_<=p;++_){var g=i[_-1],m=g.getStyleFunction()||n;if(n){var y=m(g,a);if(y){Array.isArray(y)||(y=[y]);for(var v=_*f,M="#"+("000000"+v.toString(16)).slice(-6),b=0,O=y.length;b<O;++b){var w=y[b],C=w.getGeometryFunction()(g);if(C&&Object(S["F"])(s,C.getExtent())){var L=w.clone(),T=L.getFill();T&&T.setColor(M);var I=L.getStroke();I&&(I.setColor(M),I.setLineDash(null)),L.setText(void 0);var R=w.getImage();if(R&&0!==R.getOpacity()){var P=R.getImageSize();if(!P)continue;var k=Object(U["a"])(P[0],P[1],void 0,{alpha:!1}),j=k.canvas;k.fillStyle=M,k.fillRect(0,0,j.width,j.height),L.setImage(new Ie({img:j,imgSize:P,anchor:R.getAnchor(),anchorXUnits:ve.PIXELS,anchorYUnits:ve.PIXELS,offset:R.getOrigin(),opacity:1,size:R.getSize(),scale:R.getScale(),rotation:R.getRotation(),rotateWithView:R.getRotateWithView()}))}var A=L.getZIndex()||0,N=d[A];N||(N={},d[A]=N,N[x["a"].POLYGON]=[],N[x["a"].CIRCLE]=[],N[x["a"].LINE_STRING]=[],N[x["a"].POINT]=[]),N[C.getType().replace("Multi","")].push(C,L)}}}}}for(var F=Object.keys(d).map(Number).sort(E["i"]),D=(_=0,F.length);_<D;++_){N=d[F[_]];for(var G in N){var B=N[G];for(b=0,O=B.length;b<O;b+=2){u.setStyle(B[b+1]);for(var W=0,q=e.length;W<q;++W)u.setTransform(e[W]),u.drawGeometry(B[b])}}}return l.getImageData(0,0,c.width,c.height)}function ke(t,e,i){var n=[];if(i){var s=Math.floor(Math.round(t[0])*Re),a=Math.floor(Math.round(t[1])*Re),r=4*(Object(T["a"])(s,0,i.width-1)+Object(T["a"])(a,0,i.height-1)*i.width),o=i.data[r],h=i.data[r+1],l=i.data[r+2],c=l+256*(h+256*o),u=Math.floor(16777215/e.length);c&&c%u===0&&n.push(e[c/u-1])}return n}var je=i("cd7e"),Ae=.5,Ne={Point:He,LineString:Ye,Polygon:Ke,MultiPoint:Je,MultiLineString:Ve,MultiPolygon:Ue,GeometryCollection:Xe,Circle:Be};function Fe(t,e){return parseInt(Object(W["c"])(t),10)-parseInt(Object(W["c"])(e),10)}function De(t,e){var i=Ge(t,e);return i*i}function Ge(t,e){return Ae*t/e}function Be(t,e,i,n,s){var a=i.getFill(),r=i.getStroke();if(a||r){var o=t.getBuilder(i.getZIndex(),Jt.CIRCLE);o.setFillStrokeStyle(a,r),o.drawCircle(e,n)}var h=i.getText();if(h&&h.getText()){var l=(s||t).getBuilder(i.getZIndex(),Jt.TEXT);l.setTextStyle(h),l.drawText(e,n)}}function We(t,e,i,n,s,a,r){var o=!1,h=i.getImage();if(h){var l=h.getImageState();l==B["a"].LOADED||l==B["a"].ERROR?h.unlistenImageChange(s):(l==B["a"].IDLE&&h.load(),l=h.getImageState(),h.listenImageChange(s),o=!0)}return qe(t,e,i,n,a,r),o}function qe(t,e,i,n,s,a){var r=i.getGeometryFunction()(e);if(r){var o=r.simplifyTransformed(n,s),h=i.getRenderer();if(h)ze(t,o,i,e);else{var l=Ne[o.getType()];l(t,o,i,e,a)}}}function ze(t,e,i,n){if(e.getType()!=x["a"].GEOMETRY_COLLECTION){var s=t.getBuilder(i.getZIndex(),Jt.DEFAULT);s.drawCustom(e,n,i.getRenderer(),i.getHitDetectionRenderer())}else for(var a=e.getGeometries(),r=0,o=a.length;r<o;++r)ze(t,a[r],i,n)}function Xe(t,e,i,n,s){var a,r,o=e.getGeometriesArray();for(a=0,r=o.length;a<r;++a){var h=Ne[o[a].getType()];h(t,o[a],i,n,s)}}function Ye(t,e,i,n,s){var a=i.getStroke();if(a){var r=t.getBuilder(i.getZIndex(),Jt.LINE_STRING);r.setFillStrokeStyle(null,a),r.drawLineString(e,n)}var o=i.getText();if(o&&o.getText()){var h=(s||t).getBuilder(i.getZIndex(),Jt.TEXT);h.setTextStyle(o),h.drawText(e,n)}}function Ve(t,e,i,n,s){var a=i.getStroke();if(a){var r=t.getBuilder(i.getZIndex(),Jt.LINE_STRING);r.setFillStrokeStyle(null,a),r.drawMultiLineString(e,n)}var o=i.getText();if(o&&o.getText()){var h=(s||t).getBuilder(i.getZIndex(),Jt.TEXT);h.setTextStyle(o),h.drawText(e,n)}}function Ue(t,e,i,n,s){var a=i.getFill(),r=i.getStroke();if(r||a){var o=t.getBuilder(i.getZIndex(),Jt.POLYGON);o.setFillStrokeStyle(a,r),o.drawMultiPolygon(e,n)}var h=i.getText();if(h&&h.getText()){var l=(s||t).getBuilder(i.getZIndex(),Jt.TEXT);l.setTextStyle(h),l.drawText(e,n)}}function He(t,e,i,n,s){var a,r=i.getImage(),o=i.getText();if(s&&(t=s,a=r&&o&&o.getText()?{}:void 0),r){if(r.getImageState()!=B["a"].LOADED)return;var h=t.getBuilder(i.getZIndex(),Jt.IMAGE);h.setImageStyle(r,a),h.drawPoint(e,n)}if(o&&o.getText()){var l=t.getBuilder(i.getZIndex(),Jt.TEXT);l.setTextStyle(o,a),l.drawText(e,n)}}function Je(t,e,i,n,s){var a,r=i.getImage(),o=i.getText();if(s&&(t=s,a=r&&o&&o.getText()?{}:void 0),r){if(r.getImageState()!=B["a"].LOADED)return;var h=t.getBuilder(i.getZIndex(),Jt.IMAGE);h.setImageStyle(r,a),h.drawMultiPoint(e,n)}if(o&&o.getText()){var l=(s||t).getBuilder(i.getZIndex(),Jt.TEXT);l.setTextStyle(o,a),l.drawText(e,n)}}function Ke(t,e,i,n,s){var a=i.getFill(),r=i.getStroke();if(a||r){var o=t.getBuilder(i.getZIndex(),Jt.POLYGON);o.setFillStrokeStyle(a,r),o.drawPolygon(e,n)}var h=i.getText();if(h&&h.getText()){var l=(s||t).getBuilder(i.getZIndex(),Jt.TEXT);l.setTextStyle(h),l.drawText(e,n)}}var Ze=i("256f"),Qe=i("a568"),$e=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ti=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=Object(S["k"])(),i.wrappedRenderedExtent_=Object(S["k"])(),i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return $e(e,t),e.prototype.useContainer=function(e,i,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,i,n)},e.prototype.renderWorlds=function(t,e,i){var n=e.extent,s=e.viewState,a=s.center,r=s.resolution,o=s.projection,h=s.rotation,l=o.getExtent(),c=this.getLayer().getSource(),u=e.pixelRatio,p=e.viewHints,f=!(p[_e["a"].ANIMATING]||p[_e["a"].INTERACTING]),d=this.context,_=Math.round(e.size[0]*u),g=Math.round(e.size[1]*u),m=c.getWrapX()&&o.canWrapX(),y=m?Object(S["E"])(l):null,v=m?Math.ceil((n[2]-l[2])/y)+1:1,x=m?Math.floor((n[0]-l[0])/y):0;do{var M=this.getRenderTransform(a,r,h,u,_,g,x*y);t.execute(d,1,M,h,f,void 0,i)}while(++x<v)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,e){var i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];Object(Zt["e"])(this.pixelTransform,1/i,1/i),Object(Zt["d"])(this.inversePixelTransform,this.pixelTransform);var s=Object(Zt["i"])(this.pixelTransform);this.useContainer(e,s,n.opacity);var a=this.context,r=a.canvas,o=this.replayGroup_,h=this.declutterExecutorGroup;if((!o||o.isEmpty())&&(!h||h.isEmpty()))return null;var l=Math.round(t.size[0]*i),c=Math.round(t.size[1]*i);r.width!=l||r.height!=c?(r.width=l,r.height=c,r.style.transform!==s&&(r.style.transform=s)):this.containerReused||a.clearRect(0,0,l,c),this.preRender(a,t);var u=t.viewState,p=u.projection,f=!1,d=!0;if(n.extent&&this.clipping){var _=Object(Ze["j"])(n.extent,p);d=Object(S["F"])(_,t.extent),f=d&&!Object(S["h"])(_,t.extent),f&&this.clipUnrotated(a,t,_)}d&&this.renderWorlds(o,t),f&&a.restore(),this.postRender(a,t);var g=Object(je["f"])(n.opacity),m=this.container;return g!==m.style.opacity&&(m.style.opacity=g),this.renderedRotation_!==u.rotation&&(this.renderedRotation_=u.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];Object(Zt["a"])(this.pixelTransform,i);var n=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,r=this.renderedProjection_,o=this.wrappedRenderedExtent_,h=this.getLayer(),l=[],c=i[0]*Re,u=i[1]*Re;l.push(this.getRenderTransform(n,s,a,Re,c,u,0).slice());var p=h.getSource(),f=r.getExtent();if(p.getWrapX()&&r.canWrapX()&&!Object(S["h"])(f,o)){var d=o[0],_=Object(S["E"])(f),g=0,m=void 0;while(d<f[0])--g,m=_*g,l.push(this.getRenderTransform(n,s,a,Re,c,u,m).slice()),d+=_;g=0,d=o[2];while(d>f[2])++g,m=_*g,l.push(this.getRenderTransform(n,s,a,Re,c,u,m).slice()),d-=_}this.hitDetectionImageData_=Pe(i,l,this.renderedFeatures_,h.getStyleFunction(),o,s,a)}e(ke(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,s){var a=this;if(this.replayGroup_){var r,o=e.viewState.resolution,h=e.viewState.rotation,l=this.getLayer(),c={},u=function(t,e,i){var a=Object(W["c"])(t),r=c[a];if(r){if(!0!==r&&i<r.distanceSq){if(0===i)return c[a]=!0,s.splice(s.lastIndexOf(r),1),n(t,l,e);r.geometry=e,r.distanceSq=i}}else{if(0===i)return c[a]=!0,n(t,l,e);s.push(c[a]={feature:t,layer:l,geometry:e,distanceSq:i,callback:n})}},p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some((function(n){return r=n.forEachFeatureAtCoordinate(t,o,h,i,u,n===a.declutterExecutorGroup?e.declutterTree.all().map((function(t){return t.value})):null)})),r}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource();if(!i)return!1;var n=t.viewHints[_e["a"].ANIMATING],s=t.viewHints[_e["a"].INTERACTING],a=e.getUpdateWhileAnimating(),r=e.getUpdateWhileInteracting();if(!this.dirty_&&!a&&n||!r&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var o=t.extent,h=t.viewState,l=h.projection,c=h.resolution,u=t.pixelRatio,p=e.getRevision(),f=e.getRenderBuffer(),d=e.getRenderOrder();void 0===d&&(d=Fe);var _=h.center.slice(),g=Object(S["d"])(o,f*c),m=g.slice(),y=[g.slice()],v=l.getExtent();if(i.getWrapX()&&l.canWrapX()&&!Object(S["h"])(v,t.extent)){var x=Object(S["E"])(v),M=Math.max(Object(S["E"])(g)/2,x);g[0]=v[0]-M,g[2]=v[2]+M,Object(Qe["g"])(_,l);var b=Object(S["K"])(y[0],l);b[0]<v[0]&&b[2]<v[2]?y.push([b[0]+x,b[1],b[2]+x,b[3]]):b[0]>v[0]&&b[2]>v[2]&&y.push([b[0]-x,b[1],b[2]-x,b[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==p&&this.renderedRenderOrder_==d&&Object(S["h"])(this.wrappedRenderedExtent_,g))return Object(E["b"])(this.renderedExtent_,m)||(this.hitDetectionImageData_=null,this.renderedExtent_=m),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var O,w=new Ut(Ge(c,u),g,c,u);this.getLayer().getDeclutter()&&(O=new Ut(Ge(c,u),g,c,u));var C,L=Object(Ze["p"])();if(L){for(var T=0,I=y.length;T<I;++T){var R=y[T],P=Object(Ze["r"])(R,l);i.loadFeatures(P,Object(Ze["s"])(c,l),L)}C=Object(Ze["o"])(L,l)}else for(T=0,I=y.length;T<I;++T)i.loadFeatures(y[T],c,l);var k=De(c,u),j=function(t){var i,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,c)),i){var s=this.renderFeature(t,k,i,w,C,O);this.dirty_=this.dirty_||s}}.bind(this),A=Object(Ze["r"])(g,l),N=i.getFeaturesInExtent(A);d&&N.sort(d);for(T=0,I=N.length;T<I;++T)j(N[T]);this.renderedFeatures_=N;var F=w.finish(),D=new de(g,c,u,i.getOverlaps(),F,e.getRenderBuffer());return O&&(this.declutterExecutorGroup=new de(g,c,u,i.getOverlaps(),O.finish(),e.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=p,this.renderedRenderOrder_=d,this.renderedExtent_=m,this.wrappedRenderedExtent_=g,this.renderedCenter_=_,this.renderedProjection_=l,this.replayGroup_=D,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,n,s,a){if(!i)return!1;var r=!1;if(Array.isArray(i))for(var o=0,h=i.length;o<h;++o)r=We(n,t,i[o],e,this.boundHandleStyleImageChange_,s,a)||r;else r=We(n,t,i,e,this.boundHandleStyleImageChange_,s,a);return r},e}(Ht["a"]),ei=ti,ii=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ni=function(t){function e(e){return t.call(this,e)||this}return ii(e,t),e.prototype.createRenderer=function(){return new ei(this)},e}(yt),si=ni,ai=i("183a"),ri=i("cef7"),oi=i("7b4f"),hi=function(){function t(t){this.rbush_=new ft.a(t),this.items_={}}return t.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[Object(W["c"])(e)]=i},t.prototype.load=function(t,e){for(var i=new Array(e.length),n=0,s=e.length;n<s;n++){var a=t[n],r=e[n],o={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:r};i[n]=o,this.items_[Object(W["c"])(r)]=o}this.rbush_.load(i)},t.prototype.remove=function(t){var e=Object(W["c"])(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},t.prototype.update=function(t,e){var i=this.items_[Object(W["c"])(e)],n=[i.minX,i.minY,i.maxX,i.maxY];Object(S["p"])(n,t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){var t=this.rbush_.all();return t.map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},i=this.rbush_.search(e);return i.map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var i,n=0,s=t.length;n<s;n++)if(i=e(t[n]),i)return i;return i},t.prototype.isEmpty=function(){return Object(dt["d"])(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Object(S["l"])(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),li=hi,ci=i("ff80"),ui=i("6d83"),pi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"},fi=i("57cb");function di(t,e){return[[-1/0,-1/0,1/0,1/0]]}var _i={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"},gi=!1;function mi(t,e,i,n,s,a,r){var o=new XMLHttpRequest;o.open("GET","function"===typeof t?t(i,n,s):t,!0),e.getType()==_i.ARRAY_BUFFER&&(o.responseType="arraybuffer"),o.withCredentials=gi,o.onload=function(t){if(!o.status||o.status>=200&&o.status<300){var n=e.getType(),h=void 0;n==_i.JSON||n==_i.TEXT?h=o.responseText:n==_i.XML?(h=o.responseXML,h||(h=(new DOMParser).parseFromString(o.responseText,"application/xml"))):n==_i.ARRAY_BUFFER&&(h=o.response),h?a(e.readFeatures(h,{extent:i,featureProjection:s}),e.readProjection(h)):r()}else r()},o.onerror=r,o.send()}function yi(t,e){return function(i,n,s,a,r){var o=this;mi(t,e,i,n,s,(function(t,e){o.addFeatures(t),void 0!==a&&a(t)}),r||fi["c"])}}var vi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xi=function(t){function e(e,i,n){var s=t.call(this,e)||this;return s.feature=i,s.features=n,s}return vi(e,t),e}(ri["a"]),Mi=function(t){function e(e){var i=this,n=e||{};i=t.call(this,{attributions:n.attributions,projection:void 0,state:ui["a"].READY,wrapX:void 0===n.wrapX||n.wrapX})||this,i.on,i.once,i.un,i.loader_=fi["c"],i.format_=n.format,i.overlaps_=void 0===n.overlaps||n.overlaps,i.url_=n.url,void 0!==n.loader?i.loader_=n.loader:void 0!==i.url_&&(Object(u["a"])(i.format_,7),i.loader_=yi(i.url_,i.format_)),i.strategy_=void 0!==n.strategy?n.strategy:di;var s,a,r=void 0===n.useSpatialIndex||n.useSpatialIndex;return i.featuresRtree_=r?new li:null,i.loadedExtentsRtree_=new li,i.loadingExtentsCount_=0,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null,Array.isArray(n.features)?a=n.features:n.features&&(s=n.features,a=s.getArray()),r||void 0!==s||(s=new o["a"](a)),void 0!==a&&i.addFeaturesInternal(a),void 0!==s&&i.bindFeaturesCollection_(s),i}return vi(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Object(W["c"])(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new xi(pi.ADDFEATURE,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(p["a"])(e,c["a"].CHANGE,this.handleFeatureChange_,this),Object(p["a"])(e,oi["a"].PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&(Object(u["a"])(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],n=[],s=0,a=t.length;s<a;s++){var r=t[s],o=Object(W["c"])(r);this.addToIndex_(o,r)&&i.push(r)}s=0;for(var h=i.length;s<h;s++){r=i[s],o=Object(W["c"])(r);this.setupChangeEvents_(o,r);var l=r.getGeometry();if(l){var c=l.getExtent();e.push(c),n.push(r)}else this.nullGeometryFeatures_[o]=r}this.featuresRtree_&&this.featuresRtree_.load(e,n);s=0;for(var u=i.length;s<u;s++)this.dispatchEvent(new xi(pi.ADDFEATURE,i[s]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(pi.ADDFEATURE,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(pi.REMOVEFEATURE,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(ai["a"].ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(ai["a"].REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){var i=this.featureChangeKeys_[e];i.forEach(p["c"])}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var s=new xi(pi.CLEAR);this.dispatchEvent(s),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){var n=i.getGeometry();return n.intersectsCoordinate(t)?e(i):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(i){var n=i.getGeometry();if(n.intersectsExtent(t)){var s=e(i);if(s)return s}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(dt["d"])(this.nullGeometryFeatures_)||Object(E["c"])(t,Object(dt["c"])(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],n=t[1],s=null,a=[NaN,NaN],r=1/0,o=[-1/0,-1/0,1/0,1/0],h=e||fi["b"];return this.featuresRtree_.forEachInExtent(o,(function(t){if(h(t)){var e=t.getGeometry(),l=r;if(r=e.closestPointXY(i,n,a,r),r<l){s=t;var c=Math.sqrt(r);o[0]=i-c,o[1]=n-c,o[2]=i+c,o[3]=n+c}}})),s},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=Object(W["c"])(e),n=e.getGeometry();if(n){var s=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(s,e)):this.featuresRtree_&&this.featuresRtree_.update(s,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var a=e.getId();if(void 0!==a){var r=a.toString();this.idIndex_[r]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[r]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new xi(pi.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(W["c"])(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(dt["d"])(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){for(var n=this.loadedExtentsRtree_,s=this.strategy_(t,e,i),a=function(t,a){var o=s[t],h=n.forEachInExtent(o,(function(t){return Object(S["h"])(t.extent,o)}));h||(++r.loadingExtentsCount_,r.dispatchEvent(new xi(pi.FEATURESLOADSTART)),r.loader_.call(r,o,e,i,function(t){--this.loadingExtentsCount_,this.dispatchEvent(new xi(pi.FEATURESLOADEND,void 0,t))}.bind(r),function(){--this.loadingExtentsCount_,this.dispatchEvent(new xi(pi.FEATURESLOADERROR))}.bind(r)),n.insert(o,{extent:o.slice()}))},r=this,o=0,h=s.length;o<h;++o)a(o,h);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,(function(i){if(Object(S["p"])(i.extent,t))return e=i,!0})),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=Object(W["c"])(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Object(W["c"])(t);this.featureChangeKeys_[e].forEach(p["c"]),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new xi(pi.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Object(u["a"])(this.format_,7),this.url_=t,this.setLoader(yi(t,this.format_))},e}(ci["a"]),bi=Mi;function Si(t){var e,i=t.inversePixelTransform[0],n=t.frameState,s=Object(Zt["f"])(t.inversePixelTransform.slice(),n.coordinateToPixelTransform),a=De(n.viewState.resolution,i),r=Object(Ze["p"])();return r&&(e=Object(Ze["o"])(r,n.viewState.projection)),new ye(t.context,i,n.extent,s,n.viewState.rotation,a,e)}function Oi(t,e,i){var n,s,a,r,o,h,l=[],c=t(0),u=t(1),p=e(c),f=e(u),d=[u,c],_=[f,p],g=[1,0],m={},y=1e5;while(--y>0&&g.length>0)a=g.pop(),c=d.pop(),p=_.pop(),h=a.toString(),h in m||(l.push(p[0],p[1]),m[h]=!0),r=g.pop(),u=d.pop(),f=_.pop(),o=(a+r)/2,n=t(o),s=e(n),Object(T["h"])(s[0],s[1],p[0],p[1],f[0],f[1])<i?(l.push(f[0],f[1]),h=r.toString(),m[h]=!0):(g.push(r,o,o,a),_.push(f,s,s,p),d.push(u,n,n,c));return l}function wi(t,e,i,n,s){var a=Object(Ze["l"])("EPSG:4326");return Oi((function(n){return[t,e+(i-e)*n]}),Object(Ze["n"])(a,n),s)}function Ei(t,e,i,n,s){var a=Object(Ze["l"])("EPSG:4326");return Oi((function(n){return[e+(i-e)*n,t]}),Object(Ze["n"])(a,n),s)}var Ci=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Li=new G({color:"rgba(0,0,0,0.2)"}),Ti=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],Ii=function(t){function e(e){var i=this,n=e||{},s=Object(dt["a"])({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},n);return delete s.maxLines,delete s.strokeStyle,delete s.targetSize,delete s.showLabels,delete s.lonLabelFormatter,delete s.latLabelFormatter,delete s.lonLabelPosition,delete s.latLabelPosition,delete s.lonLabelStyle,delete s.latLabelStyle,delete s.intervals,i=t.call(this,s)||this,i.projection_=null,i.maxLat_=1/0,i.maxLon_=1/0,i.minLat_=-1/0,i.minLon_=-1/0,i.maxX_=1/0,i.maxY_=1/0,i.minX_=-1/0,i.minY_=-1/0,i.targetSize_=void 0!==n.targetSize?n.targetSize:100,i.maxLines_=void 0!==n.maxLines?n.maxLines:100,i.meridians_=[],i.parallels_=[],i.strokeStyle_=void 0!==n.strokeStyle?n.strokeStyle:Li,i.fromLonLatTransform_=void 0,i.toLonLatTransform_=void 0,i.projectionCenterLonLat_=null,i.bottomLeft_=null,i.bottomRight_=null,i.topLeft_=null,i.topRight_=null,i.meridiansLabels_=null,i.parallelsLabels_=null,n.showLabels&&(i.lonLabelFormatter_=void 0==n.lonLabelFormatter?Qe["b"].bind(i,"EW"):n.lonLabelFormatter,i.latLabelFormatter_=void 0==n.latLabelFormatter?Qe["b"].bind(i,"NS"):n.latLabelFormatter,i.lonLabelPosition_=void 0==n.lonLabelPosition?0:n.lonLabelPosition,i.latLabelPosition_=void 0==n.latLabelPosition?1:n.latLabelPosition,i.lonLabelStyleBase_=new rt({text:void 0!==n.lonLabelStyle?n.lonLabelStyle.clone():new ct({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new y({color:"rgba(0,0,0,1)"}),stroke:new G({color:"rgba(255,255,255,1)",width:3})})}),i.lonLabelStyle_=function(t){var e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_}.bind(i),i.latLabelStyleBase_=new rt({text:void 0!==n.latLabelStyle?n.latLabelStyle.clone():new ct({font:"12px Calibri,sans-serif",textAlign:"right",fill:new y({color:"rgba(0,0,0,1)"}),stroke:new G({color:"rgba(255,255,255,1)",width:3})})}),i.latLabelStyle_=function(t){var e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_}.bind(i),i.meridiansLabels_=[],i.parallelsLabels_=[],i.addEventListener(h["a"].POSTRENDER,i.drawLabels_.bind(i))),i.intervals_=void 0!==n.intervals?n.intervals:Ti,i.setSource(new bi({loader:i.loaderFunction.bind(i),strategy:i.strategyFunction.bind(i),features:new o["a"],overlaps:!1,useSpatialIndex:!1,wrapX:n.wrapX})),i.featurePool_=[],i.lineStyle_=new rt({stroke:i.strokeStyle_}),i.loadedExtent_=null,i.renderedExtent_=null,i.setRenderOrder(null),i}return Ci(e,t),e.prototype.strategyFunction=function(t,e){var i=t.slice();return this.projection_&&this.getSource().getWrapX()&&Object(S["K"])(i,this.projection_),this.loadedExtent_&&(Object(S["b"])(this.loadedExtent_,i,e)?i=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[i]},e.prototype.loaderFunction=function(t,e,i){this.loadedExtent_=t;var n=this.getSource(),s=this.getExtent()||[-1/0,-1/0,1/0,1/0],a=Object(S["B"])(s,t);if((!this.renderedExtent_||!Object(S["p"])(this.renderedExtent_,a))&&(this.renderedExtent_=a,!Object(S["H"])(a))){var r=Object(S["x"])(a),o=e*e/4,h=!this.projection_||!Object(Ze["g"])(this.projection_,i);h&&this.updateProjectionInfo_(i),this.createGraticule_(a,r,e,o);var l,c=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(c+=this.meridians_.length),this.parallelsLabels_&&(c+=this.parallels_.length);while(c>this.featurePool_.length)l=new g,this.featurePool_.push(l);var u=n.getFeaturesCollection();u.clear();var p,f,d=0;for(p=0,f=this.meridians_.length;p<f;++p)l=this.featurePool_[d++],l.setGeometry(this.meridians_[p]),l.setStyle(this.lineStyle_),u.push(l);for(p=0,f=this.parallels_.length;p<f;++p)l=this.featurePool_[d++],l.setGeometry(this.parallels_[p]),l.setStyle(this.lineStyle_),u.push(l)}},e.prototype.addMeridian_=function(t,e,i,n,s,a){var r=this.getMeridian_(t,e,i,n,a);if(Object(S["F"])(r.getExtent(),s)){if(this.meridiansLabels_){var o=this.lonLabelFormatter_(t);a in this.meridiansLabels_?this.meridiansLabels_[a].text=o:this.meridiansLabels_[a]={geom:new F["a"]([]),text:o}}this.meridians_[a++]=r}return a},e.prototype.addParallel_=function(t,e,i,n,s,a){var r=this.getParallel_(t,e,i,n,a);if(Object(S["F"])(r.getExtent(),s)){if(this.parallelsLabels_){var o=this.latLabelFormatter_(t);a in this.parallelsLabels_?this.parallelsLabels_[a].text=o:this.parallelsLabels_[a]={geom:new F["a"]([]),text:o}}this.parallels_[a++]=r}return a},e.prototype.drawLabels_=function(t){var e=t.frameState.viewState.rotation,i=t.frameState.extent,n=Object(S["x"])(i),s=i;if(e){var a=Object(S["E"])(i),r=Object(S["A"])(i),o=Math.abs(Math.cos(e)),h=Math.abs(Math.sin(e)),l=(h*r-o*a)/(h*h-o*o),c=(h*a-o*r)/(h*h-o*o);s=[n[0]-l/2,n[1]-c/2,n[0]+l/2,n[1]+c/2]}var u=0,p=0,f=this.latLabelPosition_<.5,d=this.projection_.getExtent(),_=Object(S["E"])(d);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Object(S["h"])(d,i)){u=Math.floor((i[0]-d[0])/_),p=Math.ceil((i[2]-d[2])/_);var g=Math.abs(e)>Math.PI/2;f=f!==g}for(var m=Si(t),y=u;y<=p;++y){var v=this.meridians_.length+this.parallels_.length,x=void 0,M=void 0,b=void 0,O=void 0;if(this.meridiansLabels_)for(M=0,b=this.meridiansLabels_.length;M<b;++M){var w=this.meridians_[M];if(e||0!==y){var E=w.clone();E.translate(y*_,0),E.rotate(-e,n),O=this.getMeridianPoint_(E,s,M),O.rotate(e,n)}else O=this.getMeridianPoint_(w,i,M);x=this.featurePool_[v++],x.setGeometry(O),x.set("graticule_label",this.meridiansLabels_[M].text),m.drawFeature(x,this.lonLabelStyle_(x))}if(this.parallelsLabels_&&(y===u&&f||y===p&&!f))for(M=0,b=this.parallels_.length;M<b;++M){w=this.parallels_[M];if(e||0!==y){E=w.clone();E.translate(y*_,0),E.rotate(-e,n),O=this.getParallelPoint_(E,s,M),O.rotate(e,n)}else O=this.getParallelPoint_(w,i,M);x=this.featurePool_[v++],x.setGeometry(O),x.set("graticule_label",this.parallelsLabels_[M].text),m.drawFeature(x,this.latLabelStyle_(x))}}},e.prototype.createGraticule_=function(t,e,i,n){var s=this.getInterval_(i);if(-1==s)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var a=!1,r=this.projection_.getExtent(),o=Object(S["E"])(r);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Object(S["h"])(r,t)&&(Object(S["E"])(t)>=o?(t[0]=r[0],t[2]=r[2]):a=!0);var h=[Object(T["a"])(e[0],this.minX_,this.maxX_),Object(T["a"])(e[1],this.minY_,this.maxY_)],l=this.toLonLatTransform_(h);isNaN(l[1])&&(l[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var c,u,p,f,d=Object(T["a"])(l[0],this.minLon_,this.maxLon_),_=Object(T["a"])(l[1],this.minLat_,this.maxLat_),g=this.maxLines_,m=t;a||(m=[Object(T["a"])(t[0],this.minX_,this.maxX_),Object(T["a"])(t[1],this.minY_,this.maxY_),Object(T["a"])(t[2],this.minX_,this.maxX_),Object(T["a"])(t[3],this.minY_,this.maxY_)]);var y=Object(S["a"])(m,this.toLonLatTransform_,void 0,8),v=y[3],x=y[2],M=y[1],b=y[0];if(a||(Object(S["g"])(m,this.bottomLeft_)&&(b=this.minLon_,M=this.minLat_),Object(S["g"])(m,this.bottomRight_)&&(x=this.maxLon_,M=this.minLat_),Object(S["g"])(m,this.topLeft_)&&(b=this.minLon_,v=this.maxLat_),Object(S["g"])(m,this.topRight_)&&(x=this.maxLon_,v=this.maxLat_),v=Object(T["a"])(v,_,this.maxLat_),x=Object(T["a"])(x,d,this.maxLon_),M=Object(T["a"])(M,this.minLat_,_),b=Object(T["a"])(b,this.minLon_,d)),d=Math.floor(d/s)*s,f=Object(T["a"])(d,this.minLon_,this.maxLon_),u=this.addMeridian_(f,M,v,n,t,0),c=0,a)while((f-=s)>=b&&c++<g)u=this.addMeridian_(f,M,v,n,t,u);else while(f!=this.minLon_&&c++<g)f=Math.max(f-s,this.minLon_),u=this.addMeridian_(f,M,v,n,t,u);if(f=Object(T["a"])(d,this.minLon_,this.maxLon_),c=0,a)while((f+=s)<=x&&c++<g)u=this.addMeridian_(f,M,v,n,t,u);else while(f!=this.maxLon_&&c++<g)f=Math.min(f+s,this.maxLon_),u=this.addMeridian_(f,M,v,n,t,u);this.meridians_.length=u,this.meridiansLabels_&&(this.meridiansLabels_.length=u),_=Math.floor(_/s)*s,p=Object(T["a"])(_,this.minLat_,this.maxLat_),u=this.addParallel_(p,b,x,n,t,0),c=0;while(p!=this.minLat_&&c++<g)p=Math.max(p-s,this.minLat_),u=this.addParallel_(p,b,x,n,t,u);p=Object(T["a"])(_,this.minLat_,this.maxLat_),c=0;while(p!=this.maxLat_&&c++<g)p=Math.min(p+s,this.maxLat_),u=this.addParallel_(p,b,x,n,t,u);this.parallels_.length=u,this.parallelsLabels_&&(this.parallelsLabels_.length=u)},e.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1],n=-1,s=Math.pow(this.targetSize_*t,2),a=[],r=[],o=0,h=this.intervals_.length;o<h;++o){var l=Object(T["a"])(this.intervals_[o]/2,0,90),c=Object(T["a"])(i,-90+l,90-l);a[0]=e-l,a[1]=c-l,r[0]=e+l,r[1]=c+l,this.fromLonLatTransform_(a,a),this.fromLonLatTransform_(r,r);var u=Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2);if(u<=s)break;n=this.intervals_[o]}return n},e.prototype.getMeridian_=function(t,e,i,n,s){var a=wi(t,e,i,this.projection_,n),r=this.meridians_[s];return r?(r.setFlatCoordinates(v["a"].XY,a),r.changed()):(r=new N(a,v["a"].XY),this.meridians_[s]=r),r},e.prototype.getMeridianPoint_=function(t,e,i){var n=t.getFlatCoordinates(),s=1,a=n.length-1;n[s]>n[a]&&(s=a,a=1);var r=Math.max(e[1],n[s]),o=Math.min(e[3],n[a]),h=Object(T["a"])(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,r,o),l=n[s-1]+(n[a-1]-n[s-1])*(h-n[s])/(n[a]-n[s]),c=[l,h],u=this.meridiansLabels_[i].geom;return u.setCoordinates(c),u},e.prototype.getMeridians=function(){return this.meridians_},e.prototype.getParallel_=function(t,e,i,n,s){var a=Ei(t,e,i,this.projection_,n),r=this.parallels_[s];return r?(r.setFlatCoordinates(v["a"].XY,a),r.changed()):r=new N(a,v["a"].XY),r},e.prototype.getParallelPoint_=function(t,e,i){var n=t.getFlatCoordinates(),s=0,a=n.length-2;n[s]>n[a]&&(s=a,a=0);var r=Math.max(e[0],n[s]),o=Math.min(e[2],n[a]),h=Object(T["a"])(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,r,o),l=n[s+1]+(n[a+1]-n[s+1])*(h-n[s])/(n[a]-n[s]),c=[h,l],u=this.parallelsLabels_[i].geom;return u.setCoordinates(c),u},e.prototype.getParallels=function(){return this.parallels_},e.prototype.updateProjectionInfo_=function(t){var e=Object(Ze["l"])("EPSG:4326"),i=t.getWorldExtent();this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0];var n=Object(Ze["n"])(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{var s=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(t,e,i){for(var a=i||2,r=n(t,e,a),o=0,h=r.length;o<h;o+=a)r[o]<s&&(r[o]+=360);return r}}this.fromLonLatTransform_=Object(Ze["n"])(e,t);var a=Object(S["a"])([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=a[0],this.maxX_=a[2],this.minY_=a[1],this.maxY_=a[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Object(S["x"])(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t},e}(si),Ri=Ii,Pi=i("2ef1"),ki=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ji='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',Ai=function(t){function e(e){var i,n=this,s=e||{};i=void 0!==s.attributions?s.attributions:[ji];var a=void 0!==s.crossOrigin?s.crossOrigin:"anonymous",r=void 0!==s.url?s.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return n=t.call(this,{attributions:i,attributionsCollapsible:!1,cacheSize:s.cacheSize,crossOrigin:a,imageSmoothing:s.imageSmoothing,maxZoom:void 0!==s.maxZoom?s.maxZoom:19,opaque:void 0===s.opaque||s.opaque,reprojectionErrorThreshold:s.reprojectionErrorThreshold,tileLoadFunction:s.tileLoadFunction,transition:s.transition,url:r,wrapX:s.wrapX,zDirection:s.zDirection})||this,n}return ki(e,t),e}(Pi["a"]),Ni=Ai,Fi=i("5eee"),Di=i("a2c7"),Gi=i("480c"),Bi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wi=function(t){function e(e){var i=this,n=e||{};return i=t.call(this,{opaque:!1,projection:n.projection,tileGrid:n.tileGrid,wrapX:void 0===n.wrapX||n.wrapX,zDirection:n.zDirection,url:n.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,e){var n=t.getTileCoord()[0],s=Object(q["c"])(i.tileGrid.getTileSize(n)),a=Object(U["a"])(s[0],s[1]);a.strokeStyle="grey",a.strokeRect(.5,.5,s[0]+.5,s[1]+.5),a.fillStyle="grey",a.strokeStyle="white",a.textAlign="center",a.textBaseline="middle",a.font="24px sans-serif",a.lineWidth=4,a.strokeText(e,s[0]/2,s[1]/2,s[0]),a.fillText(e,s[0]/2,s[1]/2,s[0]),t.setImage(a.canvas)}})||this,i}return Bi(e,t),e}(Pi["a"]),qi=Wi,zi=i("9c78"),Xi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yi=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',ji],Vi={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},Ui={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},Hi=function(t){function e(e){var i=this,n=e.layer.indexOf("-"),s=-1==n?e.layer:e.layer.slice(0,n),a=Ui[s],r=Vi[e.layer],o=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+r.extension;return i=t.call(this,{attributions:Yi,cacheSize:e.cacheSize,crossOrigin:"anonymous",imageSmoothing:e.imageSmoothing,maxZoom:void 0!=e.maxZoom?e.maxZoom:a.maxZoom,minZoom:void 0!=e.minZoom?e.minZoom:a.minZoom,opaque:r.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:o,wrapX:e.wrapX,zDirection:e.zDirection})||this,i}return Xi(e,t),e}(Pi["a"]),Ji=Hi,Ki=i("f5dd"),Zi=i("fced"),Qi=i("c15b");function $i(t){var e,i,n=Object.keys(t.defs),s=n.length;for(e=0;e<s;++e){var a=n[e];if(!Object(Ze["l"])(a)){var r=t.defs(a),o=r.units;o||"longlat"!==r.projName||(o=Zi["b"].DEGREES),Object(Ze["d"])(new Ki["a"]({code:a,axisOrientation:r.axis,metersPerUnit:r.to_meter,units:o}))}}for(e=0;e<s;++e){var h=n[e],l=Object(Ze["l"])(h);for(i=0;i<s;++i){var c=n[i],u=Object(Ze["l"])(c);if(!Object(Qi["c"])(h,c))if(t.defs[h]===t.defs[c])Object(Ze["c"])([l,u]);else{var p=t(h,c);Object(Ze["b"])(l,u,Object(Ze["f"])(l,u,p.forward),Object(Ze["f"])(u,l,p.inverse))}}}}var tn=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]},en=1,nn=2,sn=3,an=4,rn=5,on=6378137,hn=6356752.314,ln=.0066943799901413165,cn=484813681109536e-20,un=Math.PI/2,pn=.16666666666666666,fn=.04722222222222222,dn=.022156084656084655,_n=1e-10,gn=.017453292519943295,mn=57.29577951308232,yn=Math.PI/4,vn=2*Math.PI,xn=3.14159265359,Mn={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},bn={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Sn=/[\s_\-\/\(\)]/g;function On(t,e){if(t[e])return t[e];var i,n,s=Object.keys(t),a=e.toLowerCase().replace(Sn,""),r=-1;while(++r<s.length)if(i=s[r],n=i.toLowerCase().replace(Sn,""),n===a)return t[i]}var wn=function(t){var e,i,n,s={},a=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var i=e.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t}),{}),r={proj:"projName",datum:"datumCode",rf:function(t){s.rf=parseFloat(t)},lat_0:function(t){s.lat0=t*gn},lat_1:function(t){s.lat1=t*gn},lat_2:function(t){s.lat2=t*gn},lat_ts:function(t){s.lat_ts=t*gn},lon_0:function(t){s.long0=t*gn},lon_1:function(t){s.long1=t*gn},lon_2:function(t){s.long2=t*gn},alpha:function(t){s.alpha=parseFloat(t)*gn},gamma:function(t){s.rectified_grid_angle=parseFloat(t)},lonc:function(t){s.longc=t*gn},x_0:function(t){s.x0=parseFloat(t)},y_0:function(t){s.y0=parseFloat(t)},k_0:function(t){s.k0=parseFloat(t)},k:function(t){s.k0=parseFloat(t)},a:function(t){s.a=parseFloat(t)},b:function(t){s.b=parseFloat(t)},r_a:function(){s.R_A=!0},zone:function(t){s.zone=parseInt(t,10)},south:function(){s.utmSouth=!0},towgs84:function(t){s.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){s.to_meter=parseFloat(t)},units:function(t){s.units=t;var e=On(bn,t);e&&(s.to_meter=e.to_meter)},from_greenwich:function(t){s.from_greenwich=t*gn},pm:function(t){var e=On(Mn,t);s.from_greenwich=(e||parseFloat(t))*gn},nadgrids:function(t){"@null"===t?s.datumCode="none":s.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(s.axis=t)},approx:function(){s.approx=!0}};for(e in a)i=a[e],e in r?(n=r[e],"function"===typeof n?n(i):s[n]=i):s[e]=i;return"string"===typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s},En=Gn,Cn=1,Ln=2,Tn=3,In=4,Rn=5,Pn=-1,kn=/\s/,jn=/[A-Za-z]/,An=/[A-Za-z84]/,Nn=/[,\]]/,Fn=/[\d\.E\-\+]/;function Dn(t){if("string"!==typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Cn}function Gn(t){var e=new Dn(t);return e.output()}function Bn(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=e?{}:t,s=i.reduce((function(t,e){return Wn(e,t),t}),n);e&&(t[e]=s)}function Wn(t,e){if(Array.isArray(t)){var i=t.shift();if("PARAMETER"===i&&(i=t.shift()),1===t.length)return Array.isArray(t[0])?(e[i]={},void Wn(t[0],e[i])):void(e[i]=t[0]);if(t.length)if("TOWGS84"!==i){if("AXIS"===i)return i in e||(e[i]=[]),void e[i].push(t);var n;switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&Wn(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&Wn(t[3],e[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Bn(e,i,t);default:n=-1;while(++n<t.length)if(!Array.isArray(t[n]))return Wn(t,e[i]);return Bn(e,i,t)}}else e[i]=t;else e[i]=!0}else e[t]=!0}Dn.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==In)while(kn.test(t)){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Cn:return this.neutral(t);case Ln:return this.keyword(t);case In:return this.quoted(t);case Rn:return this.afterquote(t);case Tn:return this.number(t);case Pn:return}},Dn.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=In);if(Nn.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},Dn.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Cn)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Cn,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=Pn))):void 0},Dn.prototype.number=function(t){if(!Fn.test(t)){if(Nn.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},Dn.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=Rn},Dn.prototype.keyword=function(t){if(An.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=Cn)}if(!Nn.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},Dn.prototype.neutral=function(t){if(jn.test(t))return this.word=t,void(this.state=Ln);if('"'===t)return this.word="",void(this.state=In);if(Fn.test(t))return this.word=t,void(this.state=Tn);if(!Nn.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},Dn.prototype.output=function(){while(this.place<this.text.length)this.readCharicter();if(this.state===Pn)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var qn=.017453292519943295;function zn(t,e){var i=e[0],n=e[1];!(i in t)&&n in t&&(t[i]=t[n],3===e.length&&(t[i]=e[2](t[i])))}function Xn(t){return t*qn}function Yn(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",i=0,n=t.AXIS.length;i<n;++i){var s=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];-1!==s[0].indexOf("north")||("y"===s[0]||"lat"===s[0])&&"north"===s[1]?e+="n":-1!==s[0].indexOf("south")||("y"===s[0]||"lat"===s[0])&&"south"===s[1]?e+="s":-1!==s[0].indexOf("east")||("x"===s[0]||"lon"===s[0])&&"east"===s[1]?e+="e":-1===s[0].indexOf("west")&&("x"!==s[0]&&"lon"!==s[0]||"west"!==s[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;function r(e){var i=t.to_meter||1;return e*i}"GEOGCS"===t.type&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);var o=function(e){return zn(t,e)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Xn],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Xn],["x0","false_easting",r],["y0","false_northing",r],["long0","central_meridian",Xn],["lat0","latitude_of_origin",Xn],["lat0","standard_parallel_1",Xn],["lat1","standard_parallel_1",Xn],["lat2","standard_parallel_2",Xn],["azimuth","Azimuth"],["alpha","azimuth",Xn],["srsCode","name"]];h.forEach(o),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=Xn(t.lat1>0?90:-90),t.lat_ts=t.lat1)}var Vn=function(t){var e=En(t),i=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",i]);var s={};return Wn(e,s),Yn(s),s};function Un(t){var e=this;if(2===arguments.length){var i=arguments[1];"string"===typeof i?"+"===i.charAt(0)?Un[t]=wn(arguments[1]):Un[t]=Vn(arguments[1]):Un[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?Un.apply(e,t):Un(t)}));if("string"===typeof t){if(t in Un)return Un[t]}else"EPSG"in t?Un["EPSG:"+t.EPSG]=t:"ESRI"in t?Un["ESRI:"+t.ESRI]=t:"IAU2000"in t?Un["IAU2000:"+t.IAU2000]=t:console.log(t);return}}tn(Un);var Hn=Un;function Jn(t){return"string"===typeof t}function Kn(t){return t in Hn}var Zn=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Qn(t){return Zn.some((function(e){return t.indexOf(e)>-1}))}var $n=["3857","900913","3785","102113"];function ts(t){var e=On(t,"authority");if(e){var i=On(e,"epsg");return i&&$n.indexOf(i)>-1}}function es(t){var e=On(t,"extension");if(e)return On(e,"proj4")}function is(t){return"+"===t[0]}function ns(t){if(!Jn(t))return t;if(Kn(t))return Hn[t];if(Qn(t)){var e=Vn(t);if(ts(e))return Hn["EPSG:3857"];var i=es(e);return i?wn(i):e}return is(t)?wn(t):void 0}var ss=ns,as=function(t,e){var i,n;if(t=t||{},!e)return t;for(n in e)i=e[n],void 0!==i&&(t[n]=i);return t},rs=function(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)},os=function(t){return t<0?-1:1},hs=function(t){return Math.abs(t)<=xn?t:t-os(t)*vn},ls=function(t,e,i){var n=t*i,s=.5*t;return n=Math.pow((1-n)/(1+n),s),Math.tan(.5*(un-e))/n},cs=function(t,e){for(var i,n,s=.5*t,a=un-2*Math.atan(e),r=0;r<=15;r++)if(i=t*Math.sin(a),n=un-2*Math.atan(e*Math.pow((1-i)/(1+i),s))-a,a+=n,Math.abs(n)<=1e-10)return a;return-9999};function us(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=rs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function ps(t){var e,i,n=t.x,s=t.y;if(s*mn>90&&s*mn<-90&&n*mn>180&&n*mn<-180)return null;if(Math.abs(Math.abs(s)-un)<=_n)return null;if(this.sphere)e=this.x0+this.a*this.k0*hs(n-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(yn+.5*s));else{var a=Math.sin(s),r=ls(this.e,s,a);e=this.x0+this.a*this.k0*hs(n-this.long0),i=this.y0-this.a*this.k0*Math.log(r)}return t.x=e,t.y=i,t}function fs(t){var e,i,n=t.x-this.x0,s=t.y-this.y0;if(this.sphere)i=un-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var a=Math.exp(-s/(this.a*this.k0));if(i=cs(this.e,a),-9999===i)return null}return e=hs(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t}var ds=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],_s={init:us,forward:ps,inverse:fs,names:ds};function gs(){}function ms(t){return t}var ys=["longlat","identity"],vs={init:gs,forward:ms,inverse:ms,names:ys},xs=[_s,vs],Ms={},bs=[];function Ss(t,e){var i=bs.length;return t.names?(bs[i]=t,t.names.forEach((function(t){Ms[t.toLowerCase()]=i})),this):(console.log(e),!0)}function Os(t){if(!t)return!1;var e=t.toLowerCase();return"undefined"!==typeof Ms[e]&&bs[Ms[e]]?bs[Ms[e]]:void 0}function ws(){xs.forEach(Ss)}var Es={start:ws,add:Ss,get:Os},Cs={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Ls=Cs.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};function Ts(t,e,i,n){var s=t*t,a=e*e,r=(s-a)/s,o=0;n?(t*=1-r*(pn+r*(fn+r*dn)),s=t*t,r=0):o=Math.sqrt(r);var h=(s-a)/a;return{es:r,e:o,ep2:h}}function Is(t,e,i,n,s){if(!t){var a=On(Cs,n);a||(a=Ls),t=a.a,e=a.b,i=a.rf}return i&&!e&&(e=(1-1/i)*t),(0===i||Math.abs(t-e)<_n)&&(s=!0,e=t),{a:t,b:e,rf:i,sphere:s}}Cs.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Rs={};function Ps(t,e,i,n,s,a,r){var o={};return o.datum_type=void 0===t||"none"===t?rn:an,e&&(o.datum_params=e.map(parseFloat),0===o.datum_params[0]&&0===o.datum_params[1]&&0===o.datum_params[2]||(o.datum_type=en),o.datum_params.length>3&&(0===o.datum_params[3]&&0===o.datum_params[4]&&0===o.datum_params[5]&&0===o.datum_params[6]||(o.datum_type=nn,o.datum_params[3]*=cn,o.datum_params[4]*=cn,o.datum_params[5]*=cn,o.datum_params[6]=o.datum_params[6]/1e6+1))),r&&(o.datum_type=sn,o.grids=r),o.a=i,o.b=n,o.es=s,o.ep2=a,o}Rs.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},Rs.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},Rs.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},Rs.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},Rs.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},Rs.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},Rs.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},Rs.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},Rs.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},Rs.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},Rs.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},Rs.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},Rs.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},Rs.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},Rs.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},Rs.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},Rs.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var ks=Ps,js={};function As(t,e){var i=new DataView(e),n=Gs(i),s=Bs(i,n);s.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var a=qs(i,s,n),r={header:s,subgrids:a};return js[t]=r,r}function Ns(t){if(void 0===t)return null;var e=t.split(",");return e.map(Fs)}function Fs(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:js[t]||null,isNull:!1}}function Ds(t){return t/3600*Math.PI/180}function Gs(t){var e=t.getInt32(8,!1);return 11!==e&&(e=t.getInt32(8,!0),11!==e&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Bs(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Ws(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function Ws(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function qs(t,e,i){for(var n=176,s=[],a=0;a<e.nSubgrids;a++){var r=Xs(t,n,i),o=Ys(t,n,r,i),h=Math.round(1+(r.upperLongitude-r.lowerLongitude)/r.longitudeInterval),l=Math.round(1+(r.upperLatitude-r.lowerLatitude)/r.latitudeInterval);s.push({ll:[Ds(r.lowerLongitude),Ds(r.lowerLatitude)],del:[Ds(r.longitudeInterval),Ds(r.latitudeInterval)],lim:[h,l],count:r.gridNodeCount,cvs:zs(o)})}return s}function zs(t){return t.map((function(t){return[Ds(t.longitudeShift),Ds(t.latitudeShift)]}))}function Xs(t,e,i){return{name:Ws(t,e+8,e+16).trim(),parent:Ws(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function Ys(t,e,i,n){for(var s=e+176,a=16,r=[],o=0;o<i.gridNodeCount;o++){var h={latitudeShift:t.getFloat32(s+o*a,n),longitudeShift:t.getFloat32(s+o*a+4,n),latitudeAccuracy:t.getFloat32(s+o*a+8,n),longitudeAccuracy:t.getFloat32(s+o*a+12,n)};r.push(h)}return r}function Vs(t,e){if(!(this instanceof Vs))return new Vs(t);e=e||function(t){if(t)throw t};var i=ss(t);if("object"===typeof i){var n=Vs.projections.get(i.projName);if(n){if(i.datumCode&&"none"!==i.datumCode){var s=On(Rs,i.datumCode);s&&(i.datum_params=i.datum_params||(s.towgs84?s.towgs84.split(","):null),i.ellps=s.ellipse,i.datumName=s.datumName?s.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var a=Is(i.a,i.b,i.rf,i.ellps,i.sphere),r=Ts(a.a,a.b,a.rf,i.R_A),o=Ns(i.nadgrids),h=i.datum||ks(i.datumCode,i.datum_params,a.a,a.b,r.es,r.ep2,o);as(this,i),as(this,n),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=h,this.init(),e(null,this)}else e(t)}else e(t)}Vs.projections=Es,Vs.projections.start();var Us=Vs;function Hs(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===en?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==nn||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}function Js(t,e,i){var n,s,a,r,o=t.x,h=t.y,l=t.z?t.z:0;if(h<-un&&h>-1.001*un)h=-un;else if(h>un&&h<1.001*un)h=un;else{if(h<-un)return{x:-1/0,y:-1/0,z:t.z};if(h>un)return{x:1/0,y:1/0,z:t.z}}return o>Math.PI&&(o-=2*Math.PI),s=Math.sin(h),r=Math.cos(h),a=s*s,n=i/Math.sqrt(1-e*a),{x:(n+l)*r*Math.cos(o),y:(n+l)*r*Math.sin(o),z:(n*(1-e)+l)*s}}function Ks(t,e,i,n){var s,a,r,o,h,l,c,u,p,f,d,_,g,m,y,v,x=1e-12,M=x*x,b=30,S=t.x,O=t.y,w=t.z?t.z:0;if(s=Math.sqrt(S*S+O*O),a=Math.sqrt(S*S+O*O+w*w),s/i<x){if(m=0,a/i<x)return y=un,v=-n,{x:t.x,y:t.y,z:t.z}}else m=Math.atan2(O,S);r=w/a,o=s/a,h=1/Math.sqrt(1-e*(2-e)*o*o),u=o*(1-e)*h,p=r*h,g=0;do{g++,c=i/Math.sqrt(1-e*p*p),v=s*u+w*p-c*(1-e*p*p),l=e*c/(c+v),h=1/Math.sqrt(1-l*(2-l)*o*o),f=o*(1-l)*h,d=r*h,_=d*u-f*p,u=f,p=d}while(_*_>M&&g<b);return y=Math.atan(d/Math.abs(f)),{x:m,y:y,z:v}}function Zs(t,e,i){if(e===en)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(e===nn){var n=i[0],s=i[1],a=i[2],r=i[3],o=i[4],h=i[5],l=i[6];return{x:l*(t.x-h*t.y+o*t.z)+n,y:l*(h*t.x+t.y-r*t.z)+s,z:l*(-o*t.x+r*t.y+t.z)+a}}}function Qs(t,e,i){if(e===en)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(e===nn){var n=i[0],s=i[1],a=i[2],r=i[3],o=i[4],h=i[5],l=i[6],c=(t.x-n)/l,u=(t.y-s)/l,p=(t.z-a)/l;return{x:c+h*u-o*p,y:-h*c+u+r*p,z:o*c-r*u+p}}}function $s(t){return t===en||t===nn}var ta=function(t,e,i){if(Hs(t,e))return i;if(t.datum_type===rn||e.datum_type===rn)return i;var n=t.a,s=t.es;if(t.datum_type===sn){var a=ea(t,!1,i);if(0!==a)return;n=on,s=ln}var r=e.a,o=e.b,h=e.es;if(e.datum_type===sn&&(r=on,o=hn,h=ln),s===h&&n===r&&!$s(t.datum_type)&&!$s(e.datum_type))return i;if(i=Js(i,s,n),$s(t.datum_type)&&(i=Zs(i,t.datum_type,t.datum_params)),$s(e.datum_type)&&(i=Qs(i,e.datum_type,e.datum_params)),i=Ks(i,h,r,o),e.datum_type===sn){var l=ea(e,!0,i);if(0!==l)return}return i};function ea(t,e,i){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var n={x:-i.x,y:i.y},s={x:Number.NaN,y:Number.NaN},a=[],r=0;r<t.grids.length;r++){var o=t.grids[r];if(a.push(o.name),o.isNull){s=n;break}if(o.mandatory,null!==o.grid){var h=o.grid.subgrids[0],l=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,c=h.ll[0]-l,u=h.ll[1]-l,p=h.ll[0]+(h.lim[0]-1)*h.del[0]+l,f=h.ll[1]+(h.lim[1]-1)*h.del[1]+l;if(!(u>n.y||c>n.x||f<n.y||p<n.x)&&(s=ia(n,e,h),!isNaN(s.x)))break}else if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*mn+" "+n.y*mn+" tried: '"+a+"'"),-1):(i.x=-s.x,i.y=s.y,0)}function ia(t,e,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var s={x:t.x,y:t.y};s.x-=i.ll[0],s.y-=i.ll[1],s.x=hs(s.x-Math.PI)+Math.PI;var a=na(s,i);if(e){if(isNaN(a.x))return n;a.x=s.x-a.x,a.y=s.y-a.y;var r,o,h=9,l=1e-12;do{if(o=na(a,i),isNaN(o.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}r={x:s.x-(o.x+a.x),y:s.y-(o.y+a.y)},a.x+=r.x,a.y+=r.y}while(h--&&Math.abs(r.x)>l&&Math.abs(r.y)>l);if(h<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=hs(a.x+i.ll[0]),n.y=a.y+i.ll[1]}else isNaN(a.x)||(n.x=t.x+a.x,n.y=t.y+a.y);return n}function na(t,e){var i,n={x:t.x/e.del[0],y:t.y/e.del[1]},s={x:Math.floor(n.x),y:Math.floor(n.y)},a={x:n.x-1*s.x,y:n.y-1*s.y},r={x:Number.NaN,y:Number.NaN};if(s.x<0||s.x>=e.lim[0])return r;if(s.y<0||s.y>=e.lim[1])return r;i=s.y*e.lim[0]+s.x;var o={x:e.cvs[i][0],y:e.cvs[i][1]};i++;var h={x:e.cvs[i][0],y:e.cvs[i][1]};i+=e.lim[0];var l={x:e.cvs[i][0],y:e.cvs[i][1]};i--;var c={x:e.cvs[i][0],y:e.cvs[i][1]},u=a.x*a.y,p=a.x*(1-a.y),f=(1-a.x)*(1-a.y),d=(1-a.x)*a.y;return r.x=f*o.x+p*h.x+d*c.x+u*l.x,r.y=f*o.y+p*h.y+d*c.y+u*l.y,r}var sa=function(t,e,i){var n,s,a,r=i.x,o=i.y,h=i.z||0,l={};for(a=0;a<3;a++)if(!e||2!==a||void 0!==i.z)switch(0===a?(n=r,s=-1!=="ew".indexOf(t.axis[a])?"x":"y"):1===a?(n=o,s=-1!=="ns".indexOf(t.axis[a])?"y":"x"):(n=h,s="z"),t.axis[a]){case"e":l[s]=n;break;case"w":l[s]=-n;break;case"n":l[s]=n;break;case"s":l[s]=-n;break;case"u":void 0!==i[s]&&(l.z=n);break;case"d":void 0!==i[s]&&(l.z=-n);break;default:return null}return l},aa=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},ra=function(t){oa(t.x),oa(t.y)};function oa(t){if("function"===typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!==typeof t||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function ha(t,e){return(t.datum.datum_type===en||t.datum.datum_type===nn)&&"WGS84"!==e.datumCode||(e.datum.datum_type===en||e.datum.datum_type===nn)&&"WGS84"!==t.datumCode}function la(t,e,i,n){var s;if(Array.isArray(i)&&(i=aa(i)),ra(i),t.datum&&e.datum&&ha(t,e)&&(s=new Us("WGS84"),i=la(t,s,i,n),t=s),n&&"enu"!==t.axis&&(i=sa(t,!1,i)),"longlat"===t.projName)i={x:i.x*gn,y:i.y*gn,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),i=t.inverse(i),!i)return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=ta(t.datum,e.datum,i),i)return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),"longlat"===e.projName?i={x:i.x*mn,y:i.y*mn,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),n&&"enu"!==e.axis?sa(e,!0,i):i}var ca=Us("WGS84");function ua(t,e,i,n){var s,a,r;return Array.isArray(i)?(s=la(t,e,i,n)||{x:NaN,y:NaN},i.length>2?"undefined"!==typeof t.name&&"geocent"===t.name||"undefined"!==typeof e.name&&"geocent"===e.name?"number"===typeof s.z?[s.x,s.y,s.z].concat(i.splice(3)):[s.x,s.y,i[2]].concat(i.splice(3)):[s.x,s.y].concat(i.splice(2)):[s.x,s.y]):(a=la(t,e,i,n),r=Object.keys(i),2===r.length||r.forEach((function(n){if("undefined"!==typeof t.name&&"geocent"===t.name||"undefined"!==typeof e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;a[n]=i[n]})),a)}function pa(t){return t instanceof Us?t:t.oProj?t.oProj:Us(t)}function fa(t,e,i){t=pa(t);var n,s=!1;return"undefined"===typeof e?(e=t,t=ca,s=!0):("undefined"!==typeof e.x||Array.isArray(e))&&(i=e,e=t,t=ca,s=!0),e=pa(e),i?ua(t,e,i):(n={forward:function(i,n){return ua(t,e,i,n)},inverse:function(i,n){return ua(e,t,i,n)}},s&&(n.oProj=e),n)}var da=fa,_a=6,ga="AJSAJS",ma="AFAFAF",ya=65,va=73,xa=79,Ma=86,ba=90,Sa={forward:Oa,inverse:wa,toPoint:Ea};function Oa(t,e){return e=e||5,Pa(Ta({lat:t[1],lon:t[0]}),e)}function wa(t){var e=Ia(Na(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function Ea(t){var e=Ia(Na(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Ca(t){return t*(Math.PI/180)}function La(t){return t/Math.PI*180}function Ta(t){var e,i,n,s,a,r,o,h,l,c=t.lat,u=t.lon,p=6378137,f=.00669438,d=.9996,_=Ca(c),g=Ca(u);l=Math.floor((u+180)/6)+1,180===u&&(l=60),c>=56&&c<64&&u>=3&&u<12&&(l=32),c>=72&&c<84&&(u>=0&&u<9?l=31:u>=9&&u<21?l=33:u>=21&&u<33?l=35:u>=33&&u<42&&(l=37)),e=6*(l-1)-180+3,h=Ca(e),i=f/(1-f),n=p/Math.sqrt(1-f*Math.sin(_)*Math.sin(_)),s=Math.tan(_)*Math.tan(_),a=i*Math.cos(_)*Math.cos(_),r=Math.cos(_)*(g-h),o=p*((1-f/4-3*f*f/64-5*f*f*f/256)*_-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*_)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*_)-35*f*f*f/3072*Math.sin(6*_));var m=d*n*(r+(1-s+a)*r*r*r/6+(5-18*s+s*s+72*a-58*i)*r*r*r*r*r/120)+5e5,y=d*(o+n*Math.tan(_)*(r*r/2+(5-s+9*a+4*a*a)*r*r*r*r/24+(61-58*s+s*s+600*a-330*i)*r*r*r*r*r*r/720));return c<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(m),zoneNumber:l,zoneLetter:Ra(c)}}function Ia(t){var e=t.northing,i=t.easting,n=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var a,r,o,h,l,c,u,p,f,d,_=.9996,g=6378137,m=.00669438,y=(1-Math.sqrt(1-m))/(1+Math.sqrt(1-m)),v=i-5e5,x=e;n<"N"&&(x-=1e7),p=6*(s-1)-180+3,a=m/(1-m),u=x/_,f=u/(g*(1-m/4-3*m*m/64-5*m*m*m/256)),d=f+(3*y/2-27*y*y*y/32)*Math.sin(2*f)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*f)+151*y*y*y/96*Math.sin(6*f),r=g/Math.sqrt(1-m*Math.sin(d)*Math.sin(d)),o=Math.tan(d)*Math.tan(d),h=a*Math.cos(d)*Math.cos(d),l=g*(1-m)/Math.pow(1-m*Math.sin(d)*Math.sin(d),1.5),c=v/(r*_);var M=d-r*Math.tan(d)/l*(c*c/2-(5+3*o+10*h-4*h*h-9*a)*c*c*c*c/24+(61+90*o+298*h+45*o*o-252*a-3*h*h)*c*c*c*c*c*c/720);M=La(M);var b,S=(c-(1+2*o+h)*c*c*c/6+(5-2*h+28*o-3*h*h+8*a+24*o*o)*c*c*c*c*c/120)/Math.cos(d);if(S=p+La(S),t.accuracy){var O=Ia({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:O.lat,right:O.lon,bottom:M,left:S}}else b={lat:M,lon:S};return b}function Ra(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Pa(t,e){var i="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+ka(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,e)+n.substr(n.length-5,e)}function ka(t,e,i){var n=ja(i),s=Math.floor(t/1e5),a=Math.floor(e/1e5)%20;return Aa(s,a,n)}function ja(t){var e=t%_a;return 0===e&&(e=_a),e}function Aa(t,e,i){var n=i-1,s=ga.charCodeAt(n),a=ma.charCodeAt(n),r=s+t-1,o=a+e,h=!1;r>ba&&(r=r-ba+ya-1,h=!0),(r===va||s<va&&r>va||(r>va||s<va)&&h)&&r++,(r===xa||s<xa&&r>xa||(r>xa||s<xa)&&h)&&(r++,r===va&&r++),r>ba&&(r=r-ba+ya-1),o>Ma?(o=o-Ma+ya-1,h=!0):h=!1,(o===va||a<va&&o>va||(o>va||a<va)&&h)&&o++,(o===xa||a<xa&&o>xa||(o>xa||a<xa)&&h)&&(o++,o===va&&o++),o>Ma&&(o=o-Ma+ya-1);var l=String.fromCharCode(r)+String.fromCharCode(o);return l}function Na(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";var e,i=t.length,n=null,s="",a=0;while(!/[A-Z]/.test(e=t.charAt(a))){if(a>=2)throw"MGRSPoint bad conversion from: "+t;s+=e,a++}var r=parseInt(s,10);if(0===a||a+3>i)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(a++);if(o<="A"||"B"===o||"Y"===o||o>="Z"||"I"===o||"O"===o)throw"MGRSPoint zone letter "+o+" not handled: "+t;n=t.substring(a,a+=2);var h=ja(r),l=Fa(n.charAt(0),h),c=Da(n.charAt(1),h);while(c<Ga(o))c+=2e6;var u=i-a;if(u%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var p,f,d,_,g,m=u/2,y=0,v=0;return m>0&&(p=1e5/Math.pow(10,m),f=t.substring(a,a+m),y=parseFloat(f)*p,d=t.substring(a+m),v=parseFloat(d)*p),_=y+l,g=v+c,{easting:_,northing:g,zoneLetter:o,zoneNumber:r,accuracy:p}}function Fa(t,e){var i=ga.charCodeAt(e-1),n=1e5,s=!1;while(i!==t.charCodeAt(0)){if(i++,i===va&&i++,i===xa&&i++,i>ba){if(s)throw"Bad character: "+t;i=ya,s=!0}n+=1e5}return n}function Da(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var i=ma.charCodeAt(e-1),n=0,s=!1;while(i!==t.charCodeAt(0)){if(i++,i===va&&i++,i===xa&&i++,i>Ma){if(s)throw"Bad character: "+t;i=ya,s=!0}n+=1e5}return n}function Ga(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Ba(t,e,i){if(!(this instanceof Ba))return new Ba(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"===typeof t&&"undefined"===typeof e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ba.fromMGRS=function(t){return new Ba(Ea(t))},Ba.prototype.toMGRS=function(t){return Oa([this.x,this.y],t)};var Wa=Ba,qa=1,za=.25,Xa=.046875,Ya=.01953125,Va=.01068115234375,Ua=.75,Ha=.46875,Ja=.013020833333333334,Ka=.007120768229166667,Za=.3645833333333333,Qa=.005696614583333333,$a=.3076171875,tr=function(t){var e=[];e[0]=qa-t*(za+t*(Xa+t*(Ya+t*Va))),e[1]=t*(Ua-t*(Xa+t*(Ya+t*Va)));var i=t*t;return e[2]=i*(Ha-t*(Ja+t*Ka)),i*=t,e[3]=i*(Za-t*Qa),e[4]=i*t*$a,e},er=function(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))},ir=20,nr=function(t,e,i){for(var n=1/(1-e),s=t,a=ir;a;--a){var r=Math.sin(s),o=1-e*r*r;if(o=(er(s,r,Math.cos(s),i)-t)*(o*Math.sqrt(o))*n,s-=o,Math.abs(o)<_n)return s}return s};function sr(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=tr(this.es),this.ml0=er(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function ar(t){var e,i,n,s=t.x,a=t.y,r=hs(s-this.long0),o=Math.sin(a),h=Math.cos(a);if(this.es){var l=h*r,c=Math.pow(l,2),u=this.ep2*Math.pow(h,2),p=Math.pow(u,2),f=Math.abs(h)>_n?Math.tan(a):0,d=Math.pow(f,2),_=Math.pow(d,2);e=1-this.es*Math.pow(o,2),l/=Math.sqrt(e);var g=er(a,o,h,this.en);i=this.a*(this.k0*l*(1+c/6*(1-d+u+c/20*(5-18*d+_+14*u-58*d*u+c/42*(61+179*_-_*d-479*d)))))+this.x0,n=this.a*(this.k0*(g-this.ml0+o*r*l/2*(1+c/12*(5-d+9*u+4*p+c/30*(61+_-58*d+270*u-330*d*u+c/56*(1385+543*_-_*d-3111*d))))))+this.y0}else{var m=h*Math.sin(r);if(Math.abs(Math.abs(m)-1)<_n)return 93;if(i=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,n=h*Math.cos(r)/Math.sqrt(1-Math.pow(m,2)),m=Math.abs(n),m>=1){if(m-1>_n)return 93;n=0}else n=Math.acos(n);a<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=i,t.y=n,t}function rr(t){var e,i,n,s,a=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+r/this.k0,i=nr(e,this.es,this.en),Math.abs(i)<un){var o=Math.sin(i),h=Math.cos(i),l=Math.abs(h)>_n?Math.tan(i):0,c=this.ep2*Math.pow(h,2),u=Math.pow(c,2),p=Math.pow(l,2),f=Math.pow(p,2);e=1-this.es*Math.pow(o,2);var d=a*Math.sqrt(e)/this.k0,_=Math.pow(d,2);e*=l,n=i-e*_/(1-this.es)*.5*(1-_/12*(5+3*p-9*c*p+c-4*u-_/30*(61+90*p-252*c*p+45*f+46*c-_/56*(1385+3633*p+4095*f+1574*f*p)))),s=hs(this.long0+d*(1-_/6*(1+2*p+c-_/20*(5+28*p+24*f+8*c*p+6*c-_/42*(61+662*p+1320*f+720*f*p))))/h)}else n=un*os(r),s=0;else{var g=Math.exp(a/this.k0),m=.5*(g-1/g),y=this.lat0+r/this.k0,v=Math.cos(y);e=Math.sqrt((1-Math.pow(v,2))/(1+Math.pow(m,2))),n=Math.asin(e),r<0&&(n=-n),s=0===m&&0===v?0:hs(Math.atan2(m,v)+this.long0)}return t.x=s,t.y=n,t}var or=["Fast_Transverse_Mercator","Fast Transverse Mercator"],hr={init:sr,forward:ar,inverse:rr,names:or},lr=function(t){var e=Math.exp(t);return e=(e-1/e)/2,e},cr=function(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),n=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))},ur=function(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i},pr=function(t){var e=Math.abs(t);return e=ur(e*(1+e/(cr(1,e)+1))),t<0?-e:e},fr=function(t,e){var i,n=2*Math.cos(2*e),s=t.length-1,a=t[s],r=0;while(--s>=0)i=n*a-r+t[s],r=a,a=i;return e+i*Math.sin(2*e)},dr=function(t,e){var i,n=2*Math.cos(e),s=t.length-1,a=t[s],r=0;while(--s>=0)i=n*a-r+t[s],r=a,a=i;return Math.sin(e)*i},_r=function(t){var e=Math.exp(t);return e=(e+1/e)/2,e},gr=function(t,e,i){var n,s,a=Math.sin(e),r=Math.cos(e),o=lr(i),h=_r(i),l=2*r*h,c=-2*a*o,u=t.length-1,p=t[u],f=0,d=0,_=0;while(--u>=0)n=d,s=f,d=p,f=_,p=l*d-n-c*f+t[u],_=c*d-s+l*f;return l=a*h,c=r*o,[l*p-c*_,l*_+c*p]};function mr(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(hr.init.apply(this),this.forward=hr.forward,this.inverse=hr.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),i*=e,this.cgb[1]=i*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i*=e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),i*=e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),i*=e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i*=e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),i*=e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i*=e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i*=e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i*=e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var n=fr(this.cbg,this.lat0);this.Zb=-this.Qn*(n+dr(this.gtu,2*n))}function yr(t){var e=hs(t.x-this.long0),i=t.y;i=fr(this.cbg,i);var n=Math.sin(i),s=Math.cos(i),a=Math.sin(e),r=Math.cos(e);i=Math.atan2(n,r*s),e=Math.atan2(a*s,cr(n,s*r)),e=pr(Math.tan(e));var o,h,l=gr(this.gtu,2*i,2*e);return i+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(o=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*i+this.Zb)+this.y0):(o=1/0,h=1/0),t.x=o,t.y=h,t}function vr(t){var e,i,n=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(s=(s-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var a=gr(this.utg,2*s,2*n);s+=a[0],n+=a[1],n=Math.atan(lr(n));var r=Math.sin(s),o=Math.cos(s),h=Math.sin(n),l=Math.cos(n);s=Math.atan2(r*l,cr(h,l*o)),n=Math.atan2(h,l*o),e=hs(n+this.long0),i=fr(this.cgb,s)}else e=1/0,i=1/0;return t.x=e,t.y=i,t}var xr=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"],Mr={init:mr,forward:yr,inverse:vr,names:xr},br=function(t,e){if(void 0===t){if(t=Math.floor(30*(hs(e)+Math.PI)/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t},Sr="etmerc";function Or(){var t=br(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*gn,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Mr.init.apply(this),this.forward=Mr.forward,this.inverse=Mr.inverse}var wr=["Universal Transverse Mercator System","utm"],Er={init:Or,names:wr,dependsOn:Sr},Cr=function(t,e){return Math.pow((1-t)/(1+t),e)},Lr=20;function Tr(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+yn)/(Math.pow(Math.tan(.5*this.lat0+yn),this.C)*Cr(this.e*t,this.ratexp))}function Ir(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+yn),this.C)*Cr(this.e*Math.sin(i),this.ratexp))-un,t.x=this.C*e,t}function Rr(t){for(var e=1e-14,i=t.x/this.C,n=t.y,s=Math.pow(Math.tan(.5*n+yn)/this.K,1/this.C),a=Lr;a>0;--a){if(n=2*Math.atan(s*Cr(this.e*Math.sin(t.y),-.5*this.e))-un,Math.abs(n-t.y)<e)break;t.y=n}return a?(t.x=i,t.y=n,t):null}var Pr=["gauss"],kr={init:Tr,forward:Ir,inverse:Rr,names:Pr};function jr(){kr.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Ar(t){var e,i,n,s;return t.x=hs(t.x-this.long0),kr.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n),t.x=s*i*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Nr(t){var e,i,n,s,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=Math.sqrt(t.x*t.x+t.y*t.y)){var r=2*Math.atan2(a,this.R2);e=Math.sin(r),i=Math.cos(r),s=Math.asin(i*this.sinc0+t.y*e*this.cosc0/a),n=Math.atan2(t.x*e,a*this.cosc0*i-t.y*this.sinc0*e)}else s=this.phic0,n=0;return t.x=n,t.y=s,kr.inverse.apply(this,[t]),t.x=hs(t.x+this.long0),t}var Fr=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],Dr={init:jr,forward:Ar,inverse:Nr,names:Fr};function Gr(t,e,i){return e*=i,Math.tan(.5*(un+t))*Math.pow((1-e)/(1+e),.5*i)}function Br(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=_n&&(this.k0=.5*(1+os(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=_n&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=_n&&(this.k0=.5*this.cons*rs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ls(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=rs(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-un,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Wr(t){var e,i,n,s,a,r,o=t.x,h=t.y,l=Math.sin(h),c=Math.cos(h),u=hs(o-this.long0);return Math.abs(Math.abs(o-this.long0)-Math.PI)<=_n&&Math.abs(h+this.lat0)<=_n?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(u)),t.x=this.a*e*c*Math.sin(u)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(u))+this.y0,t):(i=2*Math.atan(this.ssfn_(h,l,this.e))-un,s=Math.cos(i),n=Math.sin(i),Math.abs(this.coslat0)<=_n?(a=ls(this.e,h*this.con,this.con*l),r=2*this.a*this.k0*a/this.cons,t.x=this.x0+r*Math.sin(o-this.long0),t.y=this.y0-this.con*r*Math.cos(o-this.long0),t):(Math.abs(this.sinlat0)<_n?(e=2*this.a*this.k0/(1+s*Math.cos(u)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*s*Math.cos(u))),t.y=e*(this.cosX0*n-this.sinX0*s*Math.cos(u))+this.y0),t.x=e*s*Math.sin(u)+this.x0,t))}function qr(t){var e,i,n,s,a;t.x-=this.x0,t.y-=this.y0;var r=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var o=2*Math.atan(r/(2*this.a*this.k0));return e=this.long0,i=this.lat0,r<=_n?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(o)*this.sinlat0+t.y*Math.sin(o)*this.coslat0/r),e=Math.abs(this.coslat0)<_n?this.lat0>0?hs(this.long0+Math.atan2(t.x,-1*t.y)):hs(this.long0+Math.atan2(t.x,t.y)):hs(this.long0+Math.atan2(t.x*Math.sin(o),r*this.coslat0*Math.cos(o)-t.y*this.sinlat0*Math.sin(o))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=_n){if(r<=_n)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,n=r*this.cons/(2*this.a*this.k0),i=this.con*cs(this.e,n),e=this.con*hs(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,r<=_n?a=this.X0:(a=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/r),e=hs(this.long0+Math.atan2(t.x*Math.sin(s),r*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),i=-1*cs(this.e,Math.tan(.5*(un+a)));return t.x=e,t.y=i,t}var zr=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],Xr={init:Br,forward:Wr,inverse:qr,names:zr,ssfn_:Gr};function Yr(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=this.rf,s=1/n,a=2*s-Math.pow(s,2),r=this.e=Math.sqrt(a);this.R=this.k0*i*Math.sqrt(1-a)/(1-a*Math.pow(e,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+r*e)/(1-r*e));this.K=o-this.alpha*h+this.alpha*r/2*l}function Vr(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,s=2*(Math.atan(Math.exp(n))-Math.PI/4),a=this.alpha*(t.x-this.lambda0),r=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(a))),o=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(a));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*r+this.x0,t}function Ur(t){var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,s=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(n)),r=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(s))),o=this.lambda0+r/this.alpha,h=0,l=a,c=-1e3,u=0;while(Math.abs(l-c)>1e-7){if(++u>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=o,t.y=l,t}var Hr=["somerc"],Jr={init:Yr,forward:Vr,inverse:Ur,names:Hr},Kr=1e-7;function Zr(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i="object"===typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==e.indexOf(i)}function Qr(){var t,e,i,n,s,a,r,o,h,l,c,u=0,p=0,f=0,d=0,_=0,g=0,m=0;this.no_off=Zr(this),this.no_rot="no_rot"in this;var y=!1;"alpha"in this&&(y=!0);var v=!1;if("rectified_grid_angle"in this&&(v=!0),y&&(m=this.alpha),v&&(u=this.rectified_grid_angle*gn),y||v)p=this.longc;else if(f=this.long1,_=this.lat1,d=this.long2,g=this.lat2,Math.abs(_-g)<=Kr||(t=Math.abs(_))<=Kr||Math.abs(t-un)<=Kr||Math.abs(Math.abs(this.lat0)-un)<=Kr||Math.abs(Math.abs(g)-un)<=Kr)throw new Error;var x=1-this.es;e=Math.sqrt(x),Math.abs(this.lat0)>_n?(o=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*o*o,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/x),this.A=this.B*this.k0*e/t,n=this.B*e/(i*Math.sqrt(t)),s=n*n-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=n,this.E*=Math.pow(ls(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=s=1),y||v?(y?(c=Math.asin(Math.sin(m)/n),v||(u=m)):(c=u,m=Math.asin(n*Math.sin(c))),this.lam0=p-Math.asin(.5*(s-1/s)*Math.tan(c))/this.B):(a=Math.pow(ls(this.e,_,Math.sin(_)),this.B),r=Math.pow(ls(this.e,g,Math.sin(g)),this.B),s=this.E/a,h=(r-a)/(r+a),l=this.E*this.E,l=(l-r*a)/(l+r*a),t=f-d,t<-Math.pi?d-=vn:t>Math.pi&&(d+=vn),this.lam0=hs(.5*(f+d)-Math.atan(l*Math.tan(.5*this.B*(f-d))/h)/this.B),c=Math.atan(2*Math.sin(this.B*hs(f-this.lam0))/(s-1/s)),u=m=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(m))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(yn-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(yn+s))}function $r(t){var e,i,n,s,a,r,o,h,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-un)>_n){if(a=this.E/Math.pow(ls(this.e,t.y,Math.sin(t.y)),this.B),r=1/a,e=.5*(a-r),i=.5*(a+r),s=Math.sin(this.B*t.x),n=(e*this.singam-s*this.cosgam)/i,Math.abs(Math.abs(n)-1)<_n)throw new Error;h=.5*this.ArB*Math.log((1-n)/(1+n)),r=Math.cos(this.B*t.x),o=Math.abs(r)<Kr?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+s*this.singam,r)}else h=t.y>0?this.v_pole_n:this.v_pole_s,o=this.ArB*t.y;return this.no_rot?(l.x=o,l.y=h):(o-=this.u_0,l.x=h*this.cosrot+o*this.sinrot,l.y=o*this.cosrot-h*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l}function to(t){var e,i,n,s,a,r,o,h={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*i),s=.5*(n-1/n),a=.5*(n+1/n),r=Math.sin(this.BrA*e),o=(r*this.cosgam+s*this.singam)/a,Math.abs(Math.abs(o)-1)<_n)h.x=0,h.y=o<0?-un:un;else{if(h.y=this.E/Math.sqrt((1+o)/(1-o)),h.y=cs(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(s*this.cosgam-r*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h}var eo=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],io={init:Qr,forward:$r,inverse:to,names:eo};function no(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<_n)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=rs(this.e,e,i),s=ls(this.e,this.lat1,e),a=Math.sin(this.lat2),r=Math.cos(this.lat2),o=rs(this.e,a,r),h=ls(this.e,this.lat2,a),l=ls(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>_n?this.ns=Math.log(n/o)/Math.log(s/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function so(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=_n&&(i=os(i)*(un-2*_n));var n,s,a=Math.abs(Math.abs(i)-un);if(a>_n)n=ls(this.e,i,Math.sin(i)),s=this.a*this.f0*Math.pow(n,this.ns);else{if(a=i*this.ns,a<=0)return null;s=0}var r=this.ns*hs(e-this.long0);return t.x=this.k0*(s*Math.sin(r))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(r))+this.y0,t}function ao(t){var e,i,n,s,a,r=(t.x-this.x0)/this.k0,o=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(r*r+o*o),i=1):(e=-Math.sqrt(r*r+o*o),i=-1);var h=0;if(0!==e&&(h=Math.atan2(i*r,i*o)),0!==e||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),s=cs(this.e,n),-9999===s)return null}else s=-un;return a=hs(h/this.ns+this.long0),t.x=a,t.y=s,t}var ro=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"],oo={init:no,forward:so,inverse:ao,names:ro};function ho(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function lo(t){var e,i,n,s,a,r,o,h=t.x,l=t.y,c=hs(h-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),a=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(s)),r=this.n*a,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=o*Math.cos(r)/1,t.x=o*Math.sin(r)/1,this.czech||(t.y*=-1,t.x*=-1),t}function co(t){var e,i,n,s,a,r,o,h,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),r=Math.sqrt(t.x*t.x+t.y*t.y),a=Math.atan2(t.y,t.x),s=a/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(s)),i=Math.asin(Math.cos(n)*Math.sin(s)/Math.cos(e)),t.x=this.long0-i/this.alfa,o=e,h=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(h=1),o=t.y,c+=1}while(0===h&&c<15);return c>=15?null:t}var uo=["Krovak","krovak"],po={init:ho,forward:lo,inverse:co,names:uo},fo=function(t,e,i,n,s){return t*s-e*Math.sin(2*s)+i*Math.sin(4*s)-n*Math.sin(6*s)},_o=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},go=function(t){return.375*t*(1+.25*t*(1+.46875*t))},mo=function(t){return.05859375*t*t*(1+.75*t)},yo=function(t){return t*t*t*(35/3072)},vo=function(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)},xo=function(t){return Math.abs(t)<un?t:t-os(t)*Math.PI},Mo=function(t,e,i,n,s){var a,r;a=t/e;for(var o=0;o<15;o++)if(r=(t-(e*a-i*Math.sin(2*a)+n*Math.sin(4*a)-s*Math.sin(6*a)))/(e-2*i*Math.cos(2*a)+4*n*Math.cos(4*a)-6*s*Math.cos(6*a)),a+=r,Math.abs(r)<=1e-10)return a;return NaN};function bo(){this.sphere||(this.e0=_o(this.es),this.e1=go(this.es),this.e2=mo(this.es),this.e3=yo(this.es),this.ml0=this.a*fo(this.e0,this.e1,this.e2,this.e3,this.lat0))}function So(t){var e,i,n=t.x,s=t.y;if(n=hs(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(s),Math.cos(n))-this.lat0);else{var a=Math.sin(s),r=Math.cos(s),o=vo(this.a,this.e,a),h=Math.tan(s)*Math.tan(s),l=n*Math.cos(s),c=l*l,u=this.es*r*r/(1-this.es),p=this.a*fo(this.e0,this.e1,this.e2,this.e3,s);e=o*l*(1-c*h*(1/6-(8-h+8*u)*c/120)),i=p-this.ml0+o*a/r*c*(.5+(5-h+6*u)*c/24)}return t.x=e+this.x0,t.y=i+this.y0,t}function Oo(t){t.x-=this.x0,t.y-=this.y0;var e,i,n=t.x/this.a,s=t.y/this.a;if(this.sphere){var a=s+this.lat0;e=Math.asin(Math.sin(a)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(a))}else{var r=this.ml0/this.a+s,o=Mo(r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-un)<=_n)return t.x=this.long0,t.y=un,s<0&&(t.y*=-1),t;var h=vo(this.a,this.e,Math.sin(o)),l=h*h*h/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(o),2),u=n*this.a/h,p=u*u;e=o-h*Math.tan(o)/l*u*u*(.5-(1+3*c)*u*u/24),i=u*(1-p*(c/3+(1+3*c)*c*p/15))/Math.cos(o)}return t.x=hs(i+this.long0),t.y=xo(e),t}var wo=["Cassini","Cassini_Soldner","cass"],Eo={init:bo,forward:So,inverse:Oo,names:wo},Co=function(t,e){var i;return t>1e-7?(i=t*e,(1-t*t)*(e/(1-i*i)-.5/t*Math.log((1-i)/(1+i)))):2*e},Lo=1,To=2,Io=3,Ro=4;function Po(){var t,e=Math.abs(this.lat0);if(Math.abs(e-un)<_n?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<_n?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Co(this.e,1),this.mmf=.5/(1-this.es),this.apa=Wo(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Co(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function ko(t){var e,i,n,s,a,r,o,h,l,c,u=t.x,p=t.y;if(u=hs(u-this.long0),this.sphere){if(a=Math.sin(p),c=Math.cos(p),n=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+c*n:1+this.sinph0*a+this.cosph0*c*n,i<=_n)return null;i=Math.sqrt(2/i),e=i*c*Math.sin(u),i*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(p+this.lat0)<_n)return null;i=yn-.5*p,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),e=i*Math.sin(u),i*=n}}else{switch(o=0,h=0,l=0,n=Math.cos(u),s=Math.sin(u),a=Math.sin(p),r=Co(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(o=r/this.qp,h=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:l=1+this.sinb1*o+this.cosb1*h*n;break;case this.EQUIT:l=1+h*n;break;case this.N_POLE:l=un+p,r=this.qp-r;break;case this.S_POLE:l=p-un,r=this.qp+r;break}if(Math.abs(l)<_n)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),i=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*o-this.sinb1*h*n):(l=Math.sqrt(2/(1+h*n)))*o*this.ymf,e=this.xmf*l*h*s;break;case this.N_POLE:case this.S_POLE:r>=0?(e=(l=Math.sqrt(r))*s,i=n*(this.mode===this.S_POLE?l:-l)):e=i=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t}function jo(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,s,a,r,o,h=t.x/this.a,l=t.y/this.a;if(this.sphere){var c,u=0,p=0;if(c=Math.sqrt(h*h+l*l),i=.5*c,i>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(p=Math.sin(i),u=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(c)<=_n?0:Math.asin(l*p/c),h*=p,l=u*c;break;case this.OBLIQ:i=Math.abs(c)<=_n?this.lat0:Math.asin(u*this.sinph0+l*p*this.cosph0/c),h*=p*this.cosph0,l=(u-Math.sin(i)*this.sinph0)*c;break;case this.N_POLE:l=-l,i=un-i;break;case this.S_POLE:i-=un;break}e=0!==l||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,l):0}else{if(o=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,l*=this.dd,r=Math.sqrt(h*h+l*l),r<_n)return t.x=this.long0,t.y=this.lat0,t;s=2*Math.asin(.5*r/this.rq),n=Math.cos(s),h*=s=Math.sin(s),this.mode===this.OBLIQ?(o=n*this.sinb1+l*s*this.cosb1/r,a=this.qp*o,l=r*this.cosb1*n-l*this.sinb1*s):(o=l*s/r,a=this.qp*o,l=r*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(l=-l),a=h*h+l*l,!a)return t.x=this.long0,t.y=this.lat0,t;o=1-a/this.qp,this.mode===this.S_POLE&&(o=-o)}e=Math.atan2(h,l),i=qo(Math.asin(o),this.apa)}return t.x=hs(this.long0+e),t.y=i,t}var Ao=.3333333333333333,No=.17222222222222222,Fo=.10257936507936508,Do=.06388888888888888,Go=.0664021164021164,Bo=.016415012942191543;function Wo(t){var e,i=[];return i[0]=t*Ao,e=t*t,i[0]+=e*No,i[1]=e*Do,e*=t,i[0]+=e*Fo,i[1]+=e*Go,i[2]=e*Bo,i}function qo(t,e){var i=t+t;return t+e[0]*Math.sin(i)+e[1]*Math.sin(i+i)+e[2]*Math.sin(i+i+i)}var zo=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],Xo={init:Po,forward:ko,inverse:jo,names:zo,S_POLE:Lo,N_POLE:To,EQUIT:Io,OBLIQ:Ro},Yo=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)};function Vo(){Math.abs(this.lat1+this.lat2)<_n||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=rs(this.e3,this.sin_po,this.cos_po),this.qs1=Co(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=rs(this.e3,this.sin_po,this.cos_po),this.qs2=Co(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Co(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>_n?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Uo(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=Co(this.e3,this.sin_phi,this.cos_phi),s=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,a=this.ns0*hs(e-this.long0),r=s*Math.sin(a)+this.x0,o=this.rh-s*Math.cos(a)+this.y0;return t.x=r,t.y=o,t}function Ho(t){var e,i,n,s,a,r;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),s=0,0!==e&&(s=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?r=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,r=this.phi1z(this.e3,i)),a=hs(s/this.ns0+this.long0),t.x=a,t.y=r,t}function Jo(t,e){var i,n,s,a,r,o=Yo(.5*e);if(t<_n)return o;for(var h=t*t,l=1;l<=25;l++)if(i=Math.sin(o),n=Math.cos(o),s=t*i,a=1-s*s,r=.5*a*a/n*(e/(1-h)-i/a+.5/t*Math.log((1-s)/(1+s))),o+=r,Math.abs(r)<=1e-7)return o;return null}var Ko=["Albers_Conic_Equal_Area","Albers","aea"],Zo={init:Vo,forward:Uo,inverse:Ho,names:Ko,phi1z:Jo};function Qo(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function $o(t){var e,i,n,s,a,r,o,h,l=t.x,c=t.y;return n=hs(l-this.long0),e=Math.sin(c),i=Math.cos(c),s=Math.cos(n),r=this.sin_p14*e+this.cos_p14*i*s,a=1,r>0||Math.abs(r)<=_n?(o=this.x0+this.a*a*i*Math.sin(n)/r,h=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*i*s)/r):(o=this.x0+this.infinity_dist*i*Math.sin(n),h=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*s)),t.x=o,t.y=h,t}function th(t){var e,i,n,s,a,r;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),i=Math.sin(s),n=Math.cos(s),r=Yo(n*this.sin_p14+t.y*i*this.cos_p14/e),a=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),a=hs(this.long0+a)):(r=this.phic0,a=0),t.x=a,t.y=r,t}var eh=["gnom"],ih={init:Qo,forward:$o,inverse:th,names:eh},nh=function(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*un:un;for(var n,s,a,r,o=Math.asin(.5*e),h=0;h<30;h++)if(s=Math.sin(o),a=Math.cos(o),r=t*s,n=Math.pow(1-r*r,2)/(2*a)*(e/(1-t*t)-s/(1-r*r)+.5/t*Math.log((1-r)/(1+r))),o+=n,Math.abs(n)<=1e-10)return o;return NaN};function sh(){this.sphere||(this.k0=rs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function ah(t){var e,i,n=t.x,s=t.y,a=hs(n-this.long0);if(this.sphere)e=this.x0+this.a*a*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var r=Co(this.e,Math.sin(s));e=this.x0+this.a*this.k0*a,i=this.y0+this.a*r*.5/this.k0}return t.x=e,t.y=i,t}function rh(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=hs(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=nh(this.e,2*t.y*this.k0/this.a),e=hs(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t}var oh=["cea"],hh={init:sh,forward:ah,inverse:rh,names:oh};function lh(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function ch(t){var e=t.x,i=t.y,n=hs(e-this.long0),s=xo(i-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*s,t}function uh(t){var e=t.x,i=t.y;return t.x=hs(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=xo(this.lat0+(i-this.y0)/this.a),t}var ph=["Equirectangular","Equidistant_Cylindrical","eqc"],fh={init:lh,forward:ch,inverse:uh,names:ph},dh=20;function _h(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=_o(this.es),this.e1=go(this.es),this.e2=mo(this.es),this.e3=yo(this.es),this.ml0=this.a*fo(this.e0,this.e1,this.e2,this.e3,this.lat0)}function gh(t){var e,i,n,s=t.x,a=t.y,r=hs(s-this.long0);if(n=r*Math.sin(a),this.sphere)Math.abs(a)<=_n?(e=this.a*r,i=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(a),i=this.a*(xo(a-this.lat0)+(1-Math.cos(n))/Math.tan(a)));else if(Math.abs(a)<=_n)e=this.a*r,i=-1*this.ml0;else{var o=vo(this.a,this.e,Math.sin(a))/Math.tan(a);e=o*Math.sin(n),i=this.a*fo(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+o*(1-Math.cos(n))}return t.x=e+this.x0,t.y=i+this.y0,t}function mh(t){var e,i,n,s,a,r,o,h,l;if(n=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=_n)e=hs(n/this.a+this.long0),i=0;else{var c;for(r=this.lat0+s/this.a,o=n*n/this.a/this.a+r*r,h=r,a=dh;a;--a)if(c=Math.tan(h),l=-1*(r*(h*c+1)-h-.5*(h*h+o)*c)/((h-r)/c-1),h+=l,Math.abs(l)<=_n){i=h;break}e=hs(this.long0+Math.asin(n*Math.tan(h)/this.a)/Math.sin(i))}else if(Math.abs(s+this.ml0)<=_n)i=0,e=hs(this.long0+n/this.a);else{var u,p,f,d,_;for(r=(this.ml0+s)/this.a,o=n*n/this.a/this.a+r*r,h=r,a=dh;a;--a)if(_=this.e*Math.sin(h),u=Math.sqrt(1-_*_)*Math.tan(h),p=this.a*fo(this.e0,this.e1,this.e2,this.e3,h),f=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),d=p/this.a,l=(r*(u*d+1)-d-.5*u*(d*d+o))/(this.es*Math.sin(2*h)*(d*d+o-2*r*d)/(4*u)+(r-d)*(u*f-2/Math.sin(2*h))-f),h-=l,Math.abs(l)<=_n){i=h;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=hs(this.long0+Math.asin(n*u/this.a)/Math.sin(i))}return t.x=e,t.y=i,t}var yh=["Polyconic","poly"],vh={init:_h,forward:gh,inverse:mh,names:yh};function xh(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Mh(t){var e,i=t.x,n=t.y,s=n-this.lat0,a=i-this.long0,r=s/cn*1e-5,o=a,h=1,l=0;for(e=1;e<=10;e++)h*=r,l+=this.A[e]*h;var c,u,p=l,f=o,d=1,_=0,g=0,m=0;for(e=1;e<=6;e++)c=d*p-_*f,u=_*p+d*f,d=c,_=u,g=g+this.B_re[e]*d-this.B_im[e]*_,m=m+this.B_im[e]*d+this.B_re[e]*_;return t.x=m*this.a+this.x0,t.y=g*this.a+this.y0,t}function bh(t){var e,i,n,s=t.x,a=t.y,r=s-this.x0,o=a-this.y0,h=o/this.a,l=r/this.a,c=1,u=0,p=0,f=0;for(e=1;e<=6;e++)i=c*h-u*l,n=u*h+c*l,c=i,u=n,p=p+this.C_re[e]*c-this.C_im[e]*u,f=f+this.C_im[e]*c+this.C_re[e]*u;for(var d=0;d<this.iterations;d++){var _,g,m=p,y=f,v=h,x=l;for(e=2;e<=6;e++)_=m*p-y*f,g=y*p+m*f,m=_,y=g,v+=(e-1)*(this.B_re[e]*m-this.B_im[e]*y),x+=(e-1)*(this.B_im[e]*m+this.B_re[e]*y);m=1,y=0;var M=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)_=m*p-y*f,g=y*p+m*f,m=_,y=g,M+=e*(this.B_re[e]*m-this.B_im[e]*y),b+=e*(this.B_im[e]*m+this.B_re[e]*y);var S=M*M+b*b;p=(v*M+x*b)/S,f=(x*M-v*b)/S}var O=p,w=f,E=1,C=0;for(e=1;e<=9;e++)E*=O,C+=this.D[e]*E;var L=this.lat0+C*cn*1e5,T=this.long0+w;return t.x=T,t.y=L,t}var Sh=["New_Zealand_Map_Grid","nzmg"],Oh={init:xh,forward:Mh,inverse:bh,names:Sh};function wh(){}function Eh(t){var e=t.x,i=t.y,n=hs(e-this.long0),s=this.x0+this.a*n,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=s,t.y=a,t}function Ch(t){t.x-=this.x0,t.y-=this.y0;var e=hs(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t}var Lh=["Miller_Cylindrical","mill"],Th={init:wh,forward:Eh,inverse:Ch,names:Lh},Ih=20;function Rh(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=tr(this.es)}function Ph(t){var e,i,n=t.x,s=t.y;if(n=hs(n-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(s),r=Ih;r;--r){var o=(this.m*s+Math.sin(s)-a)/(this.m+Math.cos(s));if(s-=o,Math.abs(o)<_n)break}else s=1!==this.n?Math.asin(this.n*Math.sin(s)):s;e=this.a*this.C_x*n*(this.m+Math.cos(s)),i=this.a*this.C_y*s}else{var h=Math.sin(s),l=Math.cos(s);i=this.a*er(s,h,l,this.en),e=this.a*n*l/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=i,t}function kh(t){var e,i,n,s;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=Yo((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Yo(Math.sin(e)/this.n)),n=hs(n+this.long0),e=xo(e)):(e=nr(t.y/this.a,this.es,this.en),s=Math.abs(e),s<un?(s=Math.sin(e),i=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),n=hs(i)):s-_n<un&&(n=this.long0)),t.x=n,t.y=e,t}var jh=["Sinusoidal","sinu"],Ah={init:Rh,forward:Ph,inverse:kh,names:jh};function Nh(){}function Fh(t){var e=t.x,i=t.y,n=hs(e-this.long0),s=i,a=Math.PI*Math.sin(i);while(1){var r=-(s+Math.sin(s)-a)/(1+Math.cos(s));if(s+=r,Math.abs(r)<_n)break}s/=2,Math.PI/2-Math.abs(i)<_n&&(n=0);var o=.900316316158*this.a*n*Math.cos(s)+this.x0,h=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=o,t.y=h,t}function Dh(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var n=hs(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var s=Math.asin(i);return t.x=n,t.y=s,t}var Gh=["Mollweide","moll"],Bh={init:Nh,forward:Fh,inverse:Dh,names:Gh};function Wh(){Math.abs(this.lat1+this.lat2)<_n||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=_o(this.es),this.e1=go(this.es),this.e2=mo(this.es),this.e3=yo(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=rs(this.e,this.sinphi,this.cosphi),this.ml1=fo(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<_n?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=rs(this.e,this.sinphi,this.cosphi),this.ml2=fo(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=fo(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function qh(t){var e,i=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var s=fo(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-s)}var a=this.ns*hs(i-this.long0),r=this.x0+e*Math.sin(a),o=this.y0+this.rh-e*Math.cos(a);return t.x=r,t.y=o,t}function zh(t){var e,i,n,s;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var a=0;if(0!==i&&(a=Math.atan2(e*t.x,e*t.y)),this.sphere)return s=hs(this.long0+a/this.ns),n=xo(this.g-i/this.a),t.x=s,t.y=n,t;var r=this.g-i/this.a;return n=Mo(r,this.e0,this.e1,this.e2,this.e3),s=hs(this.long0+a/this.ns),t.x=s,t.y=n,t}var Xh=["Equidistant_Conic","eqdc"],Yh={init:Wh,forward:qh,inverse:zh,names:Xh};function Vh(){this.R=this.a}function Uh(t){var e,i,n=t.x,s=t.y,a=hs(n-this.long0);Math.abs(s)<=_n&&(e=this.x0+this.R*a,i=this.y0);var r=Yo(2*Math.abs(s/Math.PI));(Math.abs(a)<=_n||Math.abs(Math.abs(s)-un)<=_n)&&(e=this.x0,i=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*r):this.y0+Math.PI*this.R*-Math.tan(.5*r));var o=.5*Math.abs(Math.PI/a-a/Math.PI),h=o*o,l=Math.sin(r),c=Math.cos(r),u=c/(l+c-1),p=u*u,f=u*(2/l-1),d=f*f,_=Math.PI*this.R*(o*(u-d)+Math.sqrt(h*(u-d)*(u-d)-(d+h)*(p-d)))/(d+h);a<0&&(_=-_),e=this.x0+_;var g=h+u;return _=Math.PI*this.R*(f*g-o*Math.sqrt((d+h)*(h+1)-g*g))/(d+h),i=s>=0?this.y0+_:this.y0-_,t.x=e,t.y=i,t}function Hh(t){var e,i,n,s,a,r,o,h,l,c,u,p,f;return t.x-=this.x0,t.y-=this.y0,u=Math.PI*this.R,n=t.x/u,s=t.y/u,a=n*n+s*s,r=-Math.abs(s)*(1+a),o=r-2*s*s+n*n,h=-2*r+1+2*s*s+a*a,f=s*s/h+(2*o*o*o/h/h/h-9*r*o/h/h)/27,l=(r-o*o/3/h)/h,c=2*Math.sqrt(-l/3),u=3*f/l/c,Math.abs(u)>1&&(u=u>=0?1:-1),p=Math.acos(u)/3,i=t.y>=0?(-c*Math.cos(p+Math.PI/3)-o/3/h)*Math.PI:-(-c*Math.cos(p+Math.PI/3)-o/3/h)*Math.PI,e=Math.abs(n)<_n?this.long0:hs(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(n*n-s*s)+a*a))/2/n),t.x=e,t.y=i,t}var Jh=["Van_der_Grinten_I","VanDerGrinten","vandg"],Kh={init:Vh,forward:Uh,inverse:Hh,names:Jh};function Zh(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function Qh(t){var e,i,n,s,a,r,o,h,l,c,u,p,f,d,_,g,m,y,v,x,M,b,S,O=t.x,w=t.y,E=Math.sin(t.y),C=Math.cos(t.y),L=hs(O-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=_n?(t.x=this.x0+this.a*(un-w)*Math.sin(L),t.y=this.y0-this.a*(un-w)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=_n?(t.x=this.x0+this.a*(un+w)*Math.sin(L),t.y=this.y0+this.a*(un+w)*Math.cos(L),t):(y=this.sin_p12*E+this.cos_p12*C*Math.cos(L),g=Math.acos(y),m=g?g/Math.sin(g):1,t.x=this.x0+this.a*m*C*Math.sin(L),t.y=this.y0+this.a*m*(this.cos_p12*E-this.sin_p12*C*Math.cos(L)),t):(e=_o(this.es),i=go(this.es),n=mo(this.es),s=yo(this.es),Math.abs(this.sin_p12-1)<=_n?(a=this.a*fo(e,i,n,s,un),r=this.a*fo(e,i,n,s,w),t.x=this.x0+(a-r)*Math.sin(L),t.y=this.y0-(a-r)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=_n?(a=this.a*fo(e,i,n,s,un),r=this.a*fo(e,i,n,s,w),t.x=this.x0+(a+r)*Math.sin(L),t.y=this.y0+(a+r)*Math.cos(L),t):(o=E/C,h=vo(this.a,this.e,this.sin_p12),l=vo(this.a,this.e,E),c=Math.atan((1-this.es)*o+this.es*h*this.sin_p12/(l*C)),u=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(L)),v=0===u?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(u)-Math.PI)<=_n?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(L)*Math.cos(c)/Math.sin(u)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),f=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es),d=p*f,_=f*f,x=v*v,M=x*v,b=M*v,S=b*v,g=h*v*(1-x*_*(1-_)/6+M/8*d*(1-2*_)+b/120*(_*(4-7*_)-3*p*p*(1-7*_))-S/48*d),t.x=this.x0+g*Math.sin(u),t.y=this.y0+g*Math.cos(u),t))}function $h(t){var e,i,n,s,a,r,o,h,l,c,u,p,f,d,_,g,m,y,v,x,M,b,S,O;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*un*this.a)return;return i=e/this.a,n=Math.sin(i),s=Math.cos(i),a=this.long0,Math.abs(e)<=_n?r=this.lat0:(r=Yo(s*this.sin_p12+t.y*n*this.cos_p12/e),o=Math.abs(this.lat0)-un,a=Math.abs(o)<=_n?this.lat0>=0?hs(this.long0+Math.atan2(t.x,-t.y)):hs(this.long0-Math.atan2(-t.x,t.y)):hs(this.long0+Math.atan2(t.x*n,e*this.cos_p12*s-t.y*this.sin_p12*n))),t.x=a,t.y=r,t}return h=_o(this.es),l=go(this.es),c=mo(this.es),u=yo(this.es),Math.abs(this.sin_p12-1)<=_n?(p=this.a*fo(h,l,c,u,un),e=Math.sqrt(t.x*t.x+t.y*t.y),f=p-e,r=Mo(f/this.a,h,l,c,u),a=hs(this.long0+Math.atan2(t.x,-1*t.y)),t.x=a,t.y=r,t):Math.abs(this.sin_p12+1)<=_n?(p=this.a*fo(h,l,c,u,un),e=Math.sqrt(t.x*t.x+t.y*t.y),f=e-p,r=Mo(f/this.a,h,l,c,u),a=hs(this.long0+Math.atan2(t.x,t.y)),t.x=a,t.y=r,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),d=vo(this.a,this.e,this.sin_p12),m=Math.cos(g),y=this.e*this.cos_p12*m,v=-y*y/(1-this.es),x=3*this.es*(1-v)*this.sin_p12*this.cos_p12*m/(1-this.es),M=e/d,b=M-v*(1+v)*Math.pow(M,3)/6-x*(1+3*v)*Math.pow(M,4)/24,S=1-v*b*b/2-M*b*b*b/6,_=Math.asin(this.sin_p12*Math.cos(b)+this.cos_p12*Math.sin(b)*m),a=hs(this.long0+Math.asin(Math.sin(g)*Math.sin(b)/Math.cos(_))),O=Math.sin(_),r=Math.atan2((O-this.es*S*this.sin_p12)*Math.tan(_),O*(1-this.es)),t.x=a,t.y=r,t)}var tl=["Azimuthal_Equidistant","aeqd"],el={init:Zh,forward:Qh,inverse:$h,names:tl};function il(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function nl(t){var e,i,n,s,a,r,o,h,l=t.x,c=t.y;return n=hs(l-this.long0),e=Math.sin(c),i=Math.cos(c),s=Math.cos(n),r=this.sin_p14*e+this.cos_p14*i*s,a=1,(r>0||Math.abs(r)<=_n)&&(o=this.a*a*i*Math.sin(n),h=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*i*s)),t.x=o,t.y=h,t}function sl(t){var e,i,n,s,a,r,o;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),i=Yo(e/this.a),n=Math.sin(i),s=Math.cos(i),r=this.long0,Math.abs(e)<=_n?(o=this.lat0,t.x=r,t.y=o,t):(o=Yo(s*this.sin_p14+t.y*n*this.cos_p14/e),a=Math.abs(this.lat0)-un,Math.abs(a)<=_n?(r=this.lat0>=0?hs(this.long0+Math.atan2(t.x,-t.y)):hs(this.long0-Math.atan2(-t.x,t.y)),t.x=r,t.y=o,t):(r=hs(this.long0+Math.atan2(t.x*n,e*this.cos_p14*s-t.y*this.sin_p14*n)),t.x=r,t.y=o,t))}var al=["ortho"],rl={init:il,forward:nl,inverse:sl,names:al},ol={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},hl={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function ll(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=un-yn/2?this.face=ol.TOP:this.lat0<=-(un-yn/2)?this.face=ol.BOTTOM:Math.abs(this.long0)<=yn?this.face=ol.FRONT:Math.abs(this.long0)<=un+yn?this.face=this.long0>0?ol.RIGHT:ol.LEFT:this.face=ol.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function cl(t){var e,i,n,s,a,r,o={x:0,y:0},h={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,this.face===ol.TOP)s=un-e,i>=yn&&i<=un+yn?(h.value=hl.AREA_0,n=i-un):i>un+yn||i<=-(un+yn)?(h.value=hl.AREA_1,n=i>0?i-xn:i+xn):i>-(un+yn)&&i<=-yn?(h.value=hl.AREA_2,n=i+un):(h.value=hl.AREA_3,n=i);else if(this.face===ol.BOTTOM)s=un+e,i>=yn&&i<=un+yn?(h.value=hl.AREA_0,n=-i+un):i<yn&&i>=-yn?(h.value=hl.AREA_1,n=-i):i<-yn&&i>=-(un+yn)?(h.value=hl.AREA_2,n=-i-un):(h.value=hl.AREA_3,n=i>0?-i+xn:-i-xn);else{var l,c,u,p,f,d,_;this.face===ol.RIGHT?i=fl(i,+un):this.face===ol.BACK?i=fl(i,+xn):this.face===ol.LEFT&&(i=fl(i,-un)),p=Math.sin(e),f=Math.cos(e),d=Math.sin(i),_=Math.cos(i),l=f*_,c=f*d,u=p,this.face===ol.FRONT?(s=Math.acos(l),n=pl(s,u,c,h)):this.face===ol.RIGHT?(s=Math.acos(c),n=pl(s,u,-l,h)):this.face===ol.BACK?(s=Math.acos(-l),n=pl(s,u,-c,h)):this.face===ol.LEFT?(s=Math.acos(-c),n=pl(s,u,l,h)):(s=n=0,h.value=hl.AREA_0)}return r=Math.atan(12/xn*(n+Math.acos(Math.sin(n)*Math.cos(yn))-un)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(r)*Math.cos(r))/(1-Math.cos(Math.atan(1/Math.cos(n))))),h.value===hl.AREA_1?r+=un:h.value===hl.AREA_2?r+=xn:h.value===hl.AREA_3&&(r+=1.5*xn),o.x=a*Math.cos(r),o.y=a*Math.sin(r),o.x=o.x*this.a+this.x0,o.y=o.y*this.a+this.y0,t.x=o.x,t.y=o.y,t}function ul(t){var e,i,n,s,a,r,o,h,l,c,u,p,f={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?d.value=hl.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(d.value=hl.AREA_1,e-=un):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=hl.AREA_2,e=e<0?e+xn:e-xn):(d.value=hl.AREA_3,e+=un),l=xn/12*Math.tan(e),a=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),r=Math.atan(a),n=Math.cos(e),s=Math.tan(i),o=1-n*n*s*s*(1-Math.cos(Math.atan(1/Math.cos(r)))),o<-1?o=-1:o>1&&(o=1),this.face===ol.TOP)h=Math.acos(o),f.phi=un-h,d.value===hl.AREA_0?f.lam=r+un:d.value===hl.AREA_1?f.lam=r<0?r+xn:r-xn:d.value===hl.AREA_2?f.lam=r-un:f.lam=r;else if(this.face===ol.BOTTOM)h=Math.acos(o),f.phi=h-un,d.value===hl.AREA_0?f.lam=-r+un:d.value===hl.AREA_1?f.lam=-r:d.value===hl.AREA_2?f.lam=-r-un:f.lam=r<0?-r-xn:-r+xn;else{var _,g,m;_=o,l=_*_,m=l>=1?0:Math.sqrt(1-l)*Math.sin(r),l+=m*m,g=l>=1?0:Math.sqrt(1-l),d.value===hl.AREA_1?(l=g,g=-m,m=l):d.value===hl.AREA_2?(g=-g,m=-m):d.value===hl.AREA_3&&(l=g,g=m,m=-l),this.face===ol.RIGHT?(l=_,_=-g,g=l):this.face===ol.BACK?(_=-_,g=-g):this.face===ol.LEFT&&(l=_,_=g,g=-l),f.phi=Math.acos(-m)-un,f.lam=Math.atan2(g,_),this.face===ol.RIGHT?f.lam=fl(f.lam,-un):this.face===ol.BACK?f.lam=fl(f.lam,-xn):this.face===ol.LEFT&&(f.lam=fl(f.lam,+un))}0!==this.es&&(c=f.phi<0?1:0,u=Math.tan(f.phi),p=this.b/Math.sqrt(u*u+this.one_minus_f_squared),f.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),c&&(f.phi=-f.phi));return f.lam+=this.long0,t.x=f.lam,t.y=f.phi,t}function pl(t,e,i,n){var s;return t<_n?(n.value=hl.AREA_0,s=0):(s=Math.atan2(e,i),Math.abs(s)<=yn?n.value=hl.AREA_0:s>yn&&s<=un+yn?(n.value=hl.AREA_1,s-=un):s>un+yn||s<=-(un+yn)?(n.value=hl.AREA_2,s=s>=0?s-xn:s+xn):(n.value=hl.AREA_3,s+=un)),s}function fl(t,e){var i=t+e;return i<-xn?i+=vn:i>+xn&&(i-=vn),i}var dl=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],_l={init:ll,forward:cl,inverse:ul,names:dl},gl=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ml=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],yl=.8487,vl=1.3523,xl=mn/5,Ml=1/xl,bl=18,Sl=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},Ol=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};function wl(t,e,i,n){for(var s=e;n;--n){var a=t(s);if(s-=a,Math.abs(a)<i)break}return s}function El(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Cl(t){var e=hs(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(i*xl);n<0?n=0:n>=bl&&(n=bl-1),i=mn*(i-Ml*n);var s={x:Sl(gl[n],i)*e,y:Sl(ml[n],i)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*yl+this.x0,s.y=s.y*this.a*vl+this.y0,s}function Ll(t){var e={x:(t.x-this.x0)/(this.a*yl),y:Math.abs(t.y-this.y0)/(this.a*vl)};if(e.y>=1)e.x/=gl[bl][0],e.y=t.y<0?-un:un;else{var i=Math.floor(e.y*bl);for(i<0?i=0:i>=bl&&(i=bl-1);;)if(ml[i][0]>e.y)--i;else{if(!(ml[i+1][0]<=e.y))break;++i}var n=ml[i],s=5*(e.y-n[0])/(ml[i+1][0]-n[0]);s=wl((function(t){return(Sl(n,t)-e.y)/Ol(n,t)}),s,_n,100),e.x/=Sl(gl[i],s),e.y=(5*i+s)*gn,t.y<0&&(e.y=-e.y)}return e.x=hs(e.x+this.long0),e}var Tl=["Robinson","robin"],Il={init:El,forward:Cl,inverse:Ll,names:Tl};function Rl(){this.name="geocent"}function Pl(t){var e=Js(t,this.es,this.a);return e}function kl(t){var e=Ks(t,this.es,this.a,this.b);return e}var jl=["Geocentric","geocentric","geocent","Geocent"],Al={init:Rl,forward:Pl,inverse:kl,names:jl},Nl={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Fl={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Dl(){if(Object.keys(Fl).forEach(function(t){if("undefined"===typeof this[t])this[t]=Fl[t].def;else{if(Fl[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Fl[t].num&&(this[t]=parseFloat(this[t]))}Fl[t].degrees&&(this[t]=this[t]*gn)}.bind(this)),Math.abs(Math.abs(this.lat0)-un)<_n?this.mode=this.lat0<0?Nl.S_POLE:Nl.N_POLE:Math.abs(this.lat0)<_n?this.mode=Nl.EQUIT:(this.mode=Nl.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function Gl(t){t.x-=this.long0;var e,i,n,s,a=Math.sin(t.y),r=Math.cos(t.y),o=Math.cos(t.x);switch(this.mode){case Nl.OBLIQ:i=this.sinph0*a+this.cosph0*r*o;break;case Nl.EQUIT:i=r*o;break;case Nl.S_POLE:i=-a;break;case Nl.N_POLE:i=a;break}switch(i=this.pn1/(this.p-i),e=i*r*Math.sin(t.x),this.mode){case Nl.OBLIQ:i*=this.cosph0*a-this.sinph0*r*o;break;case Nl.EQUIT:i*=a;break;case Nl.N_POLE:i*=-r*o;break;case Nl.S_POLE:i*=r*o;break}return n=i*this.cg+e*this.sg,s=1/(n*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*s,i=n*s,t.x=e*this.a,t.y=i*this.a,t}function Bl(t){t.x/=this.a,t.y/=this.a;var e,i,n,s={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,i=this.pn1*t.y*this.cw*n,t.x=e*this.cg+i*this.sg,t.y=i*this.cg-e*this.sg;var a=cr(t.x,t.y);if(Math.abs(a)<_n)s.x=0,s.y=t.y;else{var r,o;switch(o=1-a*a*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/a+a/this.pn1),r=Math.sqrt(1-o*o),this.mode){case Nl.OBLIQ:s.y=Math.asin(r*this.sinph0+t.y*o*this.cosph0/a),t.y=(r-this.sinph0*Math.sin(s.y))*a,t.x*=o*this.cosph0;break;case Nl.EQUIT:s.y=Math.asin(t.y*o/a),t.y=r*a,t.x*=o;break;case Nl.N_POLE:s.y=Math.asin(r),t.y=-t.y;break;case Nl.S_POLE:s.y=-Math.asin(r);break}s.x=Math.atan2(t.x,t.y)}return t.x=s.x+this.long0,t.y=s.y,t}var Wl=["Tilted_Perspective","tpers"],ql={init:Dl,forward:Gl,inverse:Bl,names:Wl},zl=function(t){t.Proj.projections.add(hr),t.Proj.projections.add(Mr),t.Proj.projections.add(Er),t.Proj.projections.add(Dr),t.Proj.projections.add(Xr),t.Proj.projections.add(Jr),t.Proj.projections.add(io),t.Proj.projections.add(oo),t.Proj.projections.add(po),t.Proj.projections.add(Eo),t.Proj.projections.add(Xo),t.Proj.projections.add(Zo),t.Proj.projections.add(ih),t.Proj.projections.add(hh),t.Proj.projections.add(fh),t.Proj.projections.add(vh),t.Proj.projections.add(Oh),t.Proj.projections.add(Th),t.Proj.projections.add(Ah),t.Proj.projections.add(Bh),t.Proj.projections.add(Yh),t.Proj.projections.add(Kh),t.Proj.projections.add(el),t.Proj.projections.add(rl),t.Proj.projections.add(_l),t.Proj.projections.add(Il),t.Proj.projections.add(Al),t.Proj.projections.add(ql)};da.defaultDatum="WGS84",da.Proj=Us,da.WGS84=new da.Proj("WGS84"),da.Point=Wa,da.toPoint=aa,da.defs=Hn,da.nadgrid=As,da.transform=la,da.mgrs=Sa,da.version="__VERSION__",zl(da);var Xl=da,Yl=i("91b1"),Vl={KVP:"KVP",REST:"REST"};function Ul(t,e){var i=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))}));var n=i.join("&");return t=t.replace(/[?&]$/,""),t=-1===t.indexOf("?")?t+"?":t+"&",t+n}var Hl=i("78db"),Jl=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kl=function(t){function e(e){var i=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return i.matrixIds_=e.matrixIds,i}return Jl(e,t),e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(Hl["a"]),Zl=Kl;var Ql=i("9cff"),$l=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tc=function(t){function e(e){var i=this,n=void 0!==e.requestEncoding?e.requestEncoding:Vl.KVP,s=e.tileGrid,a=e.urls;return void 0===a&&void 0!==e.url&&(a=Object(Ql["c"])(e.url)),i=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,imageSmoothing:e.imageSmoothing,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:s,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:a,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition,zDirection:e.zDirection})||this,i.version_=void 0!==e.version?e.version:"1.0.0",i.format_=void 0!==e.format?e.format:"image/jpeg",i.dimensions_=void 0!==e.dimensions?e.dimensions:{},i.layer_=e.layer,i.matrixSet_=e.matrixSet,i.style_=e.style,i.requestEncoding_=n,i.setKey(i.getKeyForDimensions_()),a&&a.length>0&&(i.tileUrlFunction=Object(Ql["b"])(a.map(i.createFromWMTSTemplate.bind(i)))),i}return $l(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(Object(Ql["b"])(t.map(this.createFromWMTSTemplate.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var i in this.dimensions_)e[t++]=i+"-"+this.dimensions_[i];return e.join("/")},e.prototype.updateDimensions=function(t){Object(dt["a"])(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e.prototype.createFromWMTSTemplate=function(t){var e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==Vl.KVP&&Object(dt["a"])(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==Vl.KVP?Ul(t,i):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in i?i[e.toLowerCase()]:t}));var n=this.tileGrid,s=this.dimensions_;return function(i,a,r){if(i){var o={TileMatrix:n.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};Object(dt["a"])(o,s);var h=t;return h=e==Vl.KVP?Ul(h,o):h.replace(/\{(\w+?)\}/g,(function(t,e){return o[e]})),h}}},e}(Yl["a"]),ec=tc;var ic=i("9d47"),nc=i("e50d"),sc=i("b2da"),ac=i.n(sc),rc={name:"MapPane",data:function(){return{map:null,scaleText:0,layer:[],proj4Data:{EPSG2447:{code:"2447",name:"JGD2000 / Japan Plane Rectangular CS V",def:"+proj=tmerc +lat_0=36 +lon_0=134.3333333333333 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",bbox:[35.71,133.13,34.13,135.47]},EPSG2448:{code:"2448",name:"JGD2000 / Japan Plane Rectangular CS VI",def:"+proj=tmerc +lat_0=36 +lon_0=136 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",bbox:[36.33,134.86,33.4,136.99]},EPSG30165:{code:"30165",name:"Tokyo / Japan Plane Rectangular CS V",def:"+proj=tmerc +lat_0=36 +lon_0=134.3333333333333 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs",bbox:[35.71,133.13,34.13,135.47]},EPSG30166:{code:"30166",name:"Tokyo / Japan Plane Rectangular CS VI",def:"+proj=tmerc +lat_0=36 +lon_0=136 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs",bbox:[36.33,134.86,33.4,136.99]}}}},computed:{osmSource:function(){return new Ni},debugLayer:function(){return new Gi["a"]({title:"DebugLayer",source:new qi({tileGrid:this.osmSource.getTileGrid(),projection:this.osmSource.getProjection()}),visible:!1})},graticule:function(){return new Ri({title:"Graticule",strokeStyle:new G({color:"rgba(255,120,0,0.9)",width:2,lineDash:[.5,4]}),showLabels:!0,visible:!1,wrapX:!1})}},methods:{search:function(){},initLayer:function(){var t=new Gi["a"]({title:"OSM",type:"base",visible:!0,source:new Ni}),e=new Gi["a"]({title:"Water color",type:"base",visible:!1,source:new Ji({layer:"watercolor"})}),i=new Gi["a"]({title:"mierune",type:"base",visible:!1,source:new Pi["a"]({url:"https://tile.mierune.co.jp/mierune_mono/{z}/{x}/{y}.png",attributions:'Maptiles by <a href="http://mierune.co.jp" target="_blank">MIERUNE</a>, under CC BY. Data by <a href="http://osm.org/copyright" target="_blank">OpenStreetMap</a> contributors, under ODbL.',attributionsCollapsible:!1,tileSize:[256,256],minZoom:0,maxZoom:18})}),n=new Gi["a"]({title:"osm_tile",opacity:.5,source:this.osmSource}),s=this.proj4Data["EPSG2447"];this.setProj4(s);for(var a=this.getProjExtent(s),r=a.getExtent(),o=Object(S["E"])(r)/256,h=new Array(19),l=new Array(19),c=0;c<19;++c)h[c]=o/Math.pow(2,c),l[c]="EPSG:2447:".concat(c);var u=new Gi["a"]({title:"WMTS",source:new ec({attributions:'Tiles © <a href="https://mrdata.usgs.gov/geology/state/" target="_blank">USGS</a>',url:"http;//harima-isk:8080/geoserver/gwc/service/wmts",layer:"harima_bunkazai:包蔵地",matrixSet:"EPSG:2447",format:"image/png",tileGrid:new Zl({origin:Object(S["C"])(r),resolutions:h,matrixIds:l}),style:"default",wrapX:!0,opacity:.7,isBaseLayer:!1})});this.addLayer(t),this.addLayer(e),this.addLayer(i),this.addLayer(n),this.addLayer(this.debugLayer),this.addLayer(this.graticule),this.addLayer(u)},setMap:function(){this.initLayer();var t=new zi["default"]({title:"Base maps",layers:this.layer}),e=new ac.a({reverse:!0,groupSelectStyle:"group"});this.map=new Fi["a"]({target:"map",layers:t,view:new Di["a"]({projection:"EPSG:3857",center:[0,0],zoom:1})}),this.map.addControl(e),this.map.addControl(new ic["a"]),this.map.addControl(new nc["a"])},addLayer:function(t){this.layer.push(t)},setProj4:function(t){console.log(t.name);var e="EPSG:"+t.code;Xl.defs(e,t.def),$i(Xl)},getProjExtent:function(t){var e=t.code,i=t.bbox,n="EPSG:"+e,s=Object(Ze["l"])(n),a=Object(Ze["n"])("EPSG:4326",s),r=[i[1],i[2],i[3],i[0]];s.setWorldExtent(r),i[1]>i[3]&&(r=[i[1],i[2],i[3]+360,i[0]]);var o=Object(S["a"])(r,a,void 0,8);return s.setExtent(o),s},setProjection:function(t){this.setProj4(t);var e=this.getProjExtent(t),i=e.getExtent(),n=new Di["a"]({projection:e});this.map.setView(n),n.fit(i)},setView:function(){},mapCreate:function(){var t=Object(Ze["l"])("EPSG:2447"),e=t.getExtent(),i=Object(S["E"])(e)/256;console.log(i);for(var n=new Array(19),s=new Array(19),a=0;a<19;++a)n[a]=i/Math.pow(2,a),s[a]=a;var r=new Gi["a"]({title:"harima_wmts",opacity:.5,type:"base",visible:!1,source:new ec({url:"http;//harima-isk:8080/geoserver/gwc/service/wmts?REQUEST=GetCapabilities",attributions:'Maptiles by <a href="http://mierune.co.jp" target="_blank">MIERUNE</a>, under CC BY. Data by <a href="http://osm.org/copyright" target="_blank">OpenStreetMap</a> contributors, under ODbL.',attributionsCollapsible:!1,format:"image/png",projection:t,tileGrid:new Zl({origin:Object(S["C"])(e),resolutions:n,matrixIds:s}),style:"default",wrapX:!0})});this.addLayer(r),this.map.updateSize()},mapClick:function(t){console.log(t);var e=Object(Ze["t"])(t.coordinate,"EPSG:3857","EPSG:4326");alert("lat: "+e[1]+", lat: "+e[0])}},mounted:function(){this.setMap();var t=this.proj4Data["EPSG2447"];this.setProjection(t)}},oc=rc,hc=(i("ecb7"),i("2877")),lc=Object(hc["a"])(oc,a,r,!1,null,"61903772",null),cc=lc.exports,uc={name:"about",components:{MapPane:cc}},pc=uc,fc=Object(hc["a"])(pc,n,s,!1,null,null,null);e["default"]=fc.exports}}]);
//# sourceMappingURL=view-About-vue.7824ce50.js.map